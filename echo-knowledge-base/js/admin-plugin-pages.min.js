jQuery(document).ready((function(e){var t=e("#ekb-admin-page-wrap");if(e(t).find(".epkb-admin__content").length>0){e("#wpwrap").addClass("epkb-admin__wpwrap")}let a=false;let n=e("#epkb-admin-page-reload-confirmation");e("#epkb-list-of-kbs").on("change",(function(t){let a=e(this).find("option:selected");if(a.attr("data-plugin")!=="core"){return}if(a.val()==="closed"){window.location=a.attr("data-target");return}let n=window.location.href;if(e(this).val()==="archived"){let e=window.location.href.split("#");window.location=e[0]+"&archived-kbs=on";return}else{n=n.replaceAll("&archived-kbs=on","").replaceAll("&epkb_after_kb_setup","")}let o=a.attr("data-link");if(typeof o!=="undefined"&&o.length>0){window.open(o,"_blank");e(this).val(e(this).attr("data-active-kb-id")).trigger("change");return}let i=e(this).attr("data-active-kb-id");let c=e(this).val();if(c){e(this).attr("data-active-kb-id",c);const t=new Date;t.setTime(t.getTime()+24*60*60*1e3);document.cookie="eckb_kb_id="+c+";"+"expires="+t.toUTCString();+";path=/;samesite:strict";window.location.href=n.replaceAll("epkb_post_type_"+i,"epkb_post_type_"+c)}}));e("#epkb_save_access_control").on("click",(function(){A({action:"epkb_save_access_control",_wpnonce_epkb_ajax_action:epkb_vars.nonce,epkb_kb_id:e("#epkb-list-of-kbs").val(),admin_eckb_access_need_help_read:e('#admin_eckb_access_need_help_read input[type="radio"]:checked').val(),admin_eckb_access_search_analytics_read:e('#admin_eckb_access_search_analytics_read input[type="radio"]:checked').val(),admin_eckb_access_addons_news_read:e('#admin_eckb_access_addons_news_read input[type="radio"]:checked').val(),admin_eckb_access_order_articles_write:e('#admin_eckb_access_order_articles_write input[type="radio"]:checked').val(),admin_eckb_access_frontend_editor_write:e('#admin_eckb_access_frontend_editor_write input[type="radio"]:checked').val(),admin_eckb_access_faqs_write:e('#admin_eckb_access_faqs_write input[type="radio"]:checked').val()},(function(t){e(".eckb-top-notice-message").remove();if(typeof t.message!=="undefined"){e("body").append(t.message)}}))}));e("#epkb-admin__boxes-list__tools .epkb-kbnh__feature-links .epkb-primary-btn").on("click",(function(){let t=e(this).prop("id");if(t=="epkb_core_export"){e("form.epkb-export-kbs").submit();return false}if(e(".epkb-kbnh__feature-panel-container--"+t).length==0){return false}e(this).closest(".epkb-setting-box__list").find(".epkb-kbnh__feature-container").css({display:"none"});e(this).closest(".epkb-setting-box__list").find(".epkb-kbnh__feature-panel-container--"+t).css({display:"block"});return false}));e(document).on("epkb_hide_export_import_panels",(function(){e("#epkb-admin__boxes-list__tools .epkb-setting-box__list>.epkb-kbnh__feature-container").css({display:"flex"});e("#epkb-admin__boxes-list__tools .epkb-setting-box__list>.epkb-kbnh__feature-panel-container").css({display:"none"})}));e(".epkb-kbnh-back-btn").on("click",(function(){e(document).trigger("epkb_hide_export_import_panels");return false}));e(".epkb-admin__top-panel__item").on("click",(function(){let t="epkb-admin__top-panel__item--active";let a="epkb-admin__boxes-list--active";let n="epkb-admin__secondary-panel--active";let o="epkb-admin__secondary-panel__item--active";if(e(this).hasClass(t)){let t=e(n).find("."+o).length?e(n).find("."+o):e(e(n).find(".epkb-admin__secondary-panel__item")[0]);setTimeout((function(){t.trigger("click")}),100);return}let i=e(this).attr("data-target");e(".epkb-admin__top-panel__item").removeClass(t);e(this).addClass(t);e(".epkb-admin__boxes-list").removeClass(a);e("#epkb-admin__boxes-list__"+i).addClass(a);e(".epkb-admin__secondary-panel").removeClass(n);let c=e("#epkb-admin__secondary-panel__"+i).addClass(n);let s=c.find("."+o).length?c.find("."+o):e(c.find(".epkb-admin__secondary-panel__item")[0]);setTimeout((function(){s.trigger("click")}),100);let r=this;setTimeout((function(){if(e(r).attr("id")==="eckb_license_tab"){e("#eckb_license_tab").trigger("click")}}),100);if(i==="features"&&!e(this).hasClass("epkb-admin__flag--visited")){e.ajax({type:"POST",dataType:"json",data:{action:"epkb_features_tab_visited",_wpnonce_epkb_ajax_action:epkb_vars.nonce},url:ajaxurl}).done((function(){e("#epkb-admin__step-cta-box__features .epkb-admin__step-cta-box__header").after('<span class="epkb-admin__step-cta-box__content__icon epkbfa epkbfa-check-circle"></span>')}))}window.location.hash="#"+i}));(function(){let t=window.location.href.split("#");if(t.length===1){e(e(".epkb-admin__top-panel__item")[0]).trigger("click");return}let a=t[1].split("__");if(a.length===0){return}let n=e('.epkb-admin__top-panel__item[data-target="'+a[0]+'"]');if(n.length===0){e(e(".epkb-admin__top-panel__item")[0]).trigger("click");return}e(n[0]).trigger("click");let o=a[0]==="settings"&&a.length>1?e('.epkb-admin__form-tab[data-target="'+a[1]+'"]'):"";if(o.length){N(o);let t=a.length>2?e('.epkb-admin__form-sub-tab[data-target="'+a[2]+'"]'):"";if(t.length){Q(t)}if(a.length>2&&a[2].indexOf("module--")>-1){let n=a[2].replace("module--","");t=e('.epkb-admin__form-sub-tab[data-selected-module="'+n+'"]');if(t.length){Q(t)}}if(a.length>3&&a[3].length){let t=a[3].split("--");let n="";let o=e(".epkb-admin__form-sub-tab-wrap--active").length?".epkb-admin__form-sub-tab-wrap--active":".epkb-admin__form-tab-wrap--active";e.each(t,(function(e,t){n+=o+" "+'.epkb-admin__form-tab-content[data-target="'+t+'"]'+","+" "}));n=n.slice(0,-2);let i=e(n);if(i.length){setTimeout((function(){e([document.documentElement,document.body]).animate({scrollTop:e(i[0]).offset().top-50},700);i.addClass("epkb-highlighted_config_box")}),200)}}if(a.length>4){e(".epkb-"+a[4]+"-link a").trigger("click")}return}let i='.epkb-admin__secondary-panel__item[data-target="'+t[1]+'"]';let c=a.length>1&&a[1].length&&e(i).length?e(i):e(".epkb-admin__secondary-panel--active").find(".epkb-admin__secondary-panel__item")[0];setTimeout((function(){e(c).trigger("click")}),100)})();e(".epkb-admin__secondary-panel__item").on("click",(function(){let t="epkb-admin__secondary-panel__item--active";let a="epkb-setting-box__list--active";if(e(this).hasClass(t)){window.location.hash="#"+e(this).attr("data-target");return}let n=e(this).attr("data-target");let o=n.split("__")[0];e("#epkb-admin__secondary-panel__"+o).find(".epkb-admin__secondary-panel__item").removeClass(t);e(this).addClass(t);e("#epkb-admin__boxes-list__"+o).find(".epkb-setting-box__list").removeClass(a);e("#epkb-setting-box__list-"+n).addClass(a);window.location.hash="#"+n}));(function(){(function(){function a(a,n){t.find(a+" > .nav_tab").on("click",(function(){t.find(a+" > .nav_tab").removeClass("active");e(this).addClass("active");t.find(n+" > .ekb-admin-page-tab-panel").removeClass("active");var o=e(this).index()+1;t.find(n+" > .ekb-admin-page-tab-panel:nth-child( "+o+" ) ").addClass("active")}))}a(".add_on_container .epkb-main-nav > .epkb-admin-pages-nav-tabs","#add_on_panels");a(".epkb-main-nav > .epkb-admin-pages-nav-tabs","#main_panels");a("#help_tabs_nav","#help_tab_panel");a("#new_features_tabs_nav","#new_features_tab_panel")})()})();e(".epkb-header__tab").on("click",(function(t){let a=e(this).attr("id");e(".epkb-header__tab").removeClass("epkb-header__tab--active");e(".epkb-content__tab").removeClass("epkb-content__tab--active");e(this).addClass("epkb-header__tab--active");e("#"+a+"_content").addClass("epkb-content__tab--active")}));(function(){t.find("#epkb-delete-all-data__form").on("submit",(function(t){t.preventDefault();e("#epkb-editor-delete-warning").addClass("epkb-dialog-box-form--active")}));e("#epkb-editor-delete-warning .epkb-dbf__footer__accept").on("click",(function(){e("#epkb-editor-delete-warning").removeClass("epkb-dialog-box-form--active");let a=e("#epkb-delete-all-data__form");let n={action:"epkb_delete_all_kb_data",_wpnonce_epkb_ajax_action:epkb_vars.nonce,delete_text:a.find('input[name="epkb_delete_text"]').val()};A(n,(function(e){if(!e.error&&typeof e.message!="undefined"){I(e.message);t.find(".epkb-delete-all-data__message").show();a.hide()}}))}));t.find("#epkb_toggle_debug").on("click",(function(){e(".eckb-top-notice-message").html("");let t={action:"epkb_toggle_debug",_wpnonce_epkb_ajax_action:epkb_vars.nonce};A(t,(function(){location.reload()}))}));t.find("#epkb_show_logs").on("click",(function(){e(".eckb-top-notice-message").html("");let t={action:"epkb_show_logs",_wpnonce_epkb_ajax_action:epkb_vars.nonce};A(t,(function(){location.reload()}))}));t.find("#epkb_reset_logs").on("click",(function(){e(".eckb-top-notice-message").html("");let t={action:"epkb_reset_logs",_wpnonce_epkb_ajax_action:epkb_vars.nonce};A(t,(function(){location.reload()}))}));t.find("#epkb_enable_advanced_search_debug").on("click",(function(){e(".eckb-top-notice-message").html("");let t={action:"epkb_enable_advanced_search_debug",_wpnonce_epkb_ajax_action:epkb_vars.nonce};A(t,(function(){location.reload()}))}));t.find("#epkb_reset_sequence").on("click",(function(){e(".eckb-top-notice-message").html("");let t={action:"epkb_reset_sequence",epkb_kb_id:e("#epkb-list-of-kbs").val(),_wpnonce_epkb_ajax_action:epkb_vars.nonce};A(t,(function(t){e(".eckb-top-notice-message").remove();if(typeof t.message!=="undefined"){e("body").append(t.message)}}))}));t.find("#epkb_show_sequence").on("click",(function(){e(".eckb-top-notice-message").html("");e(".epkb-show-sequence-wrap").html("");let t={action:"epkb_show_sequence",epkb_kb_id:e("#epkb-list-of-kbs").val(),_wpnonce_epkb_ajax_action:epkb_vars.nonce};A(t,(function(t){e(".eckb-top-notice-message").remove();if(typeof t.message!=="undefined"){e("body").append(t.message)}if(typeof t.html!=="undefined"){e(".epkb-show-sequence-wrap").html(t.html)}}));return false}));(function(){t.find(".featured_img").on("click",(function(a){a.preventDefault();a.stopPropagation();t.find(".image_zoom").remove();var n;var o=e(this).find("img");if(o.length>1){n=e(o[0]).is(":visible")?e(o[0]).attr("src"):e(o[1]).is(":visible")?e(o[1]).attr("src"):e(o[2]).attr("src")}else{n=e(this).find("img").attr("src")}e(this).after(""+'<div id="epkb_image_zoom" class="image_zoom">'+'<img src="'+n+'" class="image_zoom">'+'<span class="close icon_close"></span>'+"</div>"+"");e("html, body").on("click.epkb",(function(){e("#epkb_image_zoom").remove();e("html, body").off("click.epkb")}))}));e(document).on("click",".epkb-help-dialog-img-inactive, .epkb-help-dialog-img",(function(t){t.preventDefault();t.stopPropagation();e(".image_zoom").remove();var a=e(this).attr("src");e(this).after(""+'<div id="epkb_image_zoom" class="image_zoom">'+'<img src="'+a+'" class="image_zoom epkb-help-dialog-img">'+'<span class="close icon_close"></span>'+"</div>"+"");e("html, body").on("click.epkb",(function(){e("#epkb_image_zoom").remove();e("html, body").off("click.epkb")}))}))})();e("#add_on_panels").on("click",".ep_font_icon_info",(function(){e(this).parent().find(".ep_font_icon_info_content").toggle()}));e("#search_query_param").on("keyup",(function(t){let a=e(this).val();if(!a.match(/^[a-zA-Z0-9-_]*$/)){e(this).val(a.replace(/[^a-zA-Z0-9-_]/g,""))}}));e("#epkb-search-query-parameter__form").on("submit",(function(t){let a=e(this);let n={action:"eckb_update_query_parameter",_wpnonce_epkb_ajax_action:epkb_vars.nonce,search_query_param:a.find('input[name="search_query_param"]').val(),epkb_kb_id:e("#epkb-list-of-kbs").val()};A(n,(function(t){e(".eckb-top-notice-message").remove();if(typeof t.message!=="undefined"){e("body").append(t.message)}}));return false}));e("#category_slug_param").on("keyup",(function(t){let a=e(this).val();if(!a.match(/^[a-zA-Z0-9-_]*$/)){e(this).val(a.replace(/[^a-zA-Z0-9-_]/g,""))}}));e("#epkb-category-slug-parameter__form").on("submit",(function(t){let a=e(this);let n={action:"eckb_update_category_slug_parameter",_wpnonce_epkb_ajax_action:epkb_vars.nonce,category_slug_param:a.find('input[name="category_slug_param"]').val(),epkb_kb_id:e("#epkb-list-of-kbs").val()};A(n,(function(t){e(".eckb-top-notice-message").remove();if(typeof t.message!=="undefined"){e("body").append(t.message)}}));return false}));e("#tag_slug_param").on("keyup",(function(t){let a=e(this).val();if(!a.match(/^[a-zA-Z0-9-_]*$/)){e(this).val(a.replace(/[^a-zA-Z0-9-_]/g,""))}}));e("#epkb-tag-slug-parameter__form").on("submit",(function(t){let a=e(this);let n={action:"eckb_update_tag_slug_parameter",_wpnonce_epkb_ajax_action:epkb_vars.nonce,tag_slug_param:a.find('input[name="tag_slug_param"]').val(),epkb_kb_id:e("#epkb-list-of-kbs").val()};A(n,(function(t){e(".eckb-top-notice-message").remove();if(typeof t.message!=="undefined"){e("body").append(t.message)}}));return false}))})();var o=e(".epkb-analytics-page-container");o.find(".page-icon").on("click",(function(){if(e(this).closest(".eckb-nav-section").hasClass("epkb-active-nav")){return}o.find(".eckb-config-content").removeClass("epkb-active-content");o.find(".eckb-nav-section").removeClass("epkb-active-nav");var t=e(this).attr("id");o.find("#"+t+"-content").addClass("epkb-active-content");o.find(this).parents(".eckb-nav-section").addClass("epkb-active-nav")}));let i=false;let c={faq_id:0,title:"",content:""};const s="epkb_faq_design_presets";let r=false;let p;let l="";e(document).on("click","#epkb-kb-faqs-page-container .admin_secondary_menu_item_link",(function(){setTimeout((function(){u()}),200)}));function _(){const t=[];e(".epkb-group-select:checked").each((function(){t.push(e(this).val())}));e("#epkb-faq-groups-select").val(t);e(document).on("change","#epkb-faq-groups-select",(function(){u()}))}function d(){try{const e=localStorage.getItem(s);return e?JSON.parse(e):null}catch(e){console.error("Error reading presets from cache:",e);return null}}function b(){localStorage.removeItem(s)}function f(e){try{localStorage.setItem(s,JSON.stringify(e))}catch(e){console.error("Error caching design preset:",e)}}function k(t,a=false){if(!t){return}Object.keys(t).forEach((n=>{const o=t[n];const i=e(`[name="${n}"]`);if(i.is(":radio, :checkbox")){const e=i.filter(`[value="${o}"]`);e.prop("checked",true);return}if(i.is("input.wp-color-picker")){i.wpColorPicker("color",o);return}if(i.length){i.val(o);if(a){i.off("change")}}}))}function u(t=false){if(!t){clearTimeout(p);p=setTimeout((function(){u(true)}),120);return}let a={group_ids:[],design:e(".epkb-design-radio-buttons input:checked").val()||"1",title_alignment:e('input[name="ml_faqs_title_location"]:checked').val()||"top",number_of_columns:e('input[name="faq_nof_columns"]:checked').val()||"2",icon_type:e('input[name="faq_icon_type"]:checked').val()||"icon_plus",icon_location:e('input[name="faq_icon_location"]:checked').val()||"left",border_mode:e('input[name="faq_border_mode"]:checked').val()||"on",compact_mode:e('input[name="faq_compact_mode"]:checked').val()||"on",open_mode:e('input[name="faq_open_mode"]:checked').val()||"on",question_background_color:e('input[name="faq_question_background_color"]').val()||"#FFFFFF",answer_background_color:e('input[name="faq_answer_background_color"]').val()||"#FFFFFF",question_text_color:e('input[name="faq_question_text_color"]').val()||"#000000",answer_text_color:e('input[name="faq_answer_text_color"]').val()||"#000000",icon_color:e('input[name="faq_icon_color"]').val()||"#000000",border_color:e('input[name="faq_border_color"]').val()||"#CCCCCC",title:e('input[name="ml_faqs_title_text"]').val()||""};e(".epkb-group-select:checked").each((function(){a.group_ids.push(e(this).val())}));const n=JSON.stringify(a);if(n===l){return}r=true;l=n;let o="[epkb-faqs";for(let e in a){if(e==="design"){continue}if(a[e]){if(Array.isArray(a[e])&&a[e].length>0){o+=" "+e+'="'+a[e].join(",")+'"'}else if(!Array.isArray(a[e])&&a[e]!==""){o+=" "+e+'="'+a[e]+'"'}}}o+="]";e(".epkb-shortcode-display .epkb-ctc__embed-content").text(o);if(e("#epkb-faq-shortcode-above-tabs .epkb-clipboard-value").length){e("#epkb-faq-shortcode-above-tabs .epkb-clipboard-value").val(o)}e("#epkb-faq-shortcode-preview-container").addClass("loading");const i=d();let c=false;if(!window.epkbFAQsFirstLoadDone){c=true;window.epkbFAQsFirstLoadDone=true}let s={action:"epkb_faq_get_shortcode",_wpnonce_epkb_ajax_action:epkb_vars.nonce,shortcode_params:a,is_cached:i?true:false,is_initial_load:c};A(s,(function(t){e(".epkb-faq-preview-content").html(t.data);if(!i&&t.all_design_presets){f(t.all_design_presets);k(t.all_design_presets[a.design],true)}if(typeof t.message!="undefined"&&t.message.length>0){I(t.message)}e("#epkb-faq-shortcode-preview-container").removeClass("loading");r=false}),undefined,false,false,e(".epkb-faq-preview-content"))}e(document).on("click","#epkb-admin__boxes-list__faq-shortcodes .epkb-design-option",(function(){const t=e(this).data("design-id");e('input[name="faq_shortcode_preset"][value="'+t+'"]').prop("checked",true);e(".epkb-design-option").removeClass("epkb-design-selected");e(this).addClass("epkb-design-selected");const a=d();if(a&&a[t]){k(a[t])}else{u()}}));function m(){function t(){const t=e(".epkb-group-select:checked").length;const a=e(".epkb-group-select").length;const n=t===1?epkb_vars.group_selected_singular.replace("%d",t):epkb_vars.group_selected_plural.replace("%d",t);e(".epkb-all-groups-count").text(n);e("#epkb-select-all-groups").prop("checked",t===a);if(t===0){e(".epkb-all-groups-count").addClass("epkb-warning-text")}else{e(".epkb-all-groups-count").removeClass("epkb-warning-text")}}t();e(document).on("change","#epkb-select-all-groups",(function(){const a=e(this).prop("checked");e(".epkb-group-select").prop("checked",a);e(".epkb-groups-table-row").toggleClass("selected",a);t();u()}));e(document).on("change",".epkb-group-select",(function(){const a=e(this).val();const n=e(this).prop("checked");e(this).closest(".epkb-groups-table-row").toggleClass("selected",n);t();let o=e("#epkb-faq-groups-select").val()||[];if(n&&!o.includes(a)){o.push(a)}else if(!n&&o.includes(a)){o=o.filter((function(e){return e!==a}))}e("#epkb-faq-groups-select").val(o);u()}));e(document).on("click",".epkb-groups-table-row",(function(t){if(e(t.target).is("input, a")){return}const a=e(this).find(".epkb-group-select");a.prop("checked",!a.prop("checked")).trigger("change")}))}e(document).on("change",'#epkb-admin__boxes-list__faq-shortcodes .epkb-design-radio-buttons input, #epkb-admin__boxes-list__faq-shortcodes input[name^="faq_"], #epkb-admin__boxes-list__faq-shortcodes input[name^="ml_faqs_"], #epkb-admin__boxes-list__faq-shortcodes .epkb-group-select',(function(){u()}));let g;function h(t,a){if(r){return}if(g){clearTimeout(g)}if(a&&a.color){e(t.target).closest(".wp-picker-container").find(".wp-color-result").css("background-color",a.color.toString())}g=setTimeout((function(){u()}),500)}e("#epkb-admin__boxes-list__faq-shortcodes .wp-color-picker").wpColorPicker();setTimeout((function(){e("#epkb-admin__boxes-list__faq-shortcodes input.wp-color-picker").iris("option","change",h)}),100);e(document).on("change","#epkb-admin__boxes-list__faq-shortcodes #epkb-select-all-groups",(function(){e(".epkb-group-select").prop("checked",e(this).prop("checked"));u()}));if(e("#epkb-faq-shortcode-above-tabs").length){q()}e(document).on("change","#epkb-admin__boxes-list__faq-shortcodes .epkb-group-select, #epkb-admin__boxes-list__faq-shortcodes #epkb-select-all-groups",(function(){q()}));const v=e("#epkb-kb-faqs-page-container #epkb-copy-shortcode span:last").text();e(document).on("click","#epkb-kb-faqs-page-container #epkb-copy-shortcode",(function(t){const a=e("#epkb-kb-faqs-page-container .epkb-shortcode-display .epkb-ctc__embed-content").eq(0).text();H(a);const n=e(this);n.find("span:last-child").text(epkb_vars.copied_text);setTimeout((function(){n.find("span:last").text(v)}),2e3)}));e(document).on("change","#epkb-admin__boxes-list__faq-shortcodes #epkb-select-all-groups",(function(){const t=e(this).prop("checked");e(".epkb-group-select:visible").prop("checked",t);q()}));function q(){const t=[];e(".epkb-group-select:checked").each((function(){t.push(e(this).val())}));let a="[epkb-faqs";if(t.length>0){a+=' group_ids="'+t.join(",")+'"'}a+="]";e("#epkb-faq-shortcode-above-tabs .epkb-clipboard-value").val(a)}if(e("#epkb-faq-shortcode-container").length>0){const B=e('input[name="faq_shortcode_preset"]:checked').val();b();const K=d();if(K&&K[B]){k(K[B])}_();m();u();e(document).on("click","#epkb-kb-faqs-page-container .epkb-admin__top-panel__item",(function(){if(e(this).hasClass("epkb-admin__top-panel__item--faq-shortcodes")){e("#epkb-kb-faqs-page-container .epkb-faq-shortcode-preview-wrap").show()}else{e("#epkb-kb-faqs-page-container .epkb-faq-shortcode-preview-wrap").hide()}}));setTimeout((function(){e("#epkb-kb-faqs-page-container .epkb-admin__top-panel__item--active").trigger("click")}),200)}e(document).on("click","#epkb-faq-create-group",(function(){let t=e("#epkb-faq-group-form");let a=t.data("default-faq-group-id");let n=t.data("default-faq-group-name");t.data("faq-group-id",a);t.find(".epkb-faq-group-form-head__title").html(n);t.find('[name="faq-group-name"]').val(n);t.find(".epkb-faq-questions-list").html("");t.addClass("epkb-faq-group-form--active");e("#epkb-available-questions-container").addClass("epkb-available-questions-container--active");e("#epkb-faq-groups-list").addClass("epkb-faq-groups-list--hide")}));e(document).on("click","#epkb-faq-group-form .epkb-delete-icon",(function(){let t=e("#epkb-faq-group-form");let a={action:"epkb_delete_faq_group",_wpnonce_epkb_ajax_action:epkb_vars.nonce};let n=t.data("faq-group-id");a.faq_group_id=n;A(a,(function(a){if(!a.error&&typeof a.message!="undefined"){I(a.message);e("#epkb-admin__boxes-list__faqs-groups .epkb-faq-group-container--"+n).remove();e("#epkb-admin__boxes-list__faq-shortcodes .epkb-faq-group--"+n).remove();z();D()}t.removeClass("epkb-faq-group-form--active");e("#epkb-available-questions-container").removeClass("epkb-available-questions-container--active");e("#epkb-faq-groups-list").removeClass("epkb-faq-groups-list--hide")}))}));e(document).on("click","#epkb-kb-faqs-page-container .epkb-faq-group-container .epkb-faq-group-head__edit",(function(){let t=e("#epkb-faq-group-form");let a=e("#epkb-available-questions-container");let n=e(this).closest(".epkb-faq-group-container");let o=n.data("faq-group-id");let i=n.find(".epkb-faq-group-head__title").html();t.data("faq-group-id",o);t.find(".epkb-faq-group-form-head__title").html(i);t.find('[name="faq-group-name"]').val(i);t.find(".epkb-faq-questions-list").html("");n.find(".epkb-faq-question").each((function(){let n=e(this).data("faq-id");let o=a.find(".epkb-faq-question--"+n).clone();a.find(".epkb-faq-question--"+n).addClass("epkb-faq-question--hide");o.find(".epkb-faq-question__action-include").remove();t.find(".epkb-faq-questions-list").append(o)}));T();t.addClass("epkb-faq-group-form--active");a.addClass("epkb-available-questions-container--active");e("#epkb-faq-groups-list").addClass("epkb-faq-groups-list--hide")}));e(document).on("click","#epkb-faq-group-form .epkb-faq-group-form-head__close",(function(){e("#epkb-faq-group-form").removeClass("epkb-faq-group-form--active");e("#epkb-available-questions-container").removeClass("epkb-available-questions-container--active");e("#epkb-available-questions-container .epkb-faq-question").removeClass("epkb-faq-question--hide");e("#epkb-faq-groups-list").removeClass("epkb-faq-groups-list--hide")}));e(document).on("click","#epkb-faq-group-form .epkb-faq-group-form-head__save",(function(){let t=e("#epkb-faq-group-form");let a={action:"epkb_save_faq_group",_wpnonce_epkb_ajax_action:epkb_vars.nonce};a.faq_group_id=t.data("faq-group-id");a.faq_group_name=t.find('[name="faq-group-name"]').val();a.faqs_order_sequence=[];t.find(".epkb-faq-question").each((function(){a.faqs_order_sequence.push(e(this).data("faq-id"))}));A(a,(function(a){if(!a.error&&typeof a.message!="undefined"){I(a.message)}if(!a.faq_group_id){return}if(e("#epkb-admin__boxes-list__faqs-groups .epkb-faq-group-container--"+a.faq_group_id).length){e("#epkb-admin__boxes-list__faqs-groups .epkb-faq-group-container--"+a.faq_group_id).replaceWith(a.faq_group_html)}else{e("#epkb-admin__boxes-list__faqs-groups .epkb-body-col--right").append(a.faq_group_html)}if(e("#epkb-admin__boxes-list__faq-shortcodes .epkb-faq-group--"+a.faq_group_id).length){e("#epkb-admin__boxes-list__faq-shortcodes .epkb-faq-group--"+a.faq_group_id).replaceWith(a.shortcode_group_html)}else{e("#epkb-admin__boxes-list__faq-shortcodes .epkb-body-col--right").append(a.shortcode_group_html)}t.data("faq-group-id",a.faq_group_id);t.find('[name="faq-group-name"]').val(a.faq_group_name);t.find(".epkb-faq-group-form-head__title").html(a.faq_group_name);z();D()}))}));e(document).on("click","#epkb-available-questions-container .epkb-faq-question",(function(){let t=e(this).clone();t.find(".epkb-faq-question__action-include").remove();e("#epkb-faq-group-form .epkb-faq-questions-list").prepend(t);e(this).addClass("epkb-faq-question--hide");T()}));e("#epkb-faq-group-form .epkb-faq-questions-list").sortable({axis:"y",forceHelperSize:true,forcePlaceholderSize:true,handle:".epkb-faq-question__action-order",opacity:.8,placeholder:"epkb-sortable-placeholder"});e(document).on("click","#epkb-faq-question-wp-editor-popup .epkb__help_editor__action__remove-from-group",(function(t){t.preventDefault();t.stopPropagation();let a=e("#epkb-faq-question-wp-editor-popup");let n=a.find('[name="faq-id"]').val();e("#epkb-faq-group-form .epkb-faq-questions-list .epkb-faq-question--"+n).remove();e("#epkb-available-questions-container .epkb-faq-question--"+n).removeClass("epkb-faq-question--hide");T();a.removeClass("epkb-faq-question-wp-editor-popup--active");return false}));e(document).on("input",'#epkb-faq-group-form [name="faq-group-name"]',(function(){e("#epkb-faq-group-form .epkb-faq-group-form-head__title").html(e(this).val())}));e(document).on("click","#epkb-faq-create-question",(function(){x()}));e(document).on("click","#epkb-faq-group-form .epkb-faq-question__action-edit",(function(){e(".epkb-faq-question-wp-editor__action__delete").removeClass("epkb-faq-question-wp-editor__action__delete--active");e(".epkb__help_editor__action__remove-from-group").addClass("epkb__help_editor__action__remove-from-group--active");x(e(this).closest(".epkb-faq-question").data("faq-id"))}));e(document).on("click","#epkb-all-faqs-container .epkb-faq-question__action-edit",(function(){e(".epkb-faq-question-wp-editor__action__delete").addClass("epkb-faq-question-wp-editor__action__delete--active");e(".epkb__help_editor__action__remove-from-group").removeClass("epkb__help_editor__action__remove-from-group--active");x(e(this).closest(".epkb-faq-question").data("faq-id"))}));e(document).on("click","#epkb-faq-question-wp-editor-popup .epkb__help_editor__action__cancel, .epkb-faq-question-wp-editor__overlay",(function(t){t.preventDefault();clearInterval(i);e("#epkb-faq-question-wp-editor-popup").removeClass("epkb-faq-question-wp-editor-popup--active");return false}));e(document).on("submit","#epkb-faq-question-wp--form",(function(t){t.preventDefault();y();w();let a={action:"epkb_save_faq",_wpnonce_epkb_ajax_action:epkb_vars.nonce};a.faq_id=c.faq_id;a.faq_title=c.title;a.faq_content=c.content;A(a,(function(t){if(!t.error&&typeof t.message!="undefined"){I(t.message);if(e("#epkb-kb-faqs-page-container .epkb-faq-question--"+t.data.faq_id).length){e("#epkb-kb-faqs-page-container .epkb-faq-question--"+t.data.faq_id+" .epkb-faq-question__title").text(t.data.title)}else{e("#epkb-available-questions-container .epkb-available-questions-body").append(t.data.faq_html);e("#epkb-all-faqs-container .epkb-body-col--left").append(t.data.faq_html);e("#epkb-all-faqs-container .epkb-faq-question--"+t.data.faq_id).find(".epkb-faq-question__action-include, .epkb-faq-question__action-order").remove()}j();T();e("#epkb-faq-question-wp-editor-popup").removeClass("epkb-faq-question-wp-editor-popup--active")}}));return false}));e(document).on("click","#epkb-kb-faqs-page-container #epkb_delete_faq",(function(t){t.preventDefault();t.stopPropagation();let a=e("#epkb-faq-question-wp-editor-popup");let n=a.find('[name="faq-id"]').val();let o={action:"epkb_delete_faq",_wpnonce_epkb_ajax_action:epkb_vars.nonce,faq_id:n};A(o,(function(t){if(!t.error&&typeof t.message!="undefined"){I(t.message);e("#epkb-kb-faqs-page-container .epkb-faq-question--"+n).remove();j();T();a.removeClass("epkb-faq-question-wp-editor-popup--active")}}));return false}));function y(){let t=e("#epkb-faq-wp-editor__faq-title");if(t.length){let a=t.val().length;if(a>200){e(".epkb-faq-question-wp-editor__question .epkb-characters_left-counter").text(200);t.val(t.val().substring(0,200))}else{e(".epkb-faq-question-wp-editor__question .epkb-characters_left-counter").text(a)}}}function w(){tinyMCE.triggerSave();c.faq_id=e("#epkb-faq-editor-id").val();c.title=e("#epkb-faq-wp-editor__faq-title").val();c.content=e("#epkb-faq-question-wp-editor").val()}function x(t){i=setInterval(y,1e3);c={faq_id:0,title:"",content:""};e("#epkb-faq-wp-editor__faq-title").val("");e("#epkb-faq-question-wp-editor").val("");if(typeof t=="undefined"||!t){e("#epkb-faq-question-wp-editor-popup").addClass("epkb-faq-question-wp-editor-popup--active");C();return}let a={action:"epkb_get_faq",_wpnonce_epkb_ajax_action:epkb_vars.nonce,faq_id:t};A(a,(function(t){if(!t.error&&typeof t.data!="undefined"){e("#epkb-faq-question-wp-editor-popup").addClass("epkb-faq-question-wp-editor-popup--active");c={faq_id:t.data.faq_id,title:t.data.title,content:t.data.content};C()}}))}function C(){if(!e("#epkb-faq-question-wp-editor-popup").hasClass("epkb-faq-question-wp-editor-popup--active")){return}let t=tinymce.get("epkb-faq-question-wp-editor");e("#epkb-faq-editor-id").val(c.faq_id);e("#epkb-faq-wp-editor__faq-title").val(c.title);if(t&&e(".wp-editor-wrap").hasClass("tmce-active")){t.setContent(c.content)}else{e("#epkb-faq-question-wp-editor").val(c.content)}e(".epkb-characters_left-counter").text(c.content.length+"")}function T(){if(e("#epkb-available-questions-container .epkb-faq-question:not(.epkb-faq-question--hide)").length){e("#epkb-available-questions-container .epkb-faq-questions-list-empty").removeClass("epkb-faq-questions-list-empty--active")}else{e("#epkb-available-questions-container .epkb-faq-questions-list-empty").addClass("epkb-faq-questions-list-empty--active")}if(e("#epkb-faq-group-form .epkb-faq-question").length){e("#epkb-faq-group-form .epkb-faq-questions-list-empty").removeClass("epkb-faq-questions-list-empty--active")}else{e("#epkb-faq-group-form .epkb-faq-questions-list-empty").addClass("epkb-faq-questions-list-empty--active")}if(e("#epkb-all-faqs-container .epkb-faq-question").length){e("#epkb-all-faqs-container .epkb-faq-questions-list-empty").removeClass("epkb-faq-questions-list-empty--active")}else{e("#epkb-all-faqs-container .epkb-faq-questions-list-empty").addClass("epkb-faq-questions-list-empty--active")}}function j(){if(e("#epkb-available-questions-container .epkb-faq-question").length>1){e("#epkb-available-questions-container .epkb-faq-question").sort((function(t,a){return e(t).find(".epkb-faq-question__title").text()>e(a).find(".epkb-faq-question__title").text()?1:-1})).appendTo("#epkb-available-questions-container .epkb-available-questions-body")}if(e("#epkb-all-faqs-container .epkb-faq-question").length>0){e("#epkb-all-faqs-container .epkb-faq-question").sort((function(t,a){return e(t).find(".epkb-faq-question__title").text()>e(a).find(".epkb-faq-question__title").text()?1:-1})).appendTo("#epkb-all-faqs-container .epkb-body-col--right");while(e("#epkb-all-faqs-container .epkb-body-col--left .epkb-faq-question").length<e("#epkb-all-faqs-container .epkb-body-col--right .epkb-faq-question").length){e(e("#epkb-all-faqs-container .epkb-body-col--right .epkb-faq-question")[0]).appendTo(e("#epkb-all-faqs-container .epkb-body-col--left"))}}}function z(){if(e("#epkb-admin__boxes-list__faqs-groups .epkb-faq-group-container").length>0){e("#epkb-admin__boxes-list__faqs-groups .epkb-faq-group-container").sort((function(t,a){return e(t).find(".epkb-faq-group-head__title").text()>e(a).find(".epkb-faq-group-head__title").text()?1:-1})).appendTo("#epkb-admin__boxes-list__faqs-groups .epkb-body-col--right");while(e("#epkb-admin__boxes-list__faqs-groups .epkb-body-col--left .epkb-faq-group-container").length<e("#epkb-admin__boxes-list__faqs-groups  .epkb-body-col--right .epkb-faq-group-container").length){e(e("#epkb-admin__boxes-list__faqs-groups .epkb-body-col--right .epkb-faq-group-container")[0]).appendTo(e("#epkb-admin__boxes-list__faqs-groups  .epkb-body-col--left"))}}if(e("#epkb-admin__boxes-list__faq-shortcodes .epkb-faq-group").length>0){e("#epkb-admin__boxes-list__faq-shortcodes .epkb-faq-group").sort((function(t,a){return e(t).find(".epkb-faq-group__title").text()>e(a).find(".epkb-faq-group__title").text()?1:-1})).appendTo("#epkb-admin__boxes-list__faq-shortcodes .epkb-body-col--right");while(e("#epkb-admin__boxes-list__faq-shortcodes .epkb-body-col--left .epkb-faq-group").length<e("#epkb-admin__boxes-list__faq-shortcodes .epkb-body-col--right .epkb-faq-group").length){e(e("#epkb-admin__boxes-list__faq-shortcodes .epkb-body-col--right .epkb-faq-group")[0]).appendTo(e("#epkb-admin__boxes-list__faq-shortcodes .epkb-body-col--left"))}}}function D(){let t=[];e("#epkb-admin__boxes-list__faqs-groups .epkb-faq-group-container").each((function(){t.push(e(this).data("faq-group-id"))}));let a=e("#epkb-faq-shortcode-container .epkb-ctc__embed-code").text().replaceAll(/group_ids="(.*?)"/g,'group_ids="'+t.join(",")+'"');e("#epkb-faq-shortcode-container .epkb-ctc__embed-code").text(a)}e(document).on("change","#faq_shortcode_preset input",(function(t){let a=e(this).val();let n=e("#epkb-faq-shortcode-container .epkb-ctc__embed-code").text();let o=e(this).closest(".epkb-input-group");let i=null;let c=e("#epkb-design-settings-"+a);if(c.length){i=c.data("design-settings")}if(i){const e=d()||{};if(!e[a]){e[a]=i;f(e)}k(i)}if(parseInt(a)===parseInt(o.data("default-value"))){e("#epkb-faq-shortcode-container .epkb-ctc__embed-code").text(n.replaceAll(/\sdesign="(.*?)"/g,""));return}if(n.indexOf('design="')>=0){e("#epkb-faq-shortcode-container .epkb-ctc__embed-code").text(n.replaceAll(/design="(.*?)"/g,'design="'+a+'"'))}else{e("#epkb-faq-shortcode-container .epkb-ctc__embed-code").text(n.replaceAll("]"," "+'design="'+a+'"]'))}u()}));if(e(".epkb-categories-icons").length){e(".epkb-categories-icons__button").on("click",(function(){if(e(this).hasClass("epkb-categories-icons__button--active")){return}e(".epkb-categories-icons__button").removeClass("epkb-categories-icons__button--active");e(this).addClass("epkb-categories-icons__button--active");e(".epkb-categories-icons__tab-body").slideUp("fast");var t=e(this).data("type");if(e(".epkb-categories-icons__tab-body--"+t).length){e(".epkb-categories-icons__tab-body--"+t).slideDown("fast")}e("#epkb_head_category_icon_type").val(t)}));e(".epkb-icon-pack__icon").on("click",(function(){e(".epkb-icon-pack__icon").removeClass("epkb-icon-pack__icon--checked");e(this).addClass("epkb-icon-pack__icon--checked");e("#epkb_head_category_icon_name").val(e(this).data("key"))}));e(".epkb-category-image__button").on("click",(function(t){t.preventDefault();var a=e(this),n=wp.media({title:a.data("title"),library:{type:"image"},multiple:false}).on("select",(function(){var t=n.state().get("selection").first().toJSON();e("#epkb_head_category_icon_image").val(t.id);e(".epkb-category-image__button").removeClass("epkb-category-image__button--no-image");e(".epkb-category-image__button").addClass("epkb-category-image__button--have-image");e(".epkb-category-image__button").css({"background-image":"url("+t.url+")"})})).open()}));e("#parent").on("change",(function(){var t;var a;var n=e(this);var o=e("#epkb_head_category_template").val();var i=false;n.find("option").each((function(){if(e(this).val()==n.val()){a=e(this)}}));if(a.val()=="-1"){t=1}else if(a.hasClass("level-0")){t=2}else{t=3}if(o=="Tabs"){if(t!==2){i=true}}else if(o=="Sidebar"){i=true}else{if(t>1){i=true}}if(i){e(".epkb-categories-icons").hide();e(".epkb-categories-icons+.epkb-term-options-message").show()}else{e(".epkb-categories-icons").show();e(".epkb-categories-icons+.epkb-term-options-message").hide()}}));function S(){e("#epkb_font_icon").trigger("click");e("#epkb_head_category_thumbnail_size").val(e("#epkb_head_category_thumbnail_size").find("option").eq(0).val());e(".epkb-category-image__button").addClass("epkb-category-image__button--no-image");e(".epkb-category-image__button").removeClass("epkb-category-image__button--have-image");e(".epkb-category-image__button").css({"background-image":""});e("#epkb_head_category_icon_image").val(0)}e(document).ajaxComplete((function(t,a,n){if(!n){return}let o=n.data.split("&");let i;for(i=0;i<o.length;i++){sParameterName=o[i].split("=");if(sParameterName[0]==="action"&&sParameterName[1]==="add-tag"){S();e("[name=epkb_category_is_draft]").prop("checked",false);e("html, body").animate({scrollTop:e(".wp-heading-inline").offset().top},300)}}}))}if(e("#epkb-admin__categories_sorting_link").length){e("#epkb-admin__categories_sorting_link").insertAfter(".bulkactions");e("#epkb-admin__categories_sorting_link").css("display","block")}function A(t,a,n,o,i,c){let s;let r;a=typeof a==="undefined"?"epkb_callback_noop":a;e.ajax({type:"POST",dataType:"json",data:t,url:ajaxurl,beforeSend:function(e){if(typeof c=="undefined"||c===false){O("show","")}if(typeof c=="object"){O("show","",c)}}}).done((function(e){r=e?e:"";if(r.error||typeof r.message==="undefined"){s=r.message?r.message:P("",epkb_vars.reload_try_again,"error")}})).fail((function(e,t,a){s=a?" ["+a+"]":epkb_vars.unknown_error;s=P(epkb_vars.error_occurred+". "+epkb_vars.msg_try_again,s,"error")})).always((function(){r=typeof r==="undefined"?"":r;if(typeof i=="function"){i(r)}if(!o){O("remove","")}if(s){e(".eckb-bottom-notice-message").remove();e("body").append(s).removeClass("fadeOutDown");setTimeout((function(){e(".eckb-bottom-notice-message").addClass("fadeOutDown")}),1e4);return}if(typeof a==="function"){if(typeof n==="undefined"){a(r)}else{a(r,n)}}else{if(o){location.reload()}}}))}function O(t,a){if(t==="show"){let t='<div class="epkb-admin-dialog-box-loading">'+'<div class="epkb-admin-dbl__header">'+'<div class="epkb-admin-dbl-icon epkbfa epkbfa-hourglass-half"></div>'+(a?'<div class="epkb-admin-text">'+a+"</div>":"")+"</div>"+"</div>"+'<div class="epkb-admin-dialog-box-overlay"></div>';e("body").append(t)}else if(t==="remove"){e(".epkb-admin-dialog-box-loading").remove();e(".epkb-admin-dialog-box-overlay").remove()}}e(document.body).on("click",".epkb-close-notice",(function(){let t=e(this).closest(".eckb-bottom-notice-message");t.addClass("fadeOutDown");setTimeout((function(){t.html("")}),1e4)}));e(document.body).on("click",".eckb-bottom-notice-message__header__close",(function(){let t=e(this).closest(".eckb-bottom-notice-message-large");t.addClass("fadeOutDown");setTimeout((function(){t.html("")}),1e4)}));e("#epkb-ajax-in-progress").dialog({resizable:false,height:70,width:200,modal:false,autoOpen:false}).hide();function P(e,t,a){return'<div class="eckb-bottom-notice-message">'+'<div class="contents">'+'<span class="'+a+'">'+(e?"<h4>"+e+"</h4>":"")+(t?"<p>"+t+"</p>":"")+"</span>"+"</div>"+'<div class="epkb-close-notice epkbfa epkbfa-window-close"></div>'+"</div>"}let F;function E(t,a=""){e(".eckb-bottom-notice-message").remove();e("body").append(P(a,t,"error"))}function I(t,a=""){e(".eckb-bottom-notice-message").remove();e("body").append(P(a,t,"success"))}e("body").on("click",".eckb-wizard-accordion .eckb-wizard-option-heading",(function(){var t=e(this).closest(".eckb-wizard-accordion");var a=e(this).closest(".eckb-wizard-accordion__body-content");var n=a.hasClass("eckb-wizard-accordion__body-content--active");t.find(".eckb-wizard-accordion__body-content").removeClass("eckb-wizard-accordion__body-content--active");if(!n){a.addClass("eckb-wizard-accordion__body-content--active")}}));e("body").on("click","#eckb-wizard-main-page-preview a, .epkb-wizard-theme-panel-container a, #eckb-wizard-article-page-preview a",false);e(".epkb-notice-remind").on("click",(function(t){t.preventDefault();e(this).parent().parent().remove()}));e(document).on("click",".epkb-notice-dismiss",(function(t){t.preventDefault();e("#"+e(this).data("notice-id")).slideUp();var a={action:"epkb_dismiss_ongoing_notice",epkb_dismiss_id:e(this).data("notice-id")};e.ajax({type:"POST",dataType:"json",url:ajaxurl,data:a})}));e(document).on("click",".epkb-kb__need-help__after-setup-wizard-dialog .epkb-notice-dismiss",(function(){e(e(this).data("target")).slideUp()}));e(".epkb-dialog-box-form .epkb-dbf__close, .epkb-dialog-box-form .epkb-dbf__footer__cancel").on("click",(function(){e(this).closest(".epkb-dialog-box-form").toggleClass("epkb-dialog-box-form--active")}));e(".epkb-dialog-box-form .epkb-dbf__footer__accept__btn").on("click",(function(){e(this).closest(".epkb-dialog-box-form").find("form").trigger("submit")}));e("body").find(".epkb__header__edit").on("click",(function(){e(this).parent().parent().find(".epkb-ts__input-container").slideToggle();e(this).parent().parent().find(".epkb-ts__action-container").slideToggle();e(this).parents(".epkb-toggle-setting-container").toggleClass("epkb-toggle-setting-container--active")}));e("body").on("click",".eckb-Q__list__item-container",(function(){e(this).find(".eckb-Q__item__question__toggle-icon").toggleClass("epkbfa-plus-square epkbfa-minus-square");if(e(this).hasClass("eckb-Q__list__item--active")){e(this).removeClass("eckb-Q__list__item--active")}else{e(this).addClass("eckb-Q__list__item--active")}}));e(".epkb-notification-box-popup__button-confirm").on("click",(function(){if(e(this).attr("data-target").length>0){e(this).closest(e(this).attr("data-target")).remove()}}));e(".epkb-admin__step-cta-box__link[data-target]").on("click",(function(){let t=e(this).attr("data-target");if(typeof t==="undefined"||t.length===0){return}t=t.split("__");e('.epkb-admin__top-panel__item[data-target="'+t[0]+'"]').trigger("click");if(t.length>1){setTimeout((function(){e('.epkb-admin__secondary-panel__item[data-target="'+t[1]+'"]').trigger("click")}),100)}}));e(document).on("click","#eckb-kb-create-demo-data",(function(t){t.preventDefault();let a={action:"epkb_create_kb_demo_data",epkb_kb_id:e(this).data("id"),_wpnonce_epkb_ajax_action:epkb_vars.nonce};A(a,(function(t){if(typeof t.message!="undefined"){e(".eckb-bottom-notice-message").remove();e("body").append(t.message).removeClass("fadeOutDown");e("#eckb-wizard-ordering__page input").first().trigger("change");return}}))}));e(document).on("click",".epkb-admin__form .epkb-admin__form-tab",(function(){N(e(this))}));function N(t){let a=e(t).data("target"),n=e(t).closest(".epkb-admin__form"),o=n.find(".epkb-admin__form-sub-tabs--"+a+" .epkb-admin__form-sub-tab").first();n.find(".epkb-admin__form-tab").removeClass("epkb-admin__form-tab--active");n.find(".epkb-admin__form-tab-wrap").removeClass("epkb-admin__form-tab-wrap--active");e(t).addClass("epkb-admin__form-tab--active");n.find(".epkb-admin__form-tab-wrap--"+a).addClass("epkb-admin__form-tab-wrap--active");if(o.length){Q(o)}else{n.find(".epkb-admin__form-sub-tab").removeClass("epkb-admin__form-sub-tab--active");n.find(".epkb-admin__form-sub-tab-wrap").removeClass("epkb-admin__form-sub-tab-wrap--active")}window.location.hash="#settings__"+a}e(document).on("click",".epkb-admin__form .epkb-admin__form-sub-tab",(function(){Q(e(this))}));function Q(t){let a=t.closest(".epkb-admin__form"),n=e(t).closest(".epkb-admin__form-sub-tabs").data("tab-key"),o=t.length?t.data("target"):"";a.find(".epkb-admin__form-tab").removeClass("epkb-admin__form-tab--active");a.find(".epkb-admin__form-tab-wrap").removeClass("epkb-admin__form-tab-wrap--active");e('.epkb-admin__form-tab[data-target="'+n+'"]').addClass("epkb-admin__form-tab--active");a.find(".epkb-admin__form-tab-wrap--"+n).addClass("epkb-admin__form-tab-wrap--active");let i=t.data("target"),c=a.find(".epkb-admin__form-sub-tab-wrap--"+i);a.find(".epkb-admin__form-sub-tab").removeClass("epkb-admin__form-sub-tab--active");a.find(".epkb-admin__form-sub-tab-wrap").removeClass("epkb-admin__form-sub-tab-wrap--active");t.addClass("epkb-admin__form-sub-tab--active");c.addClass("epkb-admin__form-sub-tab-wrap--active");window.location.hash="#settings__"+n+(o.length?"__"+o:"")}e(document).on("click",".epkb-admin__form .epkb-admin__form-tab-content--about-kb .epkb-admin__form-tab-content-desc__link"+", .epkb-admin__form .epkb-admin__form-tab-content--main-page-about-kb .epkb-admin__form-tab-content-desc__link",(function(t){t.preventDefault();e('.epkb-admin__form .epkb-admin__form-tab[data-target="editor"]').click();return false}));e(document).on("click",".epkb-admin__form .epkb-admin__form-tab-content--manage-theme-compat .epkb-admin__form-tab-content-desc__link"+", .epkb-admin__form .epkb-admin__form-tab-content--layout .epkb-admin__form-tab-content__to-settings-link",(function(t){t.preventDefault();e('.epkb-admin__form .epkb-admin__form-sub-tab[data-selected-module="categories_articles"]').click();e([document.documentElement,document.body]).animate({scrollTop:e('[data-target="theme-compatibility-mode"]').offset().top-50},300);return false}));e(document).on("click",".epkb-admin__form .epkb-admin__form-tab-content--sidebar_main_page_intro_text .epkb-admin__form-tab-content-desc__link",(function(t){t.preventDefault();e('.epkb-admin__form .epkb-admin__form-tab[data-target="labels"]').click();e([document.documentElement,document.body]).animate({scrollTop:e('[data-target="sidebar_main_page_intro_text"]').offset().top},300);return false}));e(document).on("click",".epkb-admin__form .epkb-admin__form-sub-tab-wrap--article-page-search-box .epkb-admin__form-tab-content-desc__link",(function(t){t.preventDefault();let a=e('.epkb-admin__form .epkb-admin__form-sub-tab[data-selected-module="search"]');if(a.length){a.click()}else{e('.epkb-admin__form .epkb-admin__form-tab[data-target="main-page"]').click()}e([document.documentElement,document.body]).animate({scrollTop:0},300);return false}));e(document).on("click","#ml_faqs_title_location_group .epkb-admin__form-tab-content-desc__link",(function(t){t.preventDefault();e('.epkb-admin__form .epkb-admin__form-tab[data-target="labels"]').click();e([document.documentElement,document.body]).animate({scrollTop:e('[data-target="labels_faqs_feature"]').offset().top},300);return false}));e(document).on("click","#ml_articles_list_title_location_group .epkb-admin__form-tab-content-desc__link",(function(t){t.preventDefault();e('.epkb-admin__form .epkb-admin__form-tab[data-target="labels"]').click();e([document.documentElement,document.body]).animate({scrollTop:e('[data-target="labels_articles_list_feature"]').offset().top},300);return false}));e(document).on("click",".epkb-admin__form-tab-content--bottom-labels-link .epkb-admin__form-tab-content-desc__link",(function(t){t.preventDefault();e('.epkb-admin__form .epkb-admin__form-tab[data-target="labels"]').click();e([document.documentElement,document.body]).animate({scrollTop:0},300);return false}));e(document).on("click",".epkb-admin__form .epkb-admin__form-tab-content--categories_articles-box .epkb-admin__form-tab-content-desc__link--list-of-articles",(function(t){t.preventDefault();e('.epkb-admin__form .epkb-admin__form-sub-tab[data-target="article-page-sidebar"]').click();e([document.documentElement,document.body]).animate({scrollTop:e('[data-target="article_sidebar_categories_and_articles_navigation"]').offset().top},300);return false}));e(document).on("click",".epkb-notification-box-top__body__desc a",(function(t){let a=e(this).attr("href").split("#");if(a.length>1){let n=e(".epkb-admin__top-panel__item--"+a[1]);if(n.length){t.preventDefault();n.trigger("click");return false}}}));function J(t,a){let n=e(".epkb-admin__kb__form-save__button").closest(".epkb-admin__form");if(!n.length){return}let o={};if(typeof tinyMCE!="undefined"){tinyMCE.triggerSave()}n.find("input, select, textarea").each((function(){if(!e(this).attr("name")||!e(this).attr("name").length||e(this).closest(".epkb-input-group").find(".epkb__option-pro-tag").length||e(this).closest(".epkb-input-group").find(".epkb__option-pro-tag-container").length){return true}if(e(this).attr("type")==="checkbox"){if(e(this).closest(".epkb-admin__checkboxes-multiselect").length){if(e(this).prop("checked")){if(!o[e(this).attr("name")]){o[e(this).attr("name")]=[]}o[e(this).attr("name")].push(e(this).val())}}else{o[e(this).attr("name")]=e(this).prop("checked")?"on":"off"}return true}if(e(this).attr("type")==="radio"){if(e(this).prop("checked")){o[e(this).attr("name")]=e(this).val()}return true}if(typeof e(this).attr("name")=="undefined"){return true}o[e(this).attr("name")]=e(this).val()}));if(e('[name="faq_group_ids"]').length&&typeof o.faq_group_ids=="undefined"){o.faq_group_ids=0}o.epkb_kb_id=e("#epkb-list-of-kbs").val();if(!e("#modular_main_page_toggle").length&&!e('.epkb-admin__form-tab-content--module-selection [data-value="search"].epkb-input-custom-dropdown__option--selected').length&&e('[name="article_search_sync_toggle"]:checked').length){a=true}A({action:"epkb_apply_settings_changes",_wpnonce_epkb_ajax_action:epkb_vars.nonce,epkb_kb_id:o.epkb_kb_id,kb_config:JSON.stringify(o)},(function(t){e(".eckb-top-notice-message").remove();if(typeof o.kb_name!="undefined"){e('#epkb-list-of-kbs option[value="'+o.epkb_kb_id+'"]').html(o.kb_name)}if(a){location.reload()}else{if(typeof t.message!=="undefined"){e("body").append(t.message)}}}),undefined,a);return false}e(document).on("click",".epkb-admin__kb__form-save__button",J);e('.epkb-input[name="article_nav_sidebar_type_left"]').change((function(){if(e(this).closest(".epkb-admin__select-field").css("display")==="none"){return}if(e(this).val()!=="eckb-nav-sidebar-none"){e('[name="article_nav_sidebar_type_right"][value="eckb-nav-sidebar-none"]').parent().find(".epkb-label").click();e(this).click()}}));e('.epkb-input[name="article_nav_sidebar_type_right"]').change((function(){if(e(this).closest(".epkb-admin__select-field").css("display")==="none"){return}if(e(this).val()!=="eckb-nav-sidebar-none"){e('[name="article_nav_sidebar_type_left"][value="eckb-nav-sidebar-none"]').parent().find(".epkb-label").click();e(this).click()}}));e(document).on("change","#nav_sidebar_right",(function(){const t=e(this).val();if(t==="0"||t===0){e('[name="article_nav_sidebar_type_right"][value="eckb-nav-sidebar-none"]').parent().find(".epkb-label").click();return}const a=e('[name="article_nav_sidebar_type_left"]:checked').val();if(a!=="eckb-nav-sidebar-none"){e('[name="article_nav_sidebar_type_left"][value="eckb-nav-sidebar-none"]').parent().find(".epkb-label").click();e('[name="article_nav_sidebar_type_right"][value="'+a+'"]').parent().find(".epkb-label").click()}}));e(document).on("change","#nav_sidebar_left",(function(){const t=e(this).val();if(t==="0"||t===0){e('[name="article_nav_sidebar_type_left"][value="eckb-nav-sidebar-none"]').parent().find(".epkb-label").click();return}const a=e('[name="article_nav_sidebar_type_right"]:checked').val();if(a!=="eckb-nav-sidebar-none"){e('[name="article_nav_sidebar_type_right"][value="eckb-nav-sidebar-none"]').parent().find(".epkb-label").click();e('[name="article_nav_sidebar_type_left"][value="'+a+'"]').parent().find(".epkb-label").click()}}));e("body").on("change","#epkb-setting-box__list-tools__other [name=wpml_is_enabled]",(function(){e(".eckb-top-notice-message").remove();let t={action:"epkb_wpml_enable",_wpnonce_epkb_ajax_action:epkb_vars.nonce,wpml_enable:e(this).prop("checked")?"on":"off",epkb_kb_id:e("#epkb-list-of-kbs").val()};A(t,(function(t){e(".eckb-top-notice-message").remove();if(typeof t.message!=="undefined"){e("body").append(t.message)}if(typeof t.html!=="undefined"){e(".epkb-show-sequence-wrap").html(t.html)}}))}));e(document).on("change",'input[name="preload_fonts"]',(function(){e(".eckb-top-notice-message").remove();let t={action:"epkb_preload_fonts",_wpnonce_epkb_ajax_action:epkb_vars.nonce,preload_fonts:e(this).prop("checked")?"on":"off"};A(t,(function(t){e(".eckb-top-notice-message").remove();if(typeof t.message!=="undefined"){e("body").append(t.message)}if(typeof t.html!=="undefined"){e(".epkb-show-sequence-wrap").html(t.html)}}))}));e(document).on("change",'input[name="enable_legacy_open_ai"]',(function(){e(".eckb-top-notice-message").remove();let t={action:"epkb_enable_legacy_open_ai",_wpnonce_epkb_ajax_action:epkb_vars.nonce,enable_legacy_open_ai:e(this).prop("checked")?"on":"off"};A(t,(function(t){e(".eckb-top-notice-message").remove();if(typeof t.message!=="undefined"){e("body").append(t.message)}if(typeof t.html!=="undefined"){e(".epkb-show-sequence-wrap").html(t.html)}}))}));e("[data-open-editor-link]").on("click",(function(){if(e(this).data("open-editor-link")=="back"){e('.epkb-admin__form-tab[data-target="editor"]').trigger("click");return false}}));e(document).on("change","#toc_toggler input",(function(){if(e(this).prop("checked")){if(Z("left")){return}if(Z("right")){return}e("#toc_content").val("1").trigger("change");e("#toc_locations1").prop("checked",true);e("#toc_locations0, #toc_locations2").prop("checked",false);return}e("#toc_content").val("0").trigger("change");e("#toc_locations input").prop("checked",false);U();e(this).trigger("check_toggler")}));e(document).on("check_toggler","#toc_toggler input",(function(){let t=false;e("#toc_locations input").each((function(){if(e(this).prop("checked")){t=true}}));e(this).prop("checked",t)}));e(document).on("click","#toc_locations input",(function(){let t=e(this).prop("value");let a=e(this).prop("checked");let n=false;switch(t){case"toc_left":U();e("#toc_content").val("0").trigger("change");if(a){n=Z("left")}break;case"toc_content":U();e("#toc_content").val("0").trigger("change");if(a){e("#toc_locations1").prop("checked",true);e("#toc_locations0, #toc_locations2").prop("checked",false);e("#toc_content").val("1").trigger("change");n=true}break;case"toc_right":U();e("#toc_content").val("0").trigger("change");if(a){n=Z("right")}break;default:break}e("#toc_locations input").each((function(){if(e(this).prop("value")===t&&n){return true}e(this).prop("checked",false)}));e("#toc_toggler input").trigger("check_toggler")}));function U(){e("#toc_left, #toc_right").each((function(){if(parseInt(e(this).val())>0){e(this).val("0").trigger("change")}}))}function Z(t){let a=false;if(parseInt(e("#toc_"+t).val())===0){e("#toc_"+t).val("3").trigger("change");a=true}return a}e(document).on("change","#toc_left",(function(t,a){if(parseInt(e(this).val())>0){e("#toc_locations0").prop("checked",true);e("#toc_locations1, #toc_locations2").prop("checked",false);e("#toc_content").val("0").trigger("change");e("#toc_toggler input").trigger("check_toggler");e(this).data("prev-value","3")}else if(parseInt(e(this).data("prev-value"))>0){e(this).data("prev-value",e(this).val());if(!a){e("#toc_locations0, #toc_locations1, #toc_locations2").prop("checked",false);e("#toc_content").val("0").trigger("change");e("#toc_toggler input").trigger("check_toggler")}}}));e(document).on("change","#toc_right",(function(t,a){if(parseInt(e(this).val())>0){e("#toc_locations2").prop("checked",true);e("#toc_locations0, #toc_locations1").prop("checked",false);e("#toc_content").val("0").trigger("change");e("#toc_toggler input").trigger("check_toggler");e(this).data("prev-value","3")}else if(parseInt(e(this).data("prev-value"))>0){e(this).data("prev-value",e(this).val());if(!a){e("#toc_locations0, #toc_locations1, #toc_locations2").prop("checked",false);e("#toc_content").val("0").trigger("change");e("#toc_toggler input").trigger("check_toggler")}}}));e("[data-control-toggler] input").on("change",(function(){let t=e(this).closest("[data-control-toggler]"),a=t.data("control-disabled-value"),n=t.data("control-enabled-value");if(e(this).prop("checked")){e("[name='"+t.data("control-toggler")+"'][type='radio']").each((function(){if(e(this).val()==n){e(this).prop("checked",true);return false}}));e("select[name='"+t.data("control-toggler")+"']").val(n).trigger("change")}else{e("[name='"+t.data("control-toggler")+"'][type='radio']").each((function(){if(e(this).val()==a){e(this).prop("checked",true);return false}}));e("select[name='"+t.data("control-toggler")+"']").val(a).trigger("change")}}));e(".epkb-admin__radio-icons input, select").on("change",(function(){let t=e("[data-control-toggler='"+e(this).prop("name")+"'] input");if(!t.length){return}let a=t.closest("[data-control-toggler]").data("control-disabled-value");t.prop("checked",e(this).val()!=a)}));if(e("#article-left-sidebar-toggle").length&&e("#article-left-sidebar-toggle input").prop("checked")==false){e("#article-left-sidebar-toggle").parent().addClass("epkb-sidebar-settings-disabled")}if(e("#article-right-sidebar-toggle").length&&e("#article-right-sidebar-toggle input").prop("checked")==false){e("#article-right-sidebar-toggle").parent().addClass("epkb-sidebar-settings-disabled")}e("#article-left-sidebar-toggle input").on("change",(function(){if(e("#article-left-sidebar-toggle input").prop("checked")){e("#article-left-sidebar-toggle").parent().removeClass("epkb-sidebar-settings-disabled")}else{e("#article-left-sidebar-toggle").parent().addClass("epkb-sidebar-settings-disabled")}}));e("#article-right-sidebar-toggle input").on("change",(function(){if(e("#article-right-sidebar-toggle input").prop("checked")){e("#article-right-sidebar-toggle").parent().removeClass("epkb-sidebar-settings-disabled")}else{e("#article-right-sidebar-toggle").parent().addClass("epkb-sidebar-settings-disabled")}}));e(document).on("click","#modular_main_page_toggle .epkb-settings-control-toggle",(function(){n.addClass("epkb-dialog-box-form--active epkb-kb-modular-main-page--active");e("#epkb-admin-page-reload-confirmation .epkb-dbf__body").html(epkb_vars.on_modular_main_page_toggle);return false}));e(document).on("click","#epkb-admin-page-reload-confirmation.epkb-kb-modular-main-page--active .epkb-dbf__footer__accept__btn",(function(){let t=e('input[name="modular_main_page_toggle"]');t.prop("checked",!t.prop("checked"));n.removeClass("epkb-dialog-box-form--active epkb-kb-modular-main-page--active");J(false,true)}));e(document).on("click","#epkb-admin-page-reload-confirmation.epkb-kb-modular-main-page--active .epkb-dbf__footer__cancel__btn",(function(){n.removeClass("epkb-kb-modular-main-page--active")}));let $;e(document).on("click",'input[name="kb_main_page_layout"]',(function(){let t=e(this).closest(".epkb-input-group");if(t.hasClass("eckb-mp-layout-elay-disabled")){if(e(this).val()==="Grid"||e(this).val()==="Sidebar"){e("#epkb-dialog-pro-feature-ad-kb_main_page_layout").addClass("epkb-dialog-pro-feature-ad--active");return false}}if(e(this).attr("checked")){e(this).prop("checked",true);return}$=e(this);n.addClass("epkb-dialog-box-form--active epkb-kb-main-page-layout--active");e("#epkb-admin-page-reload-confirmation .epkb-dbf__body").html(epkb_vars.on_kb_main_page_layout);return false}));e(document).on("click","#epkb-admin-page-reload-confirmation.epkb-kb-main-page-layout--active .epkb-dbf__footer__accept__btn",(function(){if($){$.prop("checked",true)}n.removeClass("epkb-dialog-box-form--active epkb-kb-main-page-layout--active");J(false,true)}));e(document).on("click","#epkb-admin-page-reload-confirmation.epkb-kb-main-page-layout--active .epkb-dbf__footer__cancel__btn",(function(){n.removeClass("epkb-kb-main-page-layout--active")}));let L;e(document).on("click",'input[name="templates_for_kb"], input[name="template_for_article_page"], input[name="template_for_archive_page"]',(function(){if(e(this).attr("checked")){return false}L=e(this);n.addClass("epkb-dialog-box-form--active epkb-kb-template-confirmation--active");if(e(this).val()==="kb_templates"){e("#epkb-admin-page-reload-confirmation .epkb-dbf__body").html(epkb_vars.on_kb_templates)}else{e("#epkb-admin-page-reload-confirmation .epkb-dbf__body").html(epkb_vars.on_current_theme_templates)}return false}));e(document).on("click","#epkb-admin-page-reload-confirmation .epkb-dbf__footer__accept__btn",(function(){if(!L||!n.hasClass("epkb-kb-template-confirmation--active")){return}L.prop("checked",true);e("#epkb-admin-page-reload-confirmation").removeClass("epkb-dialog-box-form--active");J(false,true)}));e(document).on("click","#epkb-admin-page-reload-confirmation .epkb-dbf__footer__cancel__btn",(function(){e("#epkb-admin-page-reload-confirmation").removeClass("epkb-kb-template-confirmation--active")}));e(document).on("click","#article_search_sync_toggle .epkb-settings-control-toggle",(function(){n.addClass("epkb-dialog-box-form--active epkb-kb-article-search-sync--active");e("#epkb-admin-page-reload-confirmation .epkb-dbf__body").html(epkb_vars.on_article_search_sync_toggle);return false}));e(document).on("click","#epkb-admin-page-reload-confirmation.epkb-kb-article-search-sync--active .epkb-dbf__footer__accept__btn",(function(){let t=e('input[name="article_search_sync_toggle"]');t.prop("checked",!t.prop("checked"));n.removeClass("epkb-dialog-box-form--active epkb-kb-article-search-sync--active");J(false,true)}));e(document).on("click","#epkb-admin-page-reload-confirmation.epkb-kb-article-search-sync--active .epkb-dbf__footer__cancel__btn",(function(){n.removeClass("epkb-kb-article-search-sync--active")}));e(document).on("click","#article_search_toggle .epkb-settings-control-toggle",(function(){n.addClass("epkb-dialog-box-form--active epkb-kb-article-search--active");e("#epkb-admin-page-reload-confirmation .epkb-dbf__body").html(epkb_vars.on_article_search_toggle);return false}));e(document).on("click","#epkb-admin-page-reload-confirmation.epkb-kb-article-search--active .epkb-dbf__footer__accept__btn",(function(){let t=e('input[name="article_search_toggle"]');t.prop("checked",!t.prop("checked"));n.removeClass("epkb-dialog-box-form--active epkb-kb-article-search--active");J(false,true)}));e(document).on("click","#epkb-admin-page-reload-confirmation.epkb-kb-article-search--active .epkb-dbf__footer__cancel__btn",(function(){n.removeClass("epkb-kb-article-search--active")}));e(document).on("change","#advanced_search_mp_presets input, #advanced_search_ap_presets input",(function(){n.addClass("epkb-dialog-box-form--active epkb-asea-presets-selection--active");e("#epkb-admin-page-reload-confirmation .epkb-dbf__body").html(epkb_vars.on_asea_presets_selection);return false}));e(document).on("click","#epkb-admin-page-reload-confirmation.epkb-asea-presets-selection--active .epkb-dbf__footer__accept__btn",(function(){n.removeClass("epkb-dialog-box-form--active epkb-asea-presets-selection--active");J(false,true)}));e(document).on("click","#epkb-admin-page-reload-confirmation.epkb-asea-presets-selection--active .epkb-dbf__footer__cancel__btn",(function(){e('#advanced_search_mp_presets input[value="current"], #advanced_search_ap_presets input[value="current"]').prop("checked",true);n.removeClass("epkb-asea-presets-selection--active")}));e(document).on("change","#archive_content_sub_categories_display_mode input",(function(){n.addClass("epkb-dialog-box-form--active epkb-archive-presets-selection--active");e("#epkb-admin-page-reload-confirmation .epkb-dbf__body").html(epkb_vars.on_archive_presets_selection);return false}));e(document).on("click","#epkb-admin-page-reload-confirmation.epkb-archive-presets-selection--active .epkb-dbf__footer__accept__btn",(function(){n.removeClass("epkb-dialog-box-form--active epkb-archive-presets-selection--active");J(false,true)}));e(document).on("click","#epkb-admin-page-reload-confirmation.epkb-archive-presets-selection--active .epkb-dbf__footer__cancel__btn",(function(){e('#archive_content_sub_categories_display_mode input[value="current"]').prop("checked",true);n.removeClass("epkb-archive-presets-selection--active")}));e(document).on("change","#faq_preset_name input",(function(){n.addClass("epkb-dialog-box-form--active epkb-faqs-module-presets-selection--active");e("#epkb-admin-page-reload-confirmation .epkb-dbf__body").html(epkb_vars.on_faqs_presets_selection);return false}));e(document).on("click","#epkb-admin-page-reload-confirmation.epkb-faqs-module-presets-selection--active .epkb-dbf__footer__accept__btn",(function(){n.removeClass("epkb-dialog-box-form--active epkb-faqs-module-presets-selection--active");J(false,true)}));e(document).on("click","#epkb-admin-page-reload-confirmation.epkb-faqs-module-presets-selection--active .epkb-dbf__footer__cancel__btn",(function(){e('#faq_preset_name input[value="current"]').prop("checked",true);n.removeClass("epkb-faqs-module-presets-selection--active")}));e("#epkb-admin__boxes-list__settings input[type=text], #epkb-admin__boxes-list__settings textarea").on("keyup",(function(){let t=e(this).prop("name");let a=e(this).val();if(e("#epkb-admin__boxes-list__settings").find('[name="'+t+'"]').length==1){return}e("#epkb-admin__boxes-list__settings").find('[name="'+t+'"]').each((function(){e(this).val(a)}))}));e(document).on("change","#ml_faqs_kb_id",(function(){e('#ml_faqs_category_ids input[type="checkbox"]').each((function(){if(e(this).prop("checked")){e(this).prop("checked",false)}}));e(".epkb-ml-faqs-kb-categories").addClass("epkb-hide-elem");e(".epkb-ml-faqs-kb-categories--"+e(this).val()).removeClass("epkb-hide-elem")}));e(document).on("click",".epkb-admin__icon-font-selection .epkb-icon-pack__icon",(function(t){t.stopPropagation();let a=e(this),n=a.closest(".epkb-admin__icon-font-selection");n.find(".epkb-icon-pack__icon").removeClass("epkb-icon-pack__icon--checked");a.addClass("epkb-icon-pack__icon--checked");e('[name="'+n.data("setting-name")+'"]').val(a.data("key"))}));e(document).on("click",".epkb-admin__icon-image-selection .epkb-input-icon-image__button",(function(t){t.stopPropagation();let a=e(this),n=a.closest(".epkb-admin__icon-image-selection"),o=wp.media({title:a.data("title"),library:{type:"image"},multiple:false}).on("select",(function(){let t=o.state().get("selection").first().toJSON();e('[name="'+n.data("setting-name")+'"]').val(t.id);a.removeClass("epkb-input-icon-image__button--no-image").addClass("epkb-input-icon-image__button--have-image").css({"background-image":"url("+t.url+")"})})).open()}));e(document).on("change",'[data-settings-group="ml-row"].epkb-row-module-setting select',(function(){let t=e(this).val();if(t!=="none"){let a=e(".epkb-admin__form-tab-content--module-settings .eckb-ml-module__"+t);e(this).closest(".epkb-admin__form-sub-tab-wrap").find(".epkb-admin__form-tab-content--module-settings .epkb-admin__kb__form").append(a)}e('[data-settings-group="ml-row"].epkb-row-module-setting select').each((function(){let t=e(this).closest(".epkb-admin__form-sub-tab-wrap").find(".epkb-admin__form-tab-content--module-settings");if(e(this).val()==="none"){t.addClass("epkb-admin__form-tab-content--hide")}else{t.removeClass("epkb-admin__form-tab-content--hide")}}));W(this);e(".epkb-admin__form-sub-tabs--main-page .epkb-admin__form-sub-tab").each((function(){let t=e(this).data("module-selector");if(!t){return}let a=e("#"+t);let n=e(this);let o=n.find(".epkb-admin__form-sub-tab-title");if(a.val()==="none"){let t=e(this).data("no-module-label");o.html(t?t:"");n.addClass("epkb-admin__form-sub-tab--unused")}else{let e=a.find('option[value="'+a.val()+'"]').html();o.html(e);n.removeClass("epkb-admin__form-sub-tab--unused")}e(this).attr("data-selected-module",a.val())}))}));function W(t){let a=e(t).val();let n=e(t).closest(".epkb-admin__form-sub-tab-wrap").find(".epkb-admin__form-tab-content--module-box:not(.epkb-admin__form-tab-content--"+a+"-box)");n.addClass("epkb-admin__form-tab-content--hide");let o=e(t).closest(".epkb-admin__form-tab-wrap").find(".epkb-admin__form-tab-content--"+a+"-box");if(!o.length){return}e(o.get().reverse()).each((function(){e(this).removeClass("epkb-admin__form-tab-content--hide");let a=e(this).data("insert-box-after");e(t).closest(".epkb-admin__form-sub-tab-wrap").find(a).after(this)}));if(a==="categories_articles"){e('[name="kb_main_page_layout"]:checked').trigger("click")}}e('[data-settings-group="ml-row"].epkb-row-module-setting select').each((function(){W(this)}));e(document).on("keypress",".epkb-admin__input-field--disallow-new-lines textarea",(function(e){if((e.keyCode||e.which)===13||e.key==="Enter"){return false}}));e("#epkb-admin__boxes-list__settings .epkb-admin__input-disabled").each((function(){e(this).find("input, select, textarea, button").prop("disabled",true)}));e(document).on("click",".epkb-dialog-pro-feature-ad, .epkb-dbf__close",(function(t){let a=e(t.target);if(!a.closest(".epkb-dialog-pro-feature-ad__content").length){e(this).removeClass("epkb-dialog-pro-feature-ad--active")}}));e(document).on("click",".epkb__option-pro-tag-pro-feature-ad",(function(){const t=e(this).data("target");e("#"+t).addClass("epkb-dialog-pro-feature-ad--active")}));e(document).on("click",(function(t){let a=e(t.target);if(!a.closest(".epkb__option-pro-tag-pro-feature-ad").length&&!a.closest(".epkb-dialog-pro-feature-ad").length&&!a.closest(".epkb-dialog-pro-feature-ad2").length){e(".epkb-dialog-pro-feature-ad, .epkb-dialog-pro-feature-ad2").removeClass("epkb-dialog-pro-feature-ad--active")}}));let M=e(".epkb-feature-container");let R=0;function G(e){M.removeClass("epkb-feature--active").eq(e).addClass("epkb-feature--active")}e(".epkb-feature-next").on("click",(function(){R=(R+1)%M.length;G(R)}));e(".epkb-feature-previous").on("click",(function(){R=(R-1+M.length)%M.length;G(R)}));e(document).on("change",'[name="ml_categories_articles_sidebar_toggle"]',(function(){if(!e(this).prop("checked")){return}let t=e(this).closest(".epkb-settings-control-container").data("default-value-pc");e('[name="ml_categories_articles_sidebar_desktop_width"]').val(t)}));e(document).on("click",".epkb-ml-resource-links-icons-loader",(function(){let t=e(this);let a={action:"epkb_load_resource_links_icons",_wpnonce_epkb_ajax_action:epkb_vars.nonce,active_icon:t.data("selected")};A(a,(function(e){t.closest(".epkb-ml-resource-links-icons-loader-wrap").replaceWith(e.data)}))}));e(document).on("click",".epkb-general_typography-loader",(function(){let t=e(this);let a={action:"epkb_load_general_typography",_wpnonce_epkb_ajax_action:epkb_vars.nonce,active_font_family:t.data("selected")};A(a,(function(a){t.closest(".epkb-general_typography-loader-wrap").replaceWith(a.data);e("#general_typography_font_family").trigger("change")}))}));e(document).on("click","#archive_page_v3_toggle .epkb-settings-control-toggle",(function(){n.addClass("epkb-dialog-box-form--active epkb-kb-archive-page--active");e("#epkb-admin-page-reload-confirmation .epkb-dbf__body").html(epkb_vars.on_archive_page_v3_toggle);return false}));e(document).on("click","#epkb-admin-page-reload-confirmation.epkb-kb-archive-page--active .epkb-dbf__footer__accept__btn",(function(){let t=e('input[name="archive_page_v3_toggle"]');t.prop("checked",!t.prop("checked"));n.removeClass("epkb-dialog-box-form--active epkb-kb-archive-page--active");J(false,true)}));e(document).on("click","#epkb-admin-page-reload-confirmation.epkb-kb-archive-page--active .epkb-dbf__footer__cancel__btn",(function(){n.removeClass("epkb-kb-archive-page--active")}));e(".epkb-admin__link-scroll-top").on("click",(function(){e("html, body").animate({scrollTop:0},300);return false}));function H(t){const a=e("<textarea>");e("body").append(a);a.val(t).select();document.execCommand("copy");a.remove()}e(document).on("click","#epkb-faqs-shortcode-link",(function(t){t.preventDefault();e('[data-target="faq-shortcodes"]').trigger("click")}));e(document).on("click",".epkb-fe__fe-offer-disable",(function(t){t.preventDefault();const a=new URL(window.location.href);a.searchParams.set("is_fe_offer_declined","on");let n=e('<form method="post" action="'+a+'" style="display: none !important;">'+'<input type="hidden" name="is_fe_offer_declined" value="on">'+"</form>");e("body").append(n);setTimeout((function(){n.trigger("submit")}),100);return false}));(function(){const e=new URL(window.location.href);if(e.searchParams.get("is_fe_offer_declined")){e.searchParams.delete("is_fe_offer_declined");history.replaceState(null,"",e.pathname+e.search+e.hash)}})()}));