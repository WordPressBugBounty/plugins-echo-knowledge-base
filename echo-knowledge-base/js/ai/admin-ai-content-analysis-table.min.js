(function(){"use strict";const{useState:e,useEffect:a,useCallback:t,createElement:n,Fragment:s,useContext:o,useRef:i,useMemo:l,createRoot:r}=wp.element;const{__:c}=wp.i18n;const{showError:d,showSuccess:u,makeApiRequest:p,showConfirmDialog:g,formatServerDateTime:m,useTableSearch:y,clearAllEPKBSessionStorage:f}=window.EPKB_AI_Util_React||{};const _=()=>{let e=false;let a=[];let t=[];let n=[];let s=null;try{const o=sessionStorage.getItem("epkb_analysis_batch_state");if(o){s=JSON.parse(o);if((s.status==="running"||s.status==="scheduled")&&!s.failed_at&&s.status!=="failed"&&s.status!=="completed"){e=true}}const i=sessionStorage.getItem("epkb_analysis_in_progress");if(i){a=JSON.parse(i)}const l=sessionStorage.getItem("epkb_analysis_completed");if(l){t=JSON.parse(l)}if(e){n=a.filter((e=>!t.includes(e)))}}catch(e){}return{hasActiveBatch:e,inProgressIds:a,completedIds:t,pendingIds:n,batchState:s}};const h=({collectionId:r=1,settings:m={},kb_list:h=[],selectedKbId:b=null,onKbChange:v=null,onSelectedIdsChange:z,onBulkDeleteCallback:k,onSelectAllCallback:A,onTotalItemsChange:w,refreshTrigger:C=0,initialData:I=null,onTrainingDataChange:S=null,isAnalyzing:N=false,onUpdateRowsCallback:T=null})=>{const x=b!==null?b:m.kb_id!==undefined?m.kb_id:0;const R=window.EPKB_AI_ContentAnalysisCacheContext?o(window.EPKB_AI_ContentAnalysisCacheContext):null;const P=window.EPKB_AI_ContentAnalysisSyncContext?o(window.EPKB_AI_ContentAnalysisSyncContext):null;const E=()=>{if(R){const e=R.get("table_activeStatusTab");if(e&&typeof e.value==="string"){return e.value}}return"all"};const D=E();const[U,B]=e((()=>{let e=[];if(R){const a=R.get("table_analysisData");if(a&&Array.isArray(a.value)){e=a.value}}if(e.length===0&&I&&I.data){if(D==="all"&&I.data.all&&I.data.all.data){e=I.data.all.data}}try{const a="epkb_content_analysis_cache_analysis_results_cache";const t=sessionStorage.getItem(a);if(t&&e.length>0){const a=JSON.parse(t);const n=a.value||{};const{hasActiveBatch:s,pendingIds:o}=_();e=e.map((e=>{const a=String(e.item_id||e.id);const t=n[a];const i=s&&o.includes(a);let l={...e};if(t){if(t.score!==undefined&&t.score!=="-"&&t.score!=="Analyzing..."){l.score=t.score;l.status=t.status||"analyzed"}if(t.importance!==undefined&&t.importance!=="Analyzing..."){l.importance=t.importance}if(t.scoreComponents&&t.scoreComponents.length>0&&!t.scoreComponents.some((e=>e.value==="Analyzing..."))){l.scoreComponents=t.scoreComponents}if(t.analyzed_at){l.last_analyzed=t.analyzed_at}else if(t.last_analyzed){l.last_analyzed=t.last_analyzed}if(t.error_message){l.error_message=t.error_message}}if(i&&(!t||t.score===undefined||t.score==="-"||t.score==="Analyzing...")){l.score="Analyzing...";l.importance="Analyzing...";l.scoreComponents=[{name:"Tags Usage",value:"Analyzing..."},{name:"Gap Analysis",value:"Analyzing..."},{name:"Readability",value:"Analyzing..."}];l.status="analyzing";l.last_analyzed="In Progress"}if(!l.scoreComponents){l.scoreComponents=e.scoreComponents||[{name:"Tags Usage",value:"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}]}return l}))}}catch(a){if(R&&e.length>0){const a=R.get("analysis_results_cache");if(a&&a.value){const t=a.value;let n=false;let s=[];try{const e=_();n=e.hasActiveBatch;s=e.pendingIds}catch(e){}e=e.map((e=>{const a=String(e.item_id||e.id);const o=t[a];const i=n&&s.includes(a);let l={...e};if(o){if(o.score!==undefined&&o.score!=="-"&&o.score!=="Analyzing..."){l.score=o.score;l.status=o.status||"analyzed"}if(o.importance!==undefined&&o.importance!=="Analyzing..."){l.importance=o.importance}if(o.scoreComponents&&o.scoreComponents.length>0&&!o.scoreComponents.some((e=>e.value==="Analyzing..."))){l.scoreComponents=o.scoreComponents}if(o.analyzed_at){l.last_analyzed=o.analyzed_at}else if(o.last_analyzed){l.last_analyzed=o.last_analyzed}if(o.error_message){l.error_message=o.error_message}}if(i&&(!o||o.score===undefined||o.score==="-"||o.score==="Analyzing...")){l.score="Analyzing...";l.importance="Analyzing...";l.scoreComponents=[{name:"Tags Usage",value:"Analyzing..."},{name:"Gap Analysis",value:"Analyzing..."},{name:"Readability",value:"Analyzing..."}];l.status="analyzing";l.last_analyzed="In Progress"}if(!l.scoreComponents){l.scoreComponents=e.scoreComponents||[{name:"Tags Usage",value:"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}]}return l}))}}}return e}));const[G,$]=e((()=>{if(R){const e=R.get("analyzed_articles_map");if(e&&e.value){return e.value}}return{}}));const[K,J]=e([]);const[M,O]=e((()=>{if(R){const e=R.get("table_analysisData");if(e&&Array.isArray(e.value)&&e.value.length>0){return false}}return!(I&&I.data&&I.data.all)}));const[L,j]=e((()=>{if(R){const e=R.get("tabDataCache");if(e&&e.value){return e.value}}return{}}));const[H,F]=e(false);const[W,q]=e(null);const[Y,Q]=e((()=>{if(R){const e=R.get("table_currentPage");return e&&typeof e.value==="number"&&e.value>0?e.value:1}return 1}));const[V,X]=e((()=>{if(R){const e=R.get("table_totalPages");if(e&&typeof e.value==="number"&&e.value>0){return e.value}}if(I&&I.data&&I.data.all&&I.data.all.pagination){return I.data.all.pagination.total_pages}return 1}));const[Z,ee]=e(false);const[ae,te]=e(new Set);const ne=20;const[se,oe]=e(D);const[ie,le]=e((()=>{if(R){const e=R.get("table_sortField");return e&&typeof e.value==="string"?e.value:null}return null}));const[re,ce]=e((()=>{if(R){const e=R.get("table_sortDirection");return e&&(e.value==="asc"||e.value==="desc")?e.value:"asc"}return"asc"}));const[de,ue]=e((()=>{if(R){const e=R.get("table_currentSearchTerm");return e&&typeof e.value==="string"?e.value:""}return""}));a((()=>{if(R){R.set("table_analysisData",U)}}),[U]);a((()=>{if(R){R.set("tabDataCache",L)}}),[L]);a((()=>{if(R){R.set("analyzed_articles_map",G)}}),[G]);a((()=>{if(R){R.set("table_currentPage",Y)}}),[Y]);a((()=>{if(R){R.set("table_totalPages",V)}}),[V]);a((()=>{if(R){R.set("table_activeStatusTab",se)}}),[se]);a((()=>{if(R){R.set("table_sortField",ie)}}),[ie]);a((()=>{if(R){R.set("table_sortDirection",re)}}),[re]);a((()=>{if(R){R.set("table_currentSearchTerm",de)}}),[de]);const pe=t((async e=>{ue(e||"");Q(1);return null}),[]);const{searchTerm:ge,displayedData:me,isSearching:ye,searchMessage:fe,handleSearchChange:_e,clearSearch:he}=y({data:U,allData:null,onServerSearch:pe,searchFields:["title","score","importance"]});const be=t((()=>{let e=[...me];if(se==="to_analyse"){e=e.filter((e=>e.display_status==="To Analyze"))}else if(se==="to_improve"){e=e.filter((e=>e.display_status==="To Improve"))}let a=e;if(ie){a.sort(((e,a)=>{if(se==="to_analyse"&&ie==="importance"){let t=e.importance==="N/A"?0:parseInt(e.importance)||0;let n=a.importance==="N/A"?0:parseInt(a.importance)||0;let s=e.score==="-"?0:parseInt(e.score)||0;let o=a.score==="-"?0:parseInt(a.score)||0;let i=t*(100-s)/100;let l=n*(100-o)/100;if(i!==l){return l-i}if(t!==n){return n-t}return s-o}if(se==="to_improve"&&ie==="importance"){let t=e.importance==="N/A"?0:parseInt(e.importance)||0;let n=a.importance==="N/A"?0:parseInt(a.importance)||0;let s=e.score==="-"?0:parseInt(e.score)||0;let o=a.score==="-"?0:parseInt(a.score)||0;let i=t*(100-s)/100;let l=n*(100-o)/100;if(i!==l){return l-i}if(t!==n){return n-t}return s-o}let t=e[ie];let n=a[ie];if(ie==="score"){t=t==="-"?0:parseInt(t)||0;n=n==="-"?0:parseInt(n)||0}if(ie==="importance"){t=t==="N/A"?-1:parseInt(t)||0;n=n==="N/A"?-1:parseInt(n)||0}if(ie==="last_analyzed"||ie==="updated"){t=new Date(t||0).getTime();n=new Date(n||0).getTime()}if(ie==="display_status"){const e={"To Analyze":1,"To Improve":2,Done:3,Ignored:4};t=e[t]||5;n=e[n]||5}if(t<n)return re==="asc"?-1:1;if(t>n)return re==="asc"?1:-1;return 0}))}return a}),[me,ie,re,se]);const ve=t((()=>{const e=be();return e}),[be]);const ze=i(true);const ke=i(false);a((()=>{ze.current=true;ke.current=false;Q(1);oe("all");ue("")}),[r]);a((()=>{Q(1)}),[se,de]);const Ae=t((async(e=false)=>{if(!e&&I&&ze.current){O(false);return}const a=`kb_${x}_${se}_page_${Y}_search_${de||"none"}`;if(!e&&L[a]){const e=L[a];B(e.data);X(e.totalPages);F(false);return}if(!e){try{const e="epkb_content_analysis_cache_analysis_results_cache";const a=sessionStorage.getItem(e);if(a){const e=JSON.parse(a);const t=e.value||{};if(Object.keys(t).length>0){$((e=>({...e,...t})))}}}catch(e){}}const t=U&&U.length>0;if(e){O(true)}else if(se!=="all"||Y!==1){F(true)}else if(!t){O(true)}try{const a=await p("content-analysis-articles-view",{method:"GET",params:{page:Y,per_page:ne,status:se,search:de||"",kb_id:x}});if(a.success&&a.data){if((!a.data||a.data.length===0)&&U&&U.length>0&&!e){O(false);F(false);return}let t={};let n=false;let s=[];try{const e="epkb_content_analysis_cache_analysis_results_cache";const a=sessionStorage.getItem(e);if(a){const e=JSON.parse(a);t=e.value||{};if(Object.keys(t).length>0){$(t)}}const o=_();n=o.hasActiveBatch;s=o.pendingIds}catch(e){}const o=a.data.map((e=>{const a=String(e.item_id||e.id);const o=t[a];const i=G[a];let l=null;if(R){const e=R.get("analysis_results_cache");if(e&&e.value&&e.value[a]){l=e.value[a]}}const r=o||l||i;const c=n&&s.includes(a);let d={...e};if(o&&a===String(e.item_id||e.id)){}if(r){if(r.score!==undefined&&r.score!=="-"&&r.score!=="Analyzing..."){d.score=r.score;d.status=r.status||"analyzed"}if(r.importance!==undefined&&r.importance!=="Analyzing..."){d.importance=r.importance}if(r.scoreComponents&&r.scoreComponents.length>0&&!r.scoreComponents.some((e=>e.value==="Analyzing..."))){d.scoreComponents=r.scoreComponents}else if(!d.scoreComponents){d.scoreComponents=[{name:"Tags Usage",value:"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}]}if(r.analyzed_at){d.last_analyzed=r.analyzed_at}else if(r.last_analyzed){d.last_analyzed=r.last_analyzed}if(r.error_message){d.error_message=r.error_message}}if(c&&(!r||r.score===undefined||r.score==="-"||r.score==="Analyzing...")){d.score="Analyzing...";d.importance="Analyzing...";d.scoreComponents=[{name:"Gap Analysis",value:"Analyzing..."},{name:"Tags Usage",value:"Analyzing..."},{name:"Readability",value:"Analyzing..."}];d.status="analyzing";d.last_analyzed="In Progress"}if(!d.scoreComponents){d.scoreComponents=[{name:"Tags Usage",value:"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}]}return d}));B(o);if(a.pagination){X(a.pagination.total_pages)}const i=`kb_${x}_${se}_page_${Y}_search_${de||"none"}`;if(e||!L[i]){if(se!=="all"||Y!==1||de){try{const e=await p("content-analysis-articles-view",{method:"GET",params:{page:1,per_page:100,status:"all",search:"",kb_id:x}});if(e.success&&e.data){const a=e.data.filter((e=>e.display_status==="To Analyze")).length;const t=e.data.filter((e=>e.display_status==="To Improve")).length;const n=e.pagination?e.pagination.total:e.data.length;q({all:n,to_analyse:a,to_improve:t,recent:n})}}catch(e){}}else{const e=o.filter((e=>e.display_status==="To Analyze")).length;const t=o.filter((e=>e.display_status==="To Improve")).length;const n=a.pagination?a.pagination.total:o.length;q({all:n,to_analyse:e,to_improve:t,recent:n})}}j((e=>({...e,[i]:{data:o,totalPages:a.pagination?a.pagination.total_pages:1,timestamp:Date.now()}})));O(false);F(false);setTimeout((()=>{Se()}),10);setTimeout((()=>{Se()}),100);setTimeout((()=>{Se()}),300)}}catch(e){if(e.status===404||e.code==="rest_no_route"){if(U&&U.length>0){O(false);return}let e=[];for(let a=0;a<5;a++){if(a===2){e.push({id:100+a,item_id:100+a,title:`Article with Error ${100+a}`,score:"-",importance:"N/A",scoreComponents:[{name:"Tags Usage",value:"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}],last_analyzed:"Error",updated:"2024-01-01",status:"error",error_message:"Failed to analyze article: Unable to process content due to invalid format or missing data. Please check the article content and try again.",error_code:500})}else{e.push({id:100+a,item_id:100+a,title:`Article ${100+a}`,score:Math.floor(Math.random()*40)+60,importance:Math.floor(Math.random()*50)+50,scoreComponents:[{name:"Tags Usage",value:Math.floor(Math.random()*40)+60},{name:"Gap Analysis",value:Math.floor(Math.random()*40)+60},{name:"Readability",value:Math.floor(Math.random()*40)+60}],last_analyzed:"Not analyzed",updated:"2024-01-01",status:"not_analyzed"})}}try{const a="epkb_content_analysis_cache_analysis_results_cache";const t=sessionStorage.getItem(a);if(t){const a=JSON.parse(t);const n=a.value||{};const{hasActiveBatch:s,pendingIds:o}=_();e=e.map((e=>{const a=String(e.item_id||e.id);const t=n[a];const i=s&&o.includes(a);let l={...e};if(t){if(t.score!==undefined&&t.score!=="-"&&t.score!=="Analyzing..."){l.score=t.score;l.status=t.status||"analyzed"}if(t.importance!==undefined&&t.importance!=="Analyzing..."){l.importance=t.importance}if(t.scoreComponents&&t.scoreComponents.length>0&&!t.scoreComponents.some((e=>e.value==="Analyzing..."))){l.scoreComponents=t.scoreComponents}if(t.analyzed_at){l.last_analyzed=t.analyzed_at}else if(t.last_analyzed){l.last_analyzed=t.last_analyzed}if(t.error_message){l.error_message=t.error_message}}if(i&&(!t||t.score===undefined||t.score==="-"||t.score==="Analyzing...")){l.score="Analyzing...";l.importance="Analyzing...";l.scoreComponents=[{name:"Gap Analysis",value:"Analyzing..."},{name:"Tags Usage",value:"Analyzing..."},{name:"Readability",value:"Analyzing..."}];l.status="analyzing";l.last_analyzed="In Progress"}return l}))}}catch(e){}B(e);X(1);setTimeout((()=>{Se()}),10);setTimeout((()=>{Se()}),100);setTimeout((()=>{Se()}),300)}else{d(c("Failed to fetch analysis data","echo-knowledge-base"))}}finally{O(false);F(false)}}),[Y,se,de,ne,m,L]);a((()=>{const e=()=>{if(!I||!I.data||ke.current){return false}if(Y!==1||de){return false}if(se!=="all"){return false}if(I.data[se]&&I.data[se].data!==undefined){return true}return false};if(e()){let e=I.data[se].data;const a=I.data[se].pagination;try{const a="epkb_content_analysis_cache_analysis_results_cache";const t=sessionStorage.getItem(a);if(t){const a=JSON.parse(t);const n=a.value||{};const{hasActiveBatch:s,pendingIds:o}=_();e=e.map((e=>{const a=String(e.item_id||e.id);const t=n[a];const i=s&&o.includes(a);let l={...e};if(t){if(t.score!==undefined&&t.score!=="-"&&t.score!=="Analyzing..."){l.score=t.score;l.status=t.status||"analyzed"}if(t.importance!==undefined&&t.importance!=="Analyzing..."){l.importance=t.importance}if(t.scoreComponents&&t.scoreComponents.length>0&&!t.scoreComponents.some((e=>e.value==="Analyzing..."))){l.scoreComponents=t.scoreComponents}else if(!l.scoreComponents){l.scoreComponents=[{name:"Tags Usage",value:"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}]}if(t.analyzed_at){l.last_analyzed=t.analyzed_at}else if(t.last_analyzed){l.last_analyzed=t.last_analyzed}if(t.error_message){l.error_message=t.error_message}}if(i&&(!t||t.score===undefined||t.score==="-"||t.score==="Analyzing...")){l.score="Analyzing...";l.importance="Analyzing...";l.scoreComponents=[{name:"Tags Usage",value:"Analyzing..."},{name:"Gap Analysis",value:"Analyzing..."},{name:"Readability",value:"Analyzing..."}];l.status="analyzing";l.last_analyzed="In Progress"}if(!l.scoreComponents){l.scoreComponents=[{name:"Tags Usage",value:"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}]}return l}))}}catch(e){}B(e);X(a?a.total_pages:1);O(false);ze.current=false;setTimeout((()=>{Se()}),10);setTimeout((()=>{Se()}),100);setTimeout((()=>{Se()}),300)}else{Ae()}}),[Y,se,de,I]);const we=t((e=>{if(e){const e=ve();const a=e.map((e=>String(e.item_id||e.id)));J(a)}else{J([])}}),[ve]);const Ce=async()=>{ee(true);ke.current=true;j({});q(null);$({});try{const e=sessionStorage.getItem("epkb_analysis_batch_state");if(e){const a=JSON.parse(e);if(a.status==="completed"||a.status==="failed"){sessionStorage.removeItem("epkb_analysis_batch_state");sessionStorage.removeItem("epkb_analysis_in_progress");sessionStorage.removeItem("epkb_analysis_completed")}}}catch(e){}f();await Ae(true);ee(false);u(c("Data refreshed successfully","echo-knowledge-base"))};const Ie=t((async()=>{if(!K.length)return;const e=await g({title:c("Delete Selected Items","echo-knowledge-base"),message:c("Are you sure you want to delete the selected items?","echo-knowledge-base"),confirmText:c("Delete","echo-knowledge-base"),cancelText:c("Cancel","echo-knowledge-base"),confirmButtonClass:"epkb-ai-button-danger"});if(!e){return}u(c("Items deleted successfully","echo-knowledge-base"));J([])}),[K]);const Se=t((()=>{let e={};try{const a="epkb_content_analysis_cache_analysis_results_cache";const t=sessionStorage.getItem(a);if(t){const a=JSON.parse(t);if(a.value&&typeof a.value==="object"){e=a.value}else if(typeof a==="object"&&!a.value){e=a}}else{}}catch(e){}const{hasActiveBatch:a,pendingIds:t}=_();if(Object.keys(e).length>0){$(e);if(R){R.set("analysis_results_cache",{value:e,timestamp:Date.now()});R.set("analyzed_articles_map",e)}}B((n=>{if(!n||n.length===0){return n}if(n.length>0){const e=n[0]}let s=0;const o=n.map((n=>{const o=String(n.item_id||n.id);const i=e[o];const l=a&&t.includes(o);let r={...n};let c=false;if(i&&i.score!==undefined&&i.score!=="-"&&i.score!=="Analyzing..."){r.score=i.score;r.status=i.status||"analyzed";c=true;if(i.importance!==undefined&&i.importance!=="Analyzing..."){r.importance=i.importance}if(i.scoreComponents&&i.scoreComponents.length>0&&!i.scoreComponents.some((e=>e.value==="Analyzing..."))){r.scoreComponents=i.scoreComponents}if(i.analyzed_at){r.last_analyzed=i.analyzed_at}if(i.error_message){r.error_message=i.error_message}}if(l&&(!i||i.score===undefined||i.score==="-"||i.score==="Analyzing...")){r.score="Analyzing...";r.importance="Analyzing...";r.scoreComponents=[{name:"Gap Analysis",value:"Analyzing..."},{name:"Tags Usage",value:"Analyzing..."},{name:"Readability",value:"Analyzing..."}];r.status="analyzing";r.last_analyzed="In Progress";c=true}if(!r.scoreComponents){r.scoreComponents=n.scoreComponents||[{name:"Tags Usage",value:"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}]}if(c)s++;return r}));if(o.length>0){const e=o[0]}return o}))}),[R,se]);const Ne=t((e=>{if(!e||e.length===0)return;$((a=>{const t={...a};e.forEach((e=>{const a=String(e.id);if(e.status==="analyzing"){t[a]={score:"Analyzing...",scoreComponents:[{name:"Gap Analysis",value:"Analyzing..."},{name:"Tags Usage",value:"Analyzing..."},{name:"Readability",value:"Analyzing..."}],status:"analyzing",last_analyzed:e.analyzed_at||"In Progress"}}else if(e.status==="error"){t[a]={score:"-",importance:"N/A",scoreComponents:[{name:"Tags Usage",value:"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}],status:"error",error_message:e.message||e.error_message,last_analyzed:"Error"}}else if(e.score!==undefined||e.importance!==undefined||e.scoreComponents){t[a]={score:e.score,importance:e.importance,scoreComponents:e.scoreComponents||[{name:"Tags Usage",value:e.tags_usage||"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}],status:e.status||"analyzed",last_analyzed:e.analyzed_at,analyzed_at:e.analyzed_at}}}));return t}));B((a=>{let t=false;const n=[...a];e.forEach((e=>{const a=String(e.id);const s=n.findIndex((e=>{const t=String(e.item_id)===a;const n=String(e.id)===a;return t||n}));if(s!==-1){const a=n[s];let o=false;const i=a.score!==undefined&&a.score!=="-"&&a.score!=="Analyzing...";if(e.status==="analyzing"){o=true;n[s]={...a,status:"analyzing",score:"Analyzing...",scoreComponents:[{name:"Gap Analysis",value:"Analyzing..."},{name:"Tags Usage",value:"Analyzing..."},{name:"Readability",value:"Analyzing..."}],last_analyzed:e.analyzed_at||"In Progress"}}else if(e.status==="error"){if(a.status!=="error"||a.error_message!==(e.message||e.error_message)){o=true;const t=a.display_status==="Ignored"?"Ignored":"To Analyze";n[s]={...a,status:"error",error_message:e.message||e.error_message||c("Unknown error occurred","echo-knowledge-base"),score:"-",importance:"N/A",scoreComponents:[{name:"Tags Usage",value:"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}],last_analyzed:"Error",display_status:t}}}else{const t=e.score!==undefined?e.score:a.score;const i=e.importance!==undefined?e.importance:a.importance;const l=e.status||"analyzed";let r;const c=typeof t==="string"&&t!=="-"?parseInt(t):t;if(c!==undefined&&c!=="-"&&!isNaN(c)){r=c>=80?"Done":"To Improve"}else{r="To Analyze"}if(a.status==="analyzing"||a.status!==l||a.score!==t||a.importance!==i||a.last_analyzed==="Not analyzed"||a.last_analyzed==="Never"||a.last_analyzed==="In Progress"||a.last_analyzed==="Queued"||a.last_analyzed==="Processing..."){o=true;n[s]={...a,score:t,importance:i,scoreComponents:e.scoreComponents||a.scoreComponents,last_analyzed:e.analyzed_at||a.last_analyzed,status:l,display_status:r,error_message:undefined}}}if(o){t=true}}}));return t?n:a}));try{const a="epkb_content_analysis_cache_analysis_results_cache";let t={};const n=sessionStorage.getItem(a);if(n){const e=JSON.parse(n);t=e.value||{}}e.forEach((e=>{const a=String(e.id);if(e.status==="analyzing"){}else if(e.status==="error"){t[a]={id:e.id,score:"-",importance:"N/A",scoreComponents:[{name:"Tags Usage",value:"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}],status:"error",error_message:e.message||e.error_message,analyzed_at:"Error",cached_at:Date.now()}}else if(e.score!==undefined||e.importance!==undefined){t[a]={id:e.id,score:e.score,importance:e.importance,scoreComponents:e.scoreComponents||[{name:"Tags Usage",value:e.tags_usage||"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}],status:e.status||"analyzed",analyzed_at:e.analyzed_at,cached_at:Date.now()}}}));sessionStorage.setItem(a,JSON.stringify({value:t,timestamp:Date.now()}))}catch(e){}}),[]);a((()=>{if(T){T(Ne)}}),[T]);a((()=>{const e=async()=>{let e=false;Se();const{hasActiveBatch:a,pendingIds:t,batchState:n}=_();if(a&&n){e=true;if(P&&P.setAnalysisJob){P.setAnalysisJob(n)}if(P&&P.setShowAnalysisProgress){P.setShowAnalysisProgress(true)}}if(a&&t.length>0){B((e=>{if(e.length===0){return e}return e.map((e=>{const a=String(e.item_id||e.id);if(t.includes(a)){return{...e,score:"Analyzing...",scoreComponents:[{name:"Gap Analysis",value:"Analyzing..."},{name:"Tags Usage",value:"Analyzing..."},{name:"Readability",value:"Analyzing..."}],status:"analyzing",last_analyzed:"In Progress"}}return e}))}))}await Ae(true);if(a&&t.length>0){setTimeout((()=>{const e=t.map((e=>({id:e,status:"analyzing",analyzed_at:"In Progress"})));Te.current(e)}),200)}};const a=setTimeout(e,100);return()=>clearTimeout(a)}),[]);const Te=i(Ne);a((()=>{Te.current=Ne}),[Ne]);a((()=>{if(U&&U.length>0){const e=U.filter((e=>e.score!==undefined&&e.score!=="-"&&e.score!=="Analyzing..."));if(e.length>0){try{const a="epkb_content_analysis_cache_analysis_results_cache";let t={};const n=sessionStorage.getItem(a);if(n){const e=JSON.parse(n);t=e.value||{}}e.forEach((e=>{const a=String(e.item_id||e.id);t[a]={id:e.item_id||e.id,score:e.score,importance:e.importance,scoreComponents:e.scoreComponents,status:e.status||"analyzed",analyzed_at:e.last_analyzed,cached_at:Date.now()}}));sessionStorage.setItem(a,JSON.stringify({value:t,timestamp:Date.now()}))}catch(e){}}}}),[U]);a((()=>{if(!window.EPKB_AI_ContentAnalysisTable){window.EPKB_AI_ContentAnalysisTable={}}window.EPKB_AI_ContentAnalysisTable.refreshAllRows=Se;return()=>{if(window.EPKB_AI_ContentAnalysisTable&&window.EPKB_AI_ContentAnalysisTable.refreshAllRows===Se){delete window.EPKB_AI_ContentAnalysisTable.refreshAllRows}}}),[Se]);a((()=>{if(P&&P.registerArticleUpdateHandler){const e=e=>{Te.current(e);setTimeout((()=>{Se()}),50)};P.registerArticleUpdateHandler(e);return()=>{if(P.unregisterArticleUpdateHandler){P.unregisterArticleUpdateHandler(e)}}}}),[P,Se]);a((()=>{const{hasActiveBatch:e,pendingIds:a}=_();if(e&&a.length>0&&U.length>0){const e=a.map((e=>({id:e,status:"analyzing",analyzed_at:"In Progress"})));Te.current(e)}if(P&&P.analysisJob){const e=P.analysisJob;if((e.status==="running"||e.status==="scheduled")&&e.total>0){const e=P.analysisItems;if(e&&e.length>0&&U.length>0){const a=e.map((e=>({id:e.id,status:"analyzing",analyzed_at:"In Progress"})));if(a.length>0){Te.current(a)}}}}}),[P?.analysisJob?.status,U.length]);a((()=>{if(P&&Array.isArray(P.analysisItems)){const e=P.analysisJob;if((e.status==="running"||e.status==="scheduled")&&P.analysisItems.length>0&&U.length>0){const e=P.analysisItems.map((e=>({id:e.id,status:"analyzing",analyzed_at:"In Progress"})));Ne(e)}}}),[P?.analysisItems?.length,P?.analysisJob?.status]);a((()=>{if(S&&U){S(U)}}),[U,S]);a((()=>{if(C>0&&!N){ke.current=true;Ae(true);J([])}}),[C,N]);a((()=>{if(N){j({});q(null);const{hasActiveBatch:e,pendingIds:a}=_();if(e&&a.length>0&&U.length>0){const e=a.map((e=>({id:e,status:"analyzing",analyzed_at:"In Progress"})));Te.current(e)}}}),[N,U.length]);a((()=>{if(z){const e=be();let a=null;if(K.length===1){const t=e.find((e=>String(e.item_id||e.id)===K[0]));if(t){a={id:t.item_id||t.id,title:t.title,score:t.score,importance:t.importance,scoreComponents:t.scoreComponents||[{name:"Tags Usage",value:"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}]}}}const t=[];e.forEach((e=>{const a=String(e.item_id||e.id);if(K.includes(a)){t.push(a)}}));z(t,a)}}),[K,z,ie,re,me]);a((()=>{if(k&&Ie){k((()=>{Ie()}))}}),[k,Ie]);a((()=>{if(A){A(we)}}),[A,we]);const xe=l((()=>U.length),[U]);a((()=>{if(w){w(xe)}}),[xe,w]);const Re=e=>{const a=String(e);if(K.includes(a)){J(K.filter((e=>e!==a)))}else{J([...K,a])}};const Pe=e=>{oe(e);Q(1);if(e==="to_analyse"){le("importance");ce("desc")}else if(e==="to_improve"){le("importance");ce("desc")}else if(e==="recent"){le("updated");ce("desc")}else{le("updated");ce("desc")}try{const e="epkb_content_analysis_cache_analysis_results_cache";const a=sessionStorage.getItem(e);if(a){const e=JSON.parse(a);const t=e.value||{};if(Object.keys(t).length>0){$(t);if(R){R.set("analysis_results_cache",{value:t,timestamp:Date.now()});R.set("analyzed_articles_map",t)}}}}catch(e){}Se();setTimeout((()=>{Se()}),50);setTimeout((()=>{Se()}),200);setTimeout((()=>{Se()}),500)};const Ee=e=>{if(ie===e){ce(re==="asc"?"desc":"asc")}else{le(e);ce("asc")}};const De=t((()=>{if(W){return{all:W.all||0,to_analyse:W.to_analyse||0,to_improve:W.to_improve||0,recent:W.recent||0}}if(I&&I.stats){return{all:I.stats.all||0,to_analyse:I.stats.to_analyse||0,to_improve:I.stats.to_improve||0,recent:I.stats.recent||0}}if(se==="all"&&U.length>0){const e=U.filter((e=>e.display_status==="To Analyze")).length;const a=U.filter((e=>e.display_status==="To Improve")).length;return{all:U.length,to_analyse:e,to_improve:a,recent:U.length}}return{all:0,to_analyse:0,to_improve:0,recent:0}}),[U,se,I,W]);return n("div",{className:"epkb-ai-data-source-table"},n("div",{className:"epkb-ai-table-content"},n("div",{className:"epkb-ai-table-actions"},n("div",{className:"epkb-ai-table-actions-left"},h&&h.length>0&&n("div",{className:"epkb-ai-kb-filter",style:{marginRight:"15px"}},n("select",{className:"epkb-ai-kb-select",value:x,onChange:e=>{const a=parseInt(e.target.value,10);if(v){v(a)}},style:{padding:"6px 12px",borderRadius:"4px",border:"1px solid #8c8f94",fontSize:"14px",backgroundColor:"#fff",cursor:"pointer",minWidth:"180px"}},[n("option",{key:0,value:0},c("All Knowledge Bases","echo-knowledge-base")),...h.map((e=>n("option",{key:e.id,value:e.id},e.name)))])),n("div",{className:"epkb-ai-status-tabs-bar"},(()=>{const e=De();const a=["all","to_analyse","to_improve","recent"];const t={all:c("All","echo-knowledge-base"),to_analyse:c("To Analyze","echo-knowledge-base"),to_improve:c("To Improve","echo-knowledge-base"),recent:c("Recent","echo-knowledge-base")};return a.map((a=>{const s=e[a]||0;return n("button",{key:a,className:`epkb-ai-status-tab ${a===se?"active":""}`,onClick:()=>{Pe(a)}},n("span",{className:"epkb-ai-tab-label"},t[a]),n("span",{className:"epkb-ai-tab-count"},`(${s})`))}))})())),n("div",{className:"epkb-ai-table-actions-right"},n("div",{className:"epkb-ai-search-input"},n("input",{type:"text",placeholder:c("Search by title...","echo-knowledge-base"),value:ge,onChange:e=>_e(e.target.value)}),n("span",{className:"epkb-ai-search-icon epkbfa epkbfa-search"})),n("button",{className:"epkb-ai-button epkb-ai-button-success",onClick:Ce,disabled:M||Z,style:{backgroundColor:"#46b450",borderColor:"#46b450",color:"#fff",padding:"6px 12px",fontSize:"14px",marginLeft:"10px",marginRight:K.length>0?"15px":"0"}},Z?c("Refreshing...","echo-knowledge-base"):n(s,null,n("span",{className:"epkbfa epkbfa-refresh",style:{marginRight:"5px"}}),c("Refresh","echo-knowledge-base"))),K.length>0&&n("span",{className:"epkb-ai-selected-count"},`${K.length} ${c("selected","echo-knowledge-base")}`))),M?n("div",{className:"epkb-ai-loading"},c("Loading content analysis data...","echo-knowledge-base")):n(s,null,n("table",{className:"epkb-ai-data-table"},n("thead",null,n("tr",null,n("th",{className:"epkb-ai-table-checkbox"},n("input",{type:"checkbox",checked:(()=>{const e=ve();if(e.length===0)return false;return e.every((e=>K.includes(String(e.item_id||e.id))))})(),onChange:e=>we(e.target.checked)})),n("th",null,n("div",{className:"epkb-ai-table-header-content"},n("span",null,c("Score","echo-knowledge-base")),n("span",{className:`epkb-ai-sort-arrows ${ie==="score"?"active":""}`,onClick:()=>Ee("score"),title:c("Sort","echo-knowledge-base"),style:{cursor:"pointer",marginLeft:"5px"}},ie==="score"&&re==="asc"?"↑":ie==="score"&&re==="desc"?"↓":"↕"))),n("th",null,n("div",{className:"epkb-ai-table-header-content"},n("span",null,c("Importance","echo-knowledge-base")),n("span",{className:`epkb-ai-sort-arrows ${ie==="importance"?"active":""}`,onClick:()=>Ee("importance"),title:c("Sort","echo-knowledge-base"),style:{cursor:"pointer",marginLeft:"5px"}},ie==="importance"&&re==="asc"?"↑":ie==="importance"&&re==="desc"?"↓":"↕"))),n("th",null,n("div",{className:"epkb-ai-table-header-content"},n("span",null,c("Title","echo-knowledge-base")),n("span",{className:`epkb-ai-sort-arrows ${ie==="title"?"active":""}`,onClick:()=>Ee("title"),title:c("Sort","echo-knowledge-base"),style:{cursor:"pointer",marginLeft:"5px"}},ie==="title"&&re==="asc"?"↑":ie==="title"&&re==="desc"?"↓":"↕"))),n("th",null,n("div",{className:"epkb-ai-table-header-content"},n("span",null,se==="recent"?c("Last Modified","echo-knowledge-base"):c("Status","echo-knowledge-base")),n("span",{className:`epkb-ai-sort-arrows ${ie===(se==="recent"?"updated":"display_status")?"active":""}`,onClick:()=>Ee(se==="recent"?"updated":"display_status"),title:c("Sort","echo-knowledge-base"),style:{cursor:"pointer",marginLeft:"5px"}},(()=>{const e=se==="recent"?"updated":"display_status";if(ie===e&&re==="asc")return"↑";if(ie===e&&re==="desc")return"↓";return"↕"})()))))),n("tbody",{style:{position:"relative"}},H&&n("tr",null,n("td",{colSpan:5,style:{position:"relative",padding:0}},n("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,minHeight:"200px",backgroundColor:"rgba(255, 255, 255, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10}},n("div",{style:{textAlign:"center"}},n("div",{className:"epkb-ai-loading-spinner"}),n("div",{style:{marginTop:"10px"}},c("Loading...","echo-knowledge-base")))))),ve().length===0?n("tr",null,n("td",{colSpan:5,style:{textAlign:"center",padding:"20px"}},(()=>{if(de){return c("No articles match your search","echo-knowledge-base")}switch(se){case"to_analyse":return c("No articles need analysis","echo-knowledge-base");case"to_improve":return c("No articles need improvement","echo-knowledge-base");case"recent":return c("No recent articles","echo-knowledge-base");default:return c("No articles found","echo-knowledge-base")}})())):ve().map((e=>{const a=ae.has(e.id)?"epkb-ai-deleting-row":"";const t=e.score!==undefined?e.score:"-";const s=e.importance;const o=e=>{if(e>=80)return"#46b450";if(e>=60)return"#f0ad4e";return"#d54e21"};const i=e.scoreComponents||[{name:"Tags Usage",value:"-"},{name:"Gap Analysis",value:"-"},{name:"Readability",value:"-"}];const l=(e,a)=>({display:"inline-block",width:"12px",height:"12px",backgroundColor:e==="-"||e==="Analyzing..."?"#e0e0e0":o(e),marginRight:"3px",borderRadius:"2px"});const r=t==="-"||t==="Analyzing..."?null:parseInt(t,10);const d=r!==null&&!isNaN(r);const u=d?r:t;const p=d?o(r):"#666";const g=s;return n("tr",{key:e.id,className:a,"data-item-id":e.item_id||e.id,onClick:a=>{const t=a.target;const n=t.tagName.toLowerCase();const s=n==="a"||n==="button"||n==="input"||t.closest("a")||t.closest("button")||t.closest("input");if(!s){Re(e.item_id||e.id)}},style:{cursor:"pointer"}},n("td",{className:"epkb-ai-table-checkbox"},n("input",{type:"checkbox",checked:K.includes(String(e.item_id||e.id)),onChange:()=>Re(e.item_id||e.id)})),n("td",{style:{textAlign:"center"}},n("div",{className:"epkb-ai-score-components",title:i.map(((e,a)=>{const t=["Tags Usage","Gap Analysis","Readability"];const n=["Tags Usage","Gap Analysis","Readability"];const s=e.name&&n.includes(e.name)?e.name:t[a]||"Score "+(a+1);if(s==="Tags Usage"){if(e.value==="-")return"Tags: Not analyzed";if(e.value==="Analyzing...")return"Tags: Analyzing...";return`Tags (Score: ${e.value}%)`}if(s==="Gap Analysis"){if(e.value==="-")return"Gap: Not analyzed";if(e.value==="Analyzing...")return"Gap: Analyzing...";return`Gap (Score: ${e.value}%)`}if(s==="Readability"){if(e.value==="-")return"Readability: Not analyzed";if(e.value==="Analyzing...")return"Readability: Analyzing...";return`Readability (Score: ${e.value}%)`}return`${s}: ${e.value==="-"?"Not analyzed":e.value==="Analyzing..."?"Analyzing...":e.value+"%"}`})).join("\n"),style:{cursor:"help",display:"inline-flex",alignItems:"center",fontSize:"14px"}},i.map(((e,a)=>n("span",{key:a,style:l(e.value,e.name)}))),n("span",{style:{marginLeft:"5px",fontWeight:"bold",color:p}},u))),n("td",{style:{padding:"8px 12px",textAlign:"center"}},g==="N/A"||g==="Analyzing..."?n("span",{style:{color:"#666",fontSize:"14px"}},g):n("div",{style:{position:"relative",width:"100px",height:"20px",backgroundColor:"#f0f0f0",borderRadius:"10px",overflow:"hidden",margin:"0 auto"}},n("div",{style:{position:"absolute",left:0,top:0,height:"100%",width:`${g}%`,background:"linear-gradient(90deg, #d1d5db, #e5e7eb)",transition:"width 0.3s ease",borderRadius:"10px"}}))),n("td",{className:"epkb-ai-table-title epkb-ai-table-title-clickable"},n("div",{className:"epkb-ai-title-link-wrapper",style:{cursor:"pointer",position:"relative",display:"inline-block"},onClick:()=>{if(window.EPKB_AI_ContentAnalysis&&window.EPKB_AI_ContentAnalysis.handleImproveItem){const a={id:e.item_id||e.id,title:e.title,score:e.score,importance:e.importance,scoreComponents:e.scoreComponents,last_analyzed:e.last_analyzed,status:e.status||e.display_status,edit_link:`${window.epkb_ai_api.admin_url}post.php?post=${e.item_id}&action=edit`,view_link:e.view_link,is_demo:e.is_demo||false};window.EPKB_AI_ContentAnalysis.handleImproveItem(e.item_id||e.id,a)}},onMouseEnter:e=>{const a=e.currentTarget.querySelector(".epkb-ai-detail-icon");if(a)a.style.opacity="1"},onMouseLeave:e=>{const a=e.currentTarget.querySelector(".epkb-ai-detail-icon");if(a)a.style.opacity="0"}},n("span",{className:"epkb-ai-title-text",style:{color:"#2271b1"}},e.title),n("span",{className:"epkbfa epkbfa-external-link epkb-ai-detail-icon",style:{marginLeft:"6px",fontSize:"11px",color:"#2271b1",opacity:"0",transition:"opacity 0.2s ease"},title:c("View detailed analysis","echo-knowledge-base")}))),n("td",{className:"epkb-ai-table-status"},se==="recent"?(()=>{const a=e.updated;if(!a)return"-";try{const e=new Date(a);const t=new Date;const n=t-e;const s=Math.floor(n/(1e3*60*60*24));if(s===0){return c("Today","echo-knowledge-base")}else if(s===1){return c("Yesterday","echo-knowledge-base")}else if(s<7){return s+" "+c("days ago","echo-knowledge-base")}else if(s<30){const e=Math.floor(s/7);return e+" "+(e===1?c("week ago","echo-knowledge-base"):c("weeks ago","echo-knowledge-base"))}else{return e.toLocaleDateString()}}catch(e){return a}})():(()=>{const a=e.display_status||"To Improve";const t=e.status==="error"||!!e.error_message;let s={padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"500"};switch(a){case"To Analyze":s.backgroundColor="#fef2e0";s.color="#b85700";break;case"Ignored":s.backgroundColor="#f0f0f0";s.color="#666";break;case"Done":s.backgroundColor="#e0f5e0";s.color="#2a6d2a";break;case"To Improve":default:s.backgroundColor="#e3f2fd";s.color="#1976d2";break}if(t&&e.error_message){return n("button",{style:{...s,backgroundColor:"#fdecea",color:"#b3261e",border:"none",cursor:"pointer",textDecoration:"underline",backgroundImage:"none"},onClick:a=>{a.stopPropagation();const t=e.title||c("Content Analysis Error","echo-knowledge-base");const n=e.error_message||c("Unknown error occurred","echo-knowledge-base");if(window.EPKB_AI_ContentAnalysisErrorDialog&&typeof window.EPKB_AI_ContentAnalysisErrorDialog.show==="function"){window.EPKB_AI_ContentAnalysisErrorDialog.show(e.item_id||e.id,t,n)}}},c("ERROR","echo-knowledge-base"))}return n("span",{style:s},c(a,"echo-knowledge-base"))})()))})))),(fe||ye)&&n("div",{className:"epkb-ai-search-message",style:{textAlign:"center",padding:"10px",color:"#666",fontStyle:"italic"}},ye?c("Searching...","echo-knowledge-base"):fe),(()=>{if(V<=1){return null}return n("div",{className:"epkb-ai-pagination"},n("button",{disabled:Y===1,onClick:()=>Q(Y-1),className:"epkb-ai-button epkb-ai-button-secondary"},c("Previous","echo-knowledge-base")),n("span",{className:"epkb-ai-page-info"},`${c("Page","echo-knowledge-base")} ${Y} ${c("of","echo-knowledge-base")} ${V}`),n("button",{disabled:Y===V,onClick:()=>Q(Y+1),className:"epkb-ai-button epkb-ai-button-secondary"},c("Next","echo-knowledge-base")))})())))};window.EPKB_AI_ContentAnalysisTable=h;class b{constructor(){this.container=null;this.root=null}show(e,a,t){if(!this.container){this.container=document.createElement("div");this.container.id="epkb-ai-content-analysis-error-dialog-root";document.body.appendChild(this.container);const{render:e,unmountComponentAtNode:a}=wp.element;const t=wp.element;if(typeof t.createRoot==="function"){this.root=t.createRoot(this.container)}else if(typeof r==="function"){this.root=r(this.container)}else if(typeof e==="function"){this.root={render:a=>e(a,this.container),unmount:()=>{if(typeof a==="function"){a(this.container)}else{this.container.innerHTML=""}}}}}this.renderDialog({id:e,title:a,errorMessage:t})}renderDialog(e){const{id:a,title:t,errorMessage:s}=e;const o=n("div",{className:"epkb-ai-view-content-dialog-overlay",onClick:e=>{if(e.target.className==="epkb-ai-view-content-dialog-overlay"){this.close()}}},n("div",{className:"epkb-ai-view-content-dialog",style:{maxWidth:"600px"}},n("div",{className:"epkb-ai-dialog-header",style:{position:"relative"}},n("h3",null,c("Content Analysis Error","echo-knowledge-base")),n("span",{style:{position:"absolute",right:"50px",top:"50%",transform:"translateY(-50%)",fontSize:"14px",color:"#666",fontWeight:"normal"}},n("strong",null,c("Article ID:","echo-knowledge-base"))," ",a),n("button",{className:"epkb-ai-dialog-close",onClick:()=>this.close(),"aria-label":c("Close","echo-knowledge-base")},n("span",{className:"epkbfa epkbfa-times"}))),n("div",{className:"epkb-ai-dialog-body"},n("div",{className:"epkb-ai-error-content",style:{textAlign:"center",padding:"20px"}},n("div",{className:"epkb-ai-error-icon"},n("span",{className:"epkbfa epkbfa-exclamation-triangle",style:{fontSize:"48px",color:"#d54e21"}})),n("h4",{style:{marginTop:"20px",marginBottom:"10px"}},t),n("p",{style:{color:"#d54e21",marginTop:"15px"}},c("Error Processing Content Analysis","echo-knowledge-base")),n("div",{className:"epkb-ai-error-message",style:{marginTop:"15px",padding:"15px",backgroundColor:"#fef2f2",border:"1px solid #fee",borderRadius:"4px"}},n("p",{style:{margin:0,color:"#666"}},s)),n("div",{style:{marginTop:"20px"}},n("p",{style:{fontSize:"14px",color:"#666"}},c("This article could not be analyzed. Please try again or check the article content for issues.","echo-knowledge-base")))))));if(this.root&&typeof this.root.render==="function"){this.root.render(o)}}close(){if(this.root&&typeof this.root.unmount==="function"){this.root.unmount();this.root=null}else if(this.container){const{unmountComponentAtNode:e}=wp.element;if(typeof e==="function"){e(this.container)}else{this.container.innerHTML=""}}if(this.container&&this.container.parentNode){this.container.parentNode.removeChild(this.container);this.container=null}}}window.EPKB_AI_ContentAnalysisErrorDialog=new b})();