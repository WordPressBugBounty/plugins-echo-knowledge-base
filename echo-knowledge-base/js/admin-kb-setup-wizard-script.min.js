jQuery(document).ready((function(e){let t=e("#epkb-config-wizard-content");if(t.length<=0){return}let i=e(".epkb-admin__error-form__container");t.find(".epkb-setup-wizard-button-apply").on("click",(function(i){let a=[];let s={action:"epkb_apply_setup_wizard_changes",_wpnonce_epkb_ajax_action:e("#_wpnonce_epkb_ajax_action").val(),epkb_wizard_kb_id:e("#epkb_wizard_kb_id").val(),sidebar_selection:"0"};let o=e('input[name="epkb-layout"]:checked').val();if(typeof o=="undefined"){o=""}if(e(".epkb-menu-checkbox input[type=checkbox]:checked").length){e(".epkb-menu-checkbox input[type=checkbox]:checked").each((function(){a.push(e(this).prop("name").split("epkb_menu_")[1])}))}if(e(".epkb-setup-wizard-sidebar input[type=radio]:checked").length){s.sidebar_selection=e(".epkb-setup-wizard-sidebar .epkb-setup-wizard__featured-img-container--active").data("value")}let p=e("input[name=categories_articles_sidebar_location]:checked").val();if(typeof p=="undefined"){p=""}let n=e(".epkb-setup-wizard-step-container--modules .epkb-setup-wizard-module-row .epkb-setup-wizard-module-row-toggle");let d=typeof n[0]=="undefined"?"":e(n[0]).find("input:checked").val();let r=typeof n[1]=="undefined"?"":e(n[1]).find("input:checked").val();let l=typeof n[2]=="undefined"?"":e(n[2]).find("input:checked").val();let c=typeof n[3]=="undefined"?"":e(n[3]).find("input:checked").val();let b=typeof n[4]=="undefined"?"":e(n[4]).find("input:checked").val();let k=e(".epkb-setup-wizard-step-container--presets .epkb-setup-wizard-module-settings-row--active input:checked").val();if(typeof k=="undefined"){k=""}if(k.length&&!t.hasClass("epkb-config-setup-wizard-modular--first-setup")){let t=e('[name="epkb-setup-wizard-theme-content-show-option__toggle"]');let i=t.closest(".epkb-setup-wizard-theme-content-show-option").data("current-layout");if(!t.prop("checked")&&i===o){k="current"}}s.layout_name=o;s.kb_name=e(".epkb-wizard-name input").val();s.kb_slug=e(".epkb-wizard-slug input").val();s.menu_ids=a;s.categories_articles_sidebar_location=p;s.row_1_module=d;s.row_2_module=r;s.row_3_module=l;s.row_4_module=c;s.row_5_module=b;s.categories_articles_preset_name=k;s.kb_main_page_type=e('[name="epkb-main-page-type"]').length?e('[name="epkb-main-page-type"]:checked').val():"";u(s)}));t.find(".epkb-setup-wizard-button-next, .epkb-setup-wizard-button-prev").on("click",(function(t){t.preventDefault();let i=Number(e(this).val());a(i)}));e(document).on("click",".epkb-setup-wizard-step-tab",(function(){let t=Number(e(this).data("step"));a(t)}));function a(t){n(t);e(".epkb-wc-step-header").removeClass("epkb-wc-step-header--active");const i=e(".epkb-wc-step-header--"+t);i.addClass("epkb-wc-step-header--active");o(t);const a=e(".epkb-config-setup-wizard-modular .epkb-setup-wizard-theme-content-show-option");if(a.length>0&&i.hasClass("epkb-wc-step-header--design")){let t=e('.epkb-config-setup-wizard-modular input[name="epkb-layout"]:checked').val();if(typeof t=="undefined"){t=""}const i=e(".epkb-config-setup-wizard-modular .epkb-wizard-content .eckb-wizard-step-design");a.show();if(e(".epkb-config-setup-wizard-modular input[name=epkb-setup-wizard-theme-content-show-option__toggle]").prop("checked")){i.addClass("epkb-wc-step-panel--active")}else{i.removeClass("epkb-wc-step-panel--active")}}d()}e(document).on("change",".epkb-config-setup-wizard-modular input[name=epkb-setup-wizard-theme-content-show-option__toggle]",(function(){const t=e(".epkb-config-setup-wizard-modular .epkb-wizard-content .eckb-wizard-step-design");if(e(this).prop("checked")){t.addClass("epkb-wc-step-panel--active")}else{t.removeClass("epkb-wc-step-panel--active")}}));function s(){const t=e(".epkb-setup-wizard-sidebar input[name=article_navigation]:checked").val();const i=e(".epkb-setup-wizard-sidebar input[name=article_location]:checked").val();let a=7;if(t==="categories_articles"){a=i==="left"?1:2}else if(t==="top_categories"){a=i==="left"?3:4}else if(t==="current_category_articles"){a=i==="left"?5:6}e(".epkb-setup-wizard-sidebar .epkb-setup-wizard__featured-img-container").removeClass("epkb-setup-wizard__featured-img-container--active");e(`.epkb-setup-wizard-sidebar .epkb-setup-wizard__featured-img-container[data-value=${a}]`).addClass("epkb-setup-wizard__featured-img-container--active")}e(document).on("change",".epkb-setup-wizard-sidebar input[name=article_navigation]",s);e(document).on("change",".epkb-setup-wizard-sidebar input[name=article_location]",s);function o(t){e(".epkb-wc-step-panel").removeClass("epkb-wc-step-panel--active");e(".eckb-wizard-step-"+t).addClass("epkb-wc-step-panel--active");e(".epkb-wc-step-panel-button").removeClass("epkb-wc-step-panel-button--active");let i=e(".epkb-wizard-content .epkb-wc-step-panel").length;if(t===1){e(".epkb-wsb-step-1-panel-button").addClass("epkb-wc-step-panel-button--active")}if(t!==1&&t<i){let i=e(".epkb-wsb-step-2-panel-button");i.addClass("epkb-wc-step-panel-button--active");i.find(".epkb-setup-wizard-button-prev").val(t-1);i.find(".epkb-setup-wizard-button-next").val(t+1)}if(t===i){e(".epkb-wsb-step-3-panel-button").addClass("epkb-wc-step-panel-button--active")}}function p(i){t.find(".epkb-wizard-status-bar .epkb-wsb-step").removeClass("epkb-wsb-step--completed");t.find(".epkb-wizard-status-bar .epkb-wsb-step").each((function(){let t=e(this).attr("id");let a=t[t.length-1];if(a<i){e(this).addClass("epkb-wsb-step--completed")}}))}function n(e){t.find(".epkb-setup-wizard-step-tab").removeClass("epkb-setup-wizard-step-tab--active epkb-setup-wizard-step-tab--completed");let i=t.find(".epkb-setup-wizard-step-tab--"+e);i.addClass("epkb-setup-wizard-step-tab--active");i.prevAll(".epkb-setup-wizard-step-tab").addClass("epkb-setup-wizard-step-tab--completed")}function d(){e("html, body").animate({scrollTop:0},0)}e(".epkb-setup-wizard-step__item-description__option__label").on("click",(function(){e(this).closest(".epkb-wc-step-panel").find(".epkb-setup-option-container").removeClass("epkb-setup-option-container--active");e(this).closest(".epkb-setup-wizard-step__item-content").find(".epkb-setup-option-container").addClass("epkb-setup-option-container--active")}));e(".epkb-setup-wizard-features-choice__option__label").on("click",(function(){e(this).closest(".epkb-wc-step-panel").find(".epkb-setup-wizard-features-choice").removeClass("epkb-setup-wizard-features-choice--active");e(this).closest(".epkb-setup-wizard-features-choice").addClass("epkb-setup-wizard-features-choice--active")}));e(".eckb-wizard-step-layout .epkb-setup-option__featured-img, .epkb-setup-wizard-features-choice img").on("click",(function(){let t=e(this).attr("src");let i=`\n\t\t\t<div class="epkb-config-wizard-image-popup-overlay">\n\t\t\t\t<div class="epkb-config-wizard-image-popup-container">\n\t\t\t\t\t<img src="${t}" alt="">\n\t\t\t\t\t<span class="epkb-config-wizard-image-close-popup">&times;</span>\n\t\t\t\t</div>\n\t\t\t</div>`;e("body").append(i);e(".epkb-config-wizard-image-popup-container").click((function(){e(this).toggleClass("epkb-zoomed")}));e(".epkb-config-wizard-image-close-popup").click((function(){e(".epkb-config-wizard-image-popup-overlay").remove();s()}));const a=t=>{$target=e(t.target);if(!$target.closest(".epkb-config-wizard-image-popup-container").length&&e(".epkb-config-wizard-image-popup-container").is(":visible")){e(".epkb-config-wizard-image-popup-overlay").remove();s()}};const s=()=>{document.removeEventListener("click",a)};setTimeout((function(){document.addEventListener("click",a)}),10)}));e('.epkb-wizard-slug input[type="text"]').on("input",(function(){e("#epkb-wizard-slug-target").text(e(this).val())}));(function(){let t=e(".epkb-setup-wizard-module-row--resource-link--disabled");if(t.length){e(".epkb-setup-wizard-hidden-rows-title").addClass("epkb-setup-wizard-hidden-rows-title--active");let i=t.closest(".epkb-setup-wizard-module-rows-list");i.append(t)}})();e(document).on("change",".epkb-setup-wizard-module-row-toggle input",(function(){let i=e(this).val();let a=e(this).closest(".epkb-setup-wizard-module-row");let s=a.data("row-module");let o=t.find(".epkb-setup-wizard-step-container--presets");let p=t.find(".epkb-setup-wizard-step-container--layout");let n=e(this).closest(".epkb-setup-wizard-module-rows-list");if(i==="none"){a.removeClass("epkb-setup-wizard-module-row--active");n.append(a);a.removeClass("epkb-setup-wizard-module-row--activated");a.addClass("epkb-setup-wizard-module-row--inactivated");setTimeout((()=>{a.removeClass("epkb-setup-wizard-module-row--inactivated")}),3e4)}else{a.addClass("epkb-setup-wizard-module-row--active");let e=n.find('.epkb-setup-wizard-module-row--active:not([data-row-module="'+s+'"])').last();if(e.length){a.insertAfter(e)}else{n.prepend(a)}a.removeClass("epkb-setup-wizard-module-row--inactivated");a.addClass("epkb-setup-wizard-module-row--activated");setTimeout((()=>{a.removeClass("epkb-setup-wizard-module-row--activated")}),3e4)}if(e(".epkb-setup-wizard-step-container--modules .epkb-setup-wizard-module-row").length-e(".epkb-setup-wizard-step-container--modules .epkb-setup-wizard-module-row--active").length){e(".epkb-setup-wizard-hidden-rows-title").addClass("epkb-setup-wizard-hidden-rows-title--active")}else{e(".epkb-setup-wizard-hidden-rows-title").removeClass("epkb-setup-wizard-hidden-rows-title--active")}if(s==="categories_articles"){if(i==="none"){p.addClass("epkb-setup-wizard-step-container--hide");o.addClass("epkb-setup-wizard-step-container--hide");t.find(".epkb-setup-wizard-no-categories-articles-message").addClass("epkb-setup-wizard-no-categories-articles-message--active")}else{p.removeClass("epkb-setup-wizard-step-container--hide");o.removeClass("epkb-setup-wizard-step-container--hide");t.find(".epkb-setup-wizard-no-categories-articles-message").removeClass("epkb-setup-wizard-no-categories-articles-message--active")}}}));e(document).on("click",".epkb-setup-wizard-module-row-sequence",(function(){let t=e(this).closest(".epkb-setup-wizard-module-row");if(!t.hasClass("epkb-setup-wizard-module-row--active")){return}t.addClass("epkb-setup-wizard-module-row--selected");setTimeout((()=>{t.removeClass("epkb-setup-wizard-module-row--selected")}),3e4);if(e(this).hasClass("epkb-setup-wizard-module-row-sequence--up")){let e=t.prev();if(e.length){t.slideUp(500,(function(){t.insertBefore(e);t.slideDown(500)}))}}else{let e=t.next();if(e.length&&e.hasClass("epkb-setup-wizard-module-row--active")){t.slideUp(500,(function(){t.insertAfter(e);t.slideDown(500)}))}}}));e(document).on("change",".epkb-setup-wizard-module-sidebar-selector input",(function(){let t=e(this).closest(".epkb-setup-wizard-step-container--modules");t.find(".epkb-setup-wizard-module-sidebar").removeClass("epkb-setup-wizard-module-sidebar--active");t.find(".epkb-setup-wizard-module--categories_articles").removeClass("epkb-setup-wizard-module-sidebar--active");if(e(this).val()==="left"){t.find(".epkb-setup-wizard-module-sidebar--left").addClass("epkb-setup-wizard-module-sidebar--active");t.find(".epkb-setup-wizard-module--categories_articles").addClass("epkb-setup-wizard-module-sidebar--active")}if(e(this).val()==="right"){t.find(".epkb-setup-wizard-module-sidebar--right").addClass("epkb-setup-wizard-module-sidebar--active");t.find(".epkb-setup-wizard-module--categories_articles").addClass("epkb-setup-wizard-module-sidebar--active")}}));e(document).on("change",'.epkb-setup-wizard-step-container--layout input[name="epkb-layout"]',(function(){let i=e(this).val();let a=t.find(".epkb-setup-wizard-step-container--modules");a.find(".epkb-setup-wizard-module--categories_articles").find(".epkb-setup-wizard-module-layout").removeClass("epkb-setup-wizard-module-layout--active");a.find(".epkb-setup-wizard-module--categories_articles").find(".epkb-setup-wizard-module-layout--"+i).addClass("epkb-setup-wizard-module-layout--active");let s=t.find(".epkb-setup-wizard-step-container--presets");s.find(".epkb-setup-wizard-module-layout").removeClass("epkb-setup-wizard-module-layout--active");s.find(".epkb-setup-wizard-module-settings-row").removeClass("epkb-setup-wizard-module-settings-row--active");s.find(".epkb-setup-wizard-module-layout--"+i).addClass("epkb-setup-wizard-module-layout--active");s.find(".epkb-setup-wizard-module-settings-row--"+i).addClass("epkb-setup-wizard-module-settings-row--active");r(i)}));function r(i){let a=t.find(".epkb-setup-wizard-option__navigation-selector");let s=a.data("hide-none-on-layout");let o=a.data("current-value");if(typeof s!=="undefined"&&i===s){a.find('[name="article_navigation"][value="none"]').parent(".epkb-input-container").hide();if(o==="none"){e(a.find('[name="article_navigation"]')[0]).prop("checked",true).trigger("change")}else{a.find('[name="article_navigation"][value="'+o+'"]').prop("checked",true).trigger("change")}}else{a.find('[name="article_navigation"][value="none"]').parent(".epkb-input-container").show().trigger("change");a.find('[name="article_navigation"][value="'+o+'"]').prop("checked",true).trigger("change")}}r(t.find('.epkb-setup-wizard-step-container--layout input[name="epkb-layout"]:checked').val());e(document).on("change",".epkb-setup-wizard-module-preset-selector input",(function(){let i=e(this).val();let a=t.find(".epkb-setup-wizard-step-container--presets");let s=a.find(".epkb-setup-wizard-module-layout--active");s.find(".epkb-setup-wizard-module-preset").removeClass("epkb-setup-wizard-module-preset--active");s.find(".epkb-setup-wizard-module-preset--"+i).addClass("epkb-setup-wizard-module-preset--active")}));function l(t,i){if(t==="show"){let t='<div class="epkb-admin-dialog-box-loading">'+'<div class="epkb-admin-dbl__header">'+'<div class="epkb-admin-dbl-icon epkbfa epkbfa-hourglass-half"></div>'+(i?'<div class="epkb-admin-text">'+i+"</div>":"")+"</div>"+"</div>"+'<div class="epkb-admin-dialog-box-overlay"></div>';e("body").append(t)}else if(t==="remove"){e(".epkb-admin-dialog-box-loading").remove();e(".epkb-admin-dialog-box-overlay").remove()}}function c(e,t,i){return'<div class="eckb-bottom-notice-message">'+'<div class="contents">'+'<span class="'+i+'">'+(e?"<h4>"+e+"</h4>":"")+(t?t:"")+"</span>"+"</div>"+"</div>"}function u(a){let s;let o;let p=t.hasClass("epkb-config-setup-wizard-modular--first-setup")&&parseInt(e("#epkb_wizard_kb_id").val())===1?epkb_vars.creating_demo_data:epkb_vars.saving_changes;e.ajax({type:"POST",dataType:"json",data:a,url:ajaxurl,beforeSend:function(e){l("show",p)}}).done((function(t){o=t?t:"";l("remove","");if(o.error||typeof o.message==="undefined"){s=o.message?o.message:c("",epkb_vars.reload_try_again,"error");e(i).find(".epkb-admin__error-form__title").text(epkb_vars.setup_wizard_error_title);e(i).find(".epkb-admin__error-form__desc").text(epkb_vars.setup_wizard_error_desc);e(i).find("#epkb-admin__error-form__message").val("Setup Wizard: "+e(s).text().trim());e(i).css("display","block","important");return}if(o.redirect_to_url&&o.redirect_to_url.length>0){e("#epkb-wizard-success-message").addClass("epkb-dialog-box-form--active");e("#epkb-wizard-success-message .epkb-accept-button").on("click",(function(){window.location=o.redirect_to_url}))}})).fail((function(){l("remove","");let t=window.location.href;let i=t.replace("&page=epkb-kb-configuration&setup-wizard-on","&page=epkb-dashboard&epkb_after_kb_setup");e("#epkb-wizard-success-message").addClass("epkb-dialog-box-form--active");e("#epkb-wizard-success-message .epkb-accept-button").on("click",(function(){window.location=i}))}))}(function(){t.on("click",".epkb__option-tooltip__button",(function(){const t=e(this).parent().find(".epkb__option-tooltip__contents");let a=t.css("display")=="block";t.fadeOut();if(!a){clearTimeout(i);t.fadeIn()}}));let i;t.on("mouseenter",".epkb__option-tooltip__button, .epkb__option-tooltip__contents",(function(){const t=e(this).parent().find(".epkb__option-tooltip__contents");clearTimeout(i);t.fadeIn()}));t.on("mouseleave",".epkb__option-tooltip__button, .epkb__option-tooltip__contents",(function(){const t=e(this).parent().find(".epkb__option-tooltip__contents");i=setTimeout((function(){t.fadeOut()}),1e3)}));t.find("#epkb-wsb-step-2-panel .epkb-setup-wizard-module-row .epkb-setup-wizard-module-row-toggle .epkb-radio-buttons-container .epkb-input-container").each((function(t,i){const a=e(i).find("input.epkb-input").val();if(a==="none"){e(i).find("label.epkb-label").attr("data-tooltip","Hide Row")}else{e(i).find("label.epkb-label").attr("data-tooltip","Show Row")}}));t.find("#epkb-wsb-step-2-panel .epkb-setup-wizard-module-row .epkb-setup-wizard-module-row-right-settings .epkb-setup-wizard-module-row--resource-links-activate").on("click",(function(t){e("#epkb-dialog-pro-feature-ad-resource-links").addClass("epkb-dialog-pro-feature-ad--active")}));t.find("#epkb-wsb-step-3-panel .epkb-setup-wizard-step__item .epkb-setup-wizard-step__item-description .epkb-setup-wizard-step__item-description__button-pro").on("click",(function(t){const i=e(this).data("target");e("#"+i).addClass("epkb-dialog-pro-feature-ad--active")}));t.find(".epkb-dialog-pro-feature-ad .epkb-dbf__close").on("click",(function(){e(this).closest(".epkb-dialog-pro-feature-ad").removeClass("epkb-dialog-pro-feature-ad--active")}));e(document).on("click",(function(t){let i=e(t.target);if(!i.closest(".epkb-setup-wizard-module-row--resource-links-activate").length&&!i.closest(".epkb-dialog-pro-feature-ad").length&&!i.closest(".epkb-setup-wizard-step__item-description__button-pro").length){e(".epkb-dialog-pro-feature-ad").removeClass("epkb-dialog-pro-feature-ad--active")}}));t.find(".eckb-wizard-step-2 .epkb-setup-option__featured-img-container").on("click",(function(i){i.preventDefault();i.stopPropagation();t.find(".image_zoom").remove();var a;var s=e(this).find("img");if(s.length>1){a=e(s[0]).is(":visible")?e(s[0]).attr("src"):e(s[1]).is(":visible")?e(s[1]).attr("src"):e(s[2]).attr("src")}else{a=e(this).find("img").attr("src")}e(this).after(""+'<div id="epkb_image_zoom" class="epkb-setup-wizard-image_zoom">'+'<div class="epkb-setup-wizard-image_zoom__content">'+'<img src="'+a+'" class="epkb-setup-wizard-image_zoom__image">'+'<span class="epkb-setup-wizard-image_zoom__close epkbfa epkbfa-close"></span>'+"</div>"+"</div>"+"");let o=e(document).scrollTop();e("html, body").css({overflow:"hidden"});e("html, body").on("click",(function(){e("#epkb_image_zoom").remove();e(this).css({overflow:"initial"}).off("click").animate({scrollTop:o},0)}))}))})();e(document).on("click",".epkb-close-notice",(function(){e(this).parent().addClass("fadeOutDown")}));e(i).on("click",".epkb-close-notice, .epkb-admin__error-form__btn-cancel",(function(){window.location=epkb_vars.need_help_url}));e(i).find("#epkb-admin__error-form").on("submit",(function(t){t.preventDefault();let a=e(this);e.ajax({type:"POST",dataType:"json",url:ajaxurl,data:a.serialize(),beforeSend:function(t){a.find(".epkb-admin__error-form__btn-wrap, input, label, textarea").slideUp("fast");e(i).find(".epkb-admin__error-form__response").addClass("epkb-admin__error-form__response--active");e(i).find(".epkb-admin__error-form__response").html(epkb_vars.sending_error_report)}}).done((function(t){if(typeof t.success!=="undefined"&&t.success==false){e(i).find(".epkb-admin__error-form__response").html(t.data)}else if(typeof t.success!=="undefined"&&t.success==true){e(i).find(".epkb-admin__error-form__response").html(t.data)}else{e(i).find(".epkb-admin__error-form__response").html(epkb_vars.send_report_error)}})).fail((function(t,a,s){e(i).find(".epkb-admin__error-form__response").html(epkb_vars.send_report_error)})).always((function(){e(i).find("input, textarea").prop("disabled",false);setTimeout((function(){window.location=epkb_vars.need_help_url}),1e3)}))}));e(document).on("click",".epkb-notice-dismiss",(function(t){t.preventDefault();e("#"+e(this).data("notice-id")).slideUp();var i={action:"epkb_dismiss_ongoing_notice",epkb_dismiss_id:e(this).data("notice-id")};e.ajax({type:"POST",dataType:"json",url:ajaxurl,data:i})}))}));