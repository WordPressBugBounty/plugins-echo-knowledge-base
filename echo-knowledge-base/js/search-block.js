!function(){"use strict";var e={n:function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,{a:n}),n},d:function(t,n){for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.wp.blocks,n=window.wp.element,o=window.wp.components,l=window.wp.blockEditor,a=window.wp.serverSideRender,s=e.n(a),r=window.wp.data,i=window.ReactJSXRuntime;function c({block_ui_config:e,attributes:t,setAttributes:a,blockName:c}){const{select:p}=wp.data,{editPost:b}=(0,r.useDispatch)("core/editor"),u=p("core"),_=p("core/editor"),d=_.getEditedPostAttribute("template"),m=u.getEntityRecord("postType",_.getCurrentPostType(),_.getCurrentPostId())?.template,f=d===e.settings.kb_block_page_template,[x,g]=(0,n.useState)({}),k=Object.fromEntries(Object.values(e).filter(e=>e.groups).flatMap(e=>Object.values(e.groups)).filter(e=>e.fields).flatMap(e=>Object.entries(e.fields)).map(([e,t])=>[e,t.setting_type])),h=(0,l.useBlockProps)({onClickCapture:e=>{const t=e.target.closest("a");t&&t.closest(".eckb-block-editor-preview")&&!t.closest(".eckb-kb-no-content")&&!t.closest("#eckb-kb-faqs-not-assigned")&&e.preventDefault()}});function j(e){return"number"==typeof e?e:parseInt(e)}function N(e){let n=!0;return e.hide_on_dependencies&&Object.entries(e.hide_on_dependencies).forEach(([e,o])=>{e in k&&k[e].length&&t[e]===o&&(n=!1)}),e.hide_on_selection_amount_dependencies&&Object.entries(e.hide_on_selection_amount_dependencies).forEach(([e,o])=>{e in k&&k[e].length&&t[e].length===o&&(n=!1)}),n}return document.getElementById("echo-knowledge-base-block-editor-inline-css")&&document.getElementById("echo-knowledge-base-block-editor-inline-css").remove(),(0,n.useEffect)(()=>{Object.values(e).filter(e=>e.groups).flatMap(e=>Object.values(e.groups)).filter(e=>e.fields).flatMap(e=>Object.entries(e.fields)).filter(([,e])=>"template_toggle"===e.setting_type).map(([e])=>e).forEach(e=>{f&&"on"!==t[e]?a({[e]:"on"}):f||"on"!==t[e]||a({[e]:"off"})})},[f,t,e,a]),(0,i.jsxs)("div",{...h,children:[(0,i.jsx)(l.InspectorControls,{children:(0,i.jsx)(o.Panel,{className:"epkb-block-editor-controls",children:(0,i.jsx)(o.TabPanel,{className:"epkb-block-editor-tabpanel",tabs:Object.entries(e).map(([e,t])=>({name:e,title:t.title,icon:t.icon,groups:t.groups})),children:n=>(0,i.jsx)(React.Fragment,{children:Object.entries(n.groups).map(([n,{title:s,fields:r}])=>{const c=Object.entries(r).filter(([e,t])=>N(t));if(!c.length)return null;const p="string"==typeof n&&""!==n.trim()?" epkb-"+n:"";return(0,i.jsx)(o.PanelBody,{title:s,className:"epkb-block-ui-section"+p,children:c.map(([n,s])=>{if(!N(s))return null;const r=function(e){let n=!1;return e.disable_on_dependencies&&Object.entries(e.disable_on_dependencies).forEach(([e,o])=>{t[e]===o&&(n=!0)}),n}(s);switch(s.setting_type){case"text":return(0,i.jsx)(o.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,disabled:r,label:s.label,value:t[n],onChange:e=>a({[n]:e}),help:s.description||"",className:"epkb-block-ui-text-control"},n);case"number":return(0,i.jsx)(o.__experimentalNumberControl,{__next40pxDefaultSize:!0,disabled:r,isShiftStepEnabled:!0,shiftStep:1,min:s.min,max:s.max,label:s.label,value:""===t[n]||Number.isNaN(parseInt(t[n]))?1:parseInt(t[n]),onChange:e=>a({[n]:""===e||Number.isNaN(parseInt(e))?1:parseInt(e)}),className:"epkb-block-ui-number-control"},n);case"color":return(0,i.jsx)(l.PanelColorSettings,{colorSettings:[{value:t[n],onChange:e=>a({[n]:e}),enableAlpha:!0,label:s.label}],className:"epkb-block-ui-color-control"},n);case"select_buttons_string":return(0,i.jsx)(o.__experimentalToggleGroupControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,isBlock:!0,label:s.label,onChange:e=>a({[n]:e}),value:void 0!==t[n]?t[n]:s.default,className:"epkb-block-ui-select-buttons-control",children:Object.entries(s.options).map(([e,t])=>(0,i.jsx)(o.__experimentalToggleGroupControlOption,{label:t,value:e},e))},n);case"select_buttons_icon":return(0,i.jsx)(o.__experimentalToggleGroupControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,isBlock:!0,label:s.label,onChange:e=>a({[n]:e}),value:void 0!==t[n]?t[n]:s.default,className:"epkb-block-ui-select-buttons-control",children:Object.entries(s.options).map(([e,t])=>(0,i.jsx)(o.__experimentalToggleGroupControlOptionIcon,{icon:(0,i.jsx)("span",{className:"epkbfa "+t.icon_class}),label:t.label,value:e},e))},n);case"select_buttons":return(0,i.jsx)(o.__experimentalToggleGroupControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,isBlock:!0,label:s.label,onChange:e=>a({[n]:j(e)}),value:void 0!==t[n]?j(t[n]):j(s.default),className:"epkb-block-ui-select-buttons-control",children:Object.entries(s.options).map(([e,t])=>(0,i.jsx)(o.__experimentalToggleGroupControlOption,{label:t,value:"number"==typeof e?e:parseInt(e)},e))},n);case"toggle":return(0,i.jsx)(o.ToggleControl,{disabled:r,__nextHasNoMarginBottom:!0,label:s.label,checked:"on"===t[n],onChange:e=>a({[n]:e?"on":"off"}),className:"epkb-block-ui-toggle-control"},n);case"custom_toggle":return(0,i.jsx)(o.ToggleControl,{disabled:r,__nextHasNoMarginBottom:!0,label:s.label,checked:t[n]===s.options.on,onChange:e=>a({[n]:e?s.options.on:s.options.off}),className:"epkb-block-ui-toggle-control"},n);case"template_toggle":return(0,i.jsx)(o.ToggleControl,{disabled:r,__nextHasNoMarginBottom:!0,label:s.label,checked:f,onChange:t=>{a({[n]:t?"on":"off"}),b(t?{template:e.settings.kb_block_page_template}:{template:m===e.settings.kb_block_page_template?"":m})},className:"epkb-block-ui-toggle-control"},n);case"range":return(0,i.jsx)(o.RangeControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,disabled:r,isShiftStepEnabled:!0,shiftStep:1,min:s.min,max:s.max,label:s.label,value:""===t[n]||Number.isNaN(parseInt(t[n]))?parseInt(s.default):parseInt(t[n]),onChange:e=>a({[n]:""===e||Number.isNaN(parseInt(e))?1:parseInt(e)}),className:"epkb-block-ui-range-control",help:(0,i.jsxs)(i.Fragment,{children:[s.description&&(0,i.jsx)("span",{className:"epkb-help-description",children:s.description}),s.help_text&&(0,i.jsxs)("span",{className:"epkb-help-text",children:[s.help_text," ",(0,i.jsx)("a",{href:s.help_link_url,target:"_blank",rel:"noopener noreferrer",children:s.help_link_text})]})]})},n);case"range_float":return(0,i.jsx)(o.RangeControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,disabled:r,isShiftStepEnabled:!0,shiftStep:.05,step:.05,min:s.min,max:s.max,label:s.label,value:""===t[n]||Number.isNaN(parseFloat(t[n]))?parseFloat(s.default):parseFloat(t[n]),onChange:e=>a({[n]:""===e||Number.isNaN(parseFloat(e))?parseFloat(s.default).toFixed(2):parseFloat(e).toFixed(2)}),className:"epkb-block-ui-range-control",help:(0,i.jsxs)(i.Fragment,{children:[s.description&&(0,i.jsx)("span",{className:"epkb-help-description",children:s.description}),s.help_text&&(0,i.jsxs)("span",{className:"epkb-help-text",children:[s.help_text," ",(0,i.jsx)("a",{href:s.help_link_url,target:"_blank",rel:"noopener noreferrer",children:s.help_link_text})]})]})},n);case"custom_dropdown":const c=t[n]||s.default,p=Object.values(s.options).find(e=>e.key===c);return(0,i.jsx)(o.CustomSelectControl,{disabled:r,__next40pxDefaultSize:!0,label:s.label,value:p,onChange:e=>a({[n]:e.selectedItem.key}),options:Object.entries(s.options).map(([e,t])=>({key:t.key,name:t.name,style:t.style})),className:"epkb-block-ui-custom-dropdown-control"},n);case"dropdown":return(0,i.jsx)(o.CustomSelectControl,{disabled:r,__next40pxDefaultSize:!0,label:s.label,value:{key:t[n]||s.default,name:s.options[t[n]||s.default],style:{}},onChange:e=>{a({[n]:e.selectedItem.key})},options:Object.entries(s.options).map(([e,t])=>({key:e,name:t,style:{}})),className:"epkb-block-ui-dropdown-control"},n);case"presets_dropdown":const u=x[n]?x[n]:s.default;return(0,i.jsx)(o.CustomSelectControl,{disabled:r,__next40pxDefaultSize:!0,label:s.label,value:{key:u,name:s.presets[u].label,style:{}},onChange:e=>{"current"!==e.selectedItem.key&&(g(t=>({...t,[n]:e.selectedItem.key})),Object.entries(s.presets[e.selectedItem.key].settings).forEach(([e,t])=>{a({[e]:t})}),a({theme_presets:e.selectedItem.key,theme_name:e.selectedItem.key}))},options:Object.entries(s.presets).map(([e,t])=>({key:e,name:t.label,style:{}})),className:"epkb-block-ui-presets-dropdown-control"},n);case"checkbox_multi_select":return(0,i.jsx)(o.BaseControl,{label:s.label,__nextHasNoMarginBottom:!0,className:"epkb-block-ui-checkbox-multi-select-control",children:Object.entries(s.options).map(([e,l])=>(0,i.jsx)(o.CheckboxControl,{disabled:r,__nextHasNoMarginBottom:!0,checked:-1!==t[n].indexOf(parseInt(e)),label:l,onChange:o=>{const l=parseInt(e),s=o?[...t[n],l]:t[n].filter(e=>e!==l);a({[n]:s})}},n+"_"+e))},n);case"box_control":const _={[s.side]:""===t[n]||Number.isNaN(parseInt(t[n]))?s.default:parseInt(t[n])};return(0,i.jsx)(o.__experimentalBoxControl,{__next40pxDefaultSize:!0,label:s.label,sides:[s.side],inputProps:{min:j(s.min),max:j(s.max)},values:_,onChange:e=>{const t=e[s.side]||e;a({[n]:""===t||Number.isNaN(parseInt(t))?s.default:parseInt(t)})},className:"epkb-block-ui-box-control"},n);case"box_control_combined":const d=Object.values(s.combined_settings).map(e=>e.side),k=Object.fromEntries(Object.entries(s.combined_settings).map(([e,n])=>{const o=""===t[e]||Number.isNaN(parseInt(t[e]))?n.default:parseInt(t[e]);return[n.side,o]})),h=Object.fromEntries(Object.entries(s.combined_settings).map(([e,t])=>[t.side,t.default]));return(0,i.jsx)(o.__experimentalBoxControl,{__next40pxDefaultSize:!0,label:s.label,sides:d,resetValues:h,inputProps:{min:j(s.min),max:j(s.max)},values:k,onChange:e=>{Object.entries(e).forEach(([e,t])=>{Object.entries(s.combined_settings).forEach(([n,o])=>{if(o.side===e){const e="object"==typeof t?t.value:t;a({[n]:""===e||Number.isNaN(parseInt(e))?s.combined_settings[n].default:parseInt(e)})}})})},className:"epkb-block-ui-box-combined-control"},n);case"typography_controls":return(0,i.jsxs)(o.__experimentalToolsPanel,{label:s.label,resetAll:()=>{a({[n]:{...t[n],font_family:s.controls.font_family.default,font_size:s.controls.font_size.default,font_appearance:s.controls.font_appearance.default}})},className:"epkb-typography-controls",children:[(0,i.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>t[n].font_family!==s.controls.font_family.default,label:s.controls.font_family.label,onDeselect:()=>{a({[n]:{...t[n],font_family:s.controls.font_family.default}})},children:(0,i.jsx)(l.__experimentalFontFamilyControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,fontFamilies:Object.entries(epkb_block_editor_vars.font_families).map(([e,t])=>({fontFamily:t,name:t,slug:t})),onChange:e=>{const o={...t[n],font_family:e};a({[n]:o})},value:t[n].font_family||s.controls.font_family.default},n+"_font_family")}),(0,i.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>!0,label:s.controls.font_size.label,onDeselect:()=>{a({[n]:{...t[n],font_size:s.controls.font_size.default}})},isShownByDefault:!0,children:(0,i.jsx)(o.FontSizePicker,{__next40pxDefaultSize:!0,fontSizes:Object.entries(s.controls.font_size.options).map(([e,t])=>({name:t.name,size:t.size,slug:e})),value:t[n].font_size||s.controls.font_size.default,onChange:e=>{const o={...t[n],font_size:e};a({[n]:o})},disableCustomFontSizes:!1,withReset:!1,withSlider:!0,fallbackFontSize:s.controls.font_size.default},n+"_font_size")}),(0,i.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>t[n].font_appearance!==s.controls.font_appearance.default,label:s.controls.font_appearance.label,onDeselect:()=>{a({[n]:{...t[n],font_appearance:s.controls.font_appearance.default}})},children:(0,i.jsx)(o.CustomSelectControl,{__next40pxDefaultSize:!0,label:s.controls.font_appearance.label,value:(()=>{const e=t[n].font_appearance||s.controls.font_appearance.default;return{key:e,...s.controls.font_appearance.options[e]}})(),onChange:e=>{const o={...t[n],font_appearance:e.selectedItem.key};a({[n]:o})},options:Object.entries(s.controls.font_appearance.options).map(([e,t])=>({key:e,name:t.name,style:t.style}))},n+"_font_appearance")})]},n);case"section_description":const N=s.link_text.length>0?s.link_url.replaceAll("epkb_post_type_1","epkb_post_type_"+t.kb_id):"";return(0,i.jsxs)("div",{className:"epkb-block-ui-section-description",children:[(0,i.jsx)("span",{children:s.description}),s.link_text.length>0?(0,i.jsx)("a",{href:N,target:"_blank",rel:"noopener noreferrer",children:s.link_text}):null]},n);default:return null}})},n)})})})})}),(0,i.jsx)(s(),{block:c,attributes:t,epkbBlockStorage:x,urlQueryArgs:{is_editor_preview:1},httpMethod:"POST"})]})}(0,t.registerBlockType)("echo-knowledge-base/search",{edit:function({attributes:e,setAttributes:t,name:n}){return epkb_search_block_ui_config?(0,i.jsx)(c,{block_ui_config:epkb_search_block_ui_config,attributes:e,setAttributes:t,blockName:n}):(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{children:"Unable to load all assets."})})},save:function({attributes:e}){return l.useBlockProps.save(),null}}),function(e,t){const{unregisterBlockType:n,getBlockType:o}=e.blocks,{select:l,subscribe:a}=e.data;e.domReady(()=>{let e=!1;const s=a(()=>{if(e)return;let a=null;if(l("core/editor")&&"function"==typeof l("core/editor").getCurrentPostType&&(a=l("core/editor").getCurrentPostType()),a){if("page"===a)return e=!0,void s();if(o("echo-knowledge-base/"+t))try{n("echo-knowledge-base/"+t)}catch(e){}e=!0,s()}})})}(window.wp,"search")}();