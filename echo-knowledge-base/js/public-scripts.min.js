jQuery(document).ready((function(e){e("body").on("submit","#epkb_search_form",(function(t){t.preventDefault();if(e("#epkb_search_terms").val()===""){return}let a={action:"epkb-search-kb",epkb_kb_id:e("#epkb_kb_id").val(),search_words:e("#epkb_search_terms").val(),is_kb_main_page:e(".eckb_search_on_main_page").length};let i="";e.ajax({type:"GET",dataType:"json",data:a,url:epkb_vars.ajaxurl,beforeSend:function(t){e(".loading-spinner").css("display","block");e("#epkb-ajax-in-progress").show()}}).done((function(t){t=t?t:"";e(".loading-spinner").css("display","none");if(t.error||t.status!=="success"){i=epkb_vars.msg_try_again}else{i=t.search_result}})).fail((function(e,t,a){i=epkb_vars.msg_try_again+". ["+(a?a:epkb_vars.unknown_error)+"]"})).always((function(){e("#epkb-ajax-in-progress").hide();if(i){e("#epkb_search_results").css("display","block");e("#epkb_search_results").html(i)}}))}));e(document).on("keyup","#epkb_search_terms",(function(){if(!this.value){e("#epkb_search_results").css("display","none")}}));e("body").on("submit","#epkb-ml-search-form",(function(t){t.preventDefault();if(e(this).closest(".eckb-block-editor-preview").length){return}if(e(".epkb-ml-search-box__input").val()===""){return}const a=e(this).data("kb-block-post-id");let i={action:"epkb-search-kb",epkb_kb_id:e("#epkb_kb_id").val(),search_words:e(".epkb-ml-search-box__input").val(),is_kb_main_page:e(".eckb_search_on_main_page").length||(!!a?1:0),kb_block_post_id:!!a?a:0};let n="";e.ajax({type:"GET",dataType:"json",data:i,url:epkb_vars.ajaxurl,beforeSend:function(t){e(".epkbfa-ml-loading-icon").css("visibility","visible");e(".epkbfa-ml-search-icon").css("visibility","hidden");e(".epkb-ml-search-box__text").css("visibility","hidden");e("#epkb-ajax-in-progress").show()}}).done((function(t){t=t?t:"";e(".epkbfa-ml-loading-icon").css("visibility","hidden");e(".epkbfa-ml-search-icon").css("visibility","visible");e(".epkb-ml-search-box__text").css("visibility","visible");if(t.error||t.status!=="success"){n=epkb_vars.msg_try_again}else{n=t.search_result}})).fail((function(e,t,a){n=epkb_vars.msg_try_again+". ["+(a?a:epkb_vars.unknown_error)+"]"})).always((function(){e("#epkb-ajax-in-progress").hide();if(n){e("#epkb-ml-search-results").css("display","block").html(n);if(typeof window.epkb_ml_search_result_callback==="function"){window.epkb_ml_search_result_callback(n)}}}))}));e(document).on("click",(function(t){let a=e("#epkb-ml-search-results");let i=e("#epkb-ml-search-box");let n=a.has(t.target).length>0;let l=i.has(t.target).length>0;if(!n&&!l){a.hide()}}));e(document).on("keyup",".epkb-ml-search-box__input",(function(){if(!this.value){e("#epkb-ml-search-results").css("display","none")}}));e(document).on("click",".epkb-ml-ai-search-button",(function(t){t.preventDefault();let a=e(this);let i=a.closest(".epkb-ml-ai-search-section");let n=i.find(".epkb-ml-ai-search-answer");let l=n.find(".epkb-ml-ai-search-answer__loading");let s=n.find(".epkb-ml-ai-search-answer__content");let o=n.find(".epkb-ml-ai-search-answer__error");let c=i.data("kb-id");let r=e(".epkb-ml-search-box__input").val();if(n.is(":visible")){n.slideUp();return}n.slideDown();l.show();s.hide();o.hide();if(s.html().trim()!==""){l.hide();s.show();return}e.ajax({type:"POST",dataType:"json",url:epkb_vars.ajaxurl,data:{action:"epkb_ai_search",kb_id:c,question:r,_wpnonce_epkb_ajax_action:epkb_vars.nonce}}).done((function(e){l.hide();if(e.success&&e.data&&e.data.answer){s.html(e.data.answer).show()}else{let t=e.data&&e.data.message?e.data.message:epkb_vars.msg_try_again;o.text(t).show()}})).fail((function(e,t){l.hide();const a=t==="timeout"||t==="abort";if(!epkb_vars.is_admin){o.text(epkb_vars.ai_error_generic||"Unable to connect. Please refresh the page and try again.").show()}else{o.text(epkb_vars.msg_try_again).show()}}))}));function t(){e('.epkb-ml-ai-search-section[data-display-mode="auto"]').each((function(){let t=e(this);let a=t.find(".epkb-ml-ai-search-answer__loading");let i=t.find(".epkb-ml-ai-search-answer__content");let n=t.find(".epkb-ml-ai-search-answer__error");let l=t.data("kb-id");let s=e(".epkb-ml-search-box__input").val();if(!s||i.html().trim()!==""){return}a.show();i.hide();n.hide();e.ajax({type:"POST",dataType:"json",url:epkb_vars.ajaxurl,data:{action:"epkb_ai_search",kb_id:l,question:s,_wpnonce_epkb_ajax_action:epkb_vars.nonce}}).done((function(e){a.hide();if(e.success&&e.data&&e.data.answer){i.html(e.data.answer).show()}else{let t=e.data&&e.data.message?e.data.message:epkb_vars.msg_try_again;n.text(t).show()}})).fail((function(e,t){a.hide();const i=t==="timeout"||t==="abort";if(!epkb_vars.is_admin){n.text(epkb_vars.ai_error_generic||"Unable to connect. Please refresh the page and try again.").show()}else{n.text(epkb_vars.msg_try_again).show()}}))}))}let a=window.epkb_ml_search_result_callback;window.epkb_ml_search_result_callback=function(i){if(a){a(i)}setTimeout(t,100);e(".epkb-ml-ai-search-answer__content").empty()};e(window).on("resize",(function(){let t=e(".epkb-nav-tabs li");let a=e("#epkb-content-container");if(a.length&&t.length){let i=0;a.find(t).each((function(){let t=e(this).outerHeight(true);if(t>i){i=t}}));a.find(t).css("min-height",i)}}));function i(t){e(".epkb-panel-container ."+t+"").addClass("active")}function n(e,t){let a=window.location.href;a=l(a,"top-category",t);window.history.pushState({tab:e},"title",a)}window.onpopstate=function(t){let a=e("#epkb-content-container");if(t.state&&t.state.tab.indexOf("epkb_tab_")!==-1){a.find(".epkb_top_panel").removeClass("active");if(e("#main-category-selection").length>0){e("#main-category-selection").val(a.find("#"+t.state.tab).val())}else{a.find(".epkb_top_categories").removeClass("active");a.find("#"+t.state.tab).addClass("active")}a.find("."+t.state.tab).addClass("active")}else if(e("#epkb_tab_1").length>0&&!a.find("#epkb_tab_1").hasClass("active")){a.find(".epkb_top_panel").removeClass("active");if(e("#main-category-selection").length>0){e("#main-category-selection").val(a.find("#epkb_tab_1").val())}else{a.find(".epkb_top_categories").removeClass("active");a.find("#epkb_tab_1").addClass("active")}a.find(".epkb_tab_1").addClass("active")}};e(document).on("click","#epkb-content-container .epkb-nav-tabs li",(function(){let t=e("#epkb-content-container");t.find(".epkb-nav-tabs li").removeClass("active");e(this).addClass("active");t.find(".epkb-tab-panel").removeClass("active");i(e(this).attr("id"));n(e(this).attr("id"),e(this).data("cat-name"))}));e(document).on("change","#main-category-selection",(function(){e("#epkb-content-container").find(".epkb-tab-panel").removeClass("active");e("#main-category-selection option:selected").each((function(){i(e(this).attr("id"));if(!e(this).closest(".eckb-block-editor-preview").length){n(e(this).attr("id"),e(this).data("cat-name"))}}))}));e(document).on("click","#epkb-ml-tabs-layout .epkb-ml-articles-show-more",(function(t){t.preventDefault();e(this).hide();e(this).parent().find(".epkb-list-column li").removeClass("epkb-ml-article-hide")}));function l(e,t,a){let i=new RegExp("([?&])"+t+"=.*?(&|$)","i");let n=e.indexOf("?")!==-1?"&":"?";if(e.match(i)){return e.replace(i,"$1"+t+"="+a+"$2")}else{return e+n+t+"="+a}}e(document).on("click keydown",".epkb-section-body .epkb-category-level-2-3",(function(t){if(t.type!=="click"&&t.keyCode!==13){return}e(this).parent().children("ul").toggleClass("active");let a=e(this).parent().children("ul").data("list-id");let i=e(this).attr("aria-expanded");switch(i){case"true":e(this).attr("aria-expanded","false");e(this).parent().find('.epkb-show-all-articles[data-btn-id="'+a+'"]').removeClass("epkb-show-all-btn--active");break;case"false":e(this).attr("aria-expanded","true");e(this).parent().find('.epkb-show-all-articles[data-btn-id="'+a+'"]').addClass("epkb-show-all-btn--active");break;default:}}));e(document).on("click keydown","#epkb-content-container .epkb-section-body .epkb-category-level-2-3:not(.epkb-category-focused)",(function(t){if(t.type!=="click"&&t.keyCode!==13){return}let a=e(this).find(".epkb-category-level-2-3__cat-icon");let i=["ep_font_icon_plus","ep_font_icon_minus"];let n=["ep_font_icon_plus_box","ep_font_icon_minus_box"];let l=["ep_font_icon_right_arrow","ep_font_icon_down_arrow"];let s=["ep_font_icon_arrow_carrot_right","ep_font_icon_arrow_carrot_down"];let o=["ep_font_icon_arrow_carrot_right_circle","ep_font_icon_arrow_carrot_down_circle"];let c=["ep_font_icon_folder_add","ep_font_icon_folder_open"];function r(e){if(a.hasClass(e[0])){a.removeClass(e[0]);a.addClass(e[1])}else if(a.hasClass(e[1])){a.removeClass(e[1]);a.addClass(e[0])}}r(i);r(n);r(l);r(s);r(o);r(c)}));e(document).on("click","#epkb-modular-main-page-container .epkb-show-all-articles, .epkb-block-main-page-container .epkb-show-all-articles, #epkb-main-page-container .epkb-show-all-articles",(function(){e(this).toggleClass("epkb-show-articles");let t=e(this).data("btn-id");let a=e('[data-list-id="'+t+'"]').find("li");if(e(this).hasClass("epkb-show-articles")){e(this).find(".epkb-show-text").addClass("epkb-hide-elem");e(this).find(".epkb-hide-text").removeClass("epkb-hide-elem");e(this).attr("aria-expanded","true")}else{e(this).find(".epkb-show-text").removeClass("epkb-hide-elem");e(this).find(".epkb-hide-text").addClass("epkb-hide-elem");e(this).attr("aria-expanded","false")}e(a).each((function(){if(e(this).hasClass("epkb-hide-elem")){e(this).removeClass("epkb-hide-elem");e(this).addClass("visible")}else if(e(this).hasClass("visible")){e(this).removeClass("visible");e(this).addClass("epkb-hide-elem")}}))}));let s=e("#epkb-search-kb").text();e("#epkb-search-kb").text(s);e("body").on("click",".eckb-print-button-container, .eckb-print-button-meta-container",(function(t){if(e("body").hasClass("epkb-editor-preview")){return}e("#eckb-article-content").parents().each((function(){e(this).siblings().addClass("eckb-print-hidden")}));window.print()}));let o={firstLevel:1,lastLevel:6,searchStr:"",currentId:"",offset:50,excludeClass:false,init:function(){this.getOptions();let t=this.getArticleHeaders();let a=e(".eckb-article-toc");if(t.length>0){a.html(this.getToCHTML(t));if(e("#eckb-article-content .eckb-article-toc").length>0){e("#eckb-article-content .eckb-article-toc").html(this.getToCHTML(t,"h2"))}}else{a.hide();if(e("body").hasClass("epkb-editor-preview")){a.show();let e=a.find(".eckb-article-toc__title").html();let t=`\n\t\t\t\t\t\t<div class="eckb-article-toc__inner">\n\t\t\t\t\t\t\t<h4 class="eckb-article-toc__title">${e}</h4>\n\t\t\t\t\t\t\t<nav class="eckb-article-toc-outline" role="navigation" aria-label="${epkb_vars.toc_aria_label}">\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li>${epkb_vars.toc_editor_msg}</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</nav>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t`;a.html(t)}}let i=this;e(".eckb-article-toc__level a").on("click",(function(t){if(e(".epkb-editor-preview").length){t.preventDefault();return}let a=e(this).data("target");if(!a||e("[data-id="+a+"]").length===0){return false}let n=e("[data-id="+a+"]").offset().top-i.offset;let l=parseInt(e(this).closest(".eckb-article-toc").data("speed"));e("body, html").animate({scrollTop:n},l);return false}));this.scrollSpy();if(!location.hash){return}let n=e("[data-target="+location.hash.slice(1)+"]");if(n.length){n.trigger("click")}},getOptions:function(){let t=e(".eckb-article-toc");if(t.data("min")){this.firstLevel=t.data("min")}if(t.data("max")){this.lastLevel=t.data("max")}if(t.data("offset")){this.offset=t.data("offset")}else{t.data("offset",this.offset)}if(typeof t.data("exclude_class")!=="undefined"){this.excludeClass=t.data("exclude_class")}this.searchStr="";while(this.firstLevel<=this.lastLevel){this.searchStr+="h"+this.firstLevel+(this.firstLevel<this.lastLevel?",":"");this.firstLevel++}},getArticleHeaders:function(){let t=[];let a=this;e("#eckb-article-content-body").find(a.searchStr).each((function(){if(e(this).text().length===0){return}if(a.excludeClass&&e(this).hasClass(a.excludeClass)){return}let i;let n={};if(e(this).data("id")){i=e(this).data("id")}else{i="articleTOC_"+t.length;e(this).attr("data-id",i)}n.id=i;n.title=e(this).text();if("H1"===e(this).prop("tagName")){n.level=1}else if("H2"===e(this).prop("tagName")){n.level=2}else if("H3"===e(this).prop("tagName")){n.level=3}else if("H4"===e(this).prop("tagName")){n.level=4}else if("H5"===e(this).prop("tagName")){n.level=5}else if("H6"===e(this).prop("tagName")){n.level=6}t.push(n)}));if(t.length===0){return t}let i=1;let n=6;t.forEach((function(e){if(e.level>i){i=e.level}if(e.level<n){n=e.level}}));if(n>1){t.forEach((function(e,a){t[a].level=e.level-n+1}))}let l=1;while(l<i){let e=false;t.forEach((function(t){if(t.level==l){e=true}}));if(e){l++}else{t.forEach((function(e,a){if(e.level>l){t[a].level=e.level-1}}))}l++}return t},getToCHTML:function(t,a="h4"){let i;let n=e(".eckb-article-toc");if(n.find(".eckb-article-toc__title").length){let e=n.find(".eckb-article-toc__title").html();i=`\n\t\t\t\t\t<div class="eckb-article-toc__inner">\n\t\t\t\t\t\t<${a} class="eckb-article-toc__title">${e}</${a}>\n\t\t\t\t\t\t<nav class="eckb-article-toc-outline" role="navigation" aria-label="${epkb_vars.toc_aria_label}">\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t`}else{i=`\n\t\t\t\t\t<div class="eckb-article-toc__inner">\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t`}t.forEach((function(e){let t=new URL(location.href);t.hash=e.id;t=t.toString();i+=`<li class="eckb-article-toc__level eckb-article-toc__level-${e.level}"><a href="${t}" data-target="${e.id}">${e.title}</a></li>`}));i+=`\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</nav>\n\t\t\t\t\t</div>\n\t\t\t\t`;return i},scrollSpy:function(){if(e(document).height()<=e(window).height()){e(".eckb-article-toc__level a").removeClass("active");return}let t=e(".eckb-article-toc");let a=e(window).scrollTop();let i=e(window).scrollTop()+e(window).height();let n=false;let l=false;let s=t.data("offset");if(i==e(document).height()){n=true;l=e(".eckb-article-toc__level a").last();e(".eckb-article-toc__level a").removeClass("active");l.addClass("active")}else{e(".eckb-article-toc__level a").each((function(t){e(this).removeClass("active");if(n){return true}let o=e(this).data("target");if(!o||e("[data-id="+o+"]").length===0){return true}let c=e("[data-id="+o+"]");let r=c.offset().top;let d=c.offset().top+c.height();if(t+1===e(".eckb-article-toc__level a").length){d=c.parent().offset().top+c.parent().height()}else{let a=e(".eckb-article-toc__level a").eq(t+1).data("target");if(a&&e("[data-id="+a+"]").length){d=e("[data-id="+a+"]").offset().top}}r-=s;d-=s+1;let _=false;if(r<i&&r>a){_=true}else if(d<i&&d>a){_=true}else if(r<a&&d>i){_=true}if(_){e(this).addClass("active");n=true;l=e(this)}}))}if(!l||l.length===0||!n){return}let o=l.position().top;if(o<0||o>l.closest(".eckb-article-toc__inner").height()){l.closest(".eckb-article-toc__inner").scrollTop(o-l.closest(".eckb-article-toc__inner").find(".eckb-article-toc__title").position().top)}}};function c(){let t=e(".eckb-article-toc");if(t.length){o.init()}let a=e("#eckb-article-content-body").position();let i=e(window).width();let n=768;let l=typeof e("#eckb-article-page-container-v2").data("mobile_breakpoint")=="undefined"?n:e("#eckb-article-page-container-v2").data("mobile_breakpoint");if(e(".eckb-article-page--L-sidebar-to-content").length>0&&i>l){e("#eckb-article-page-container-v2").find("#eckb-article-left-sidebar ").css("margin-top",a.top+"px")}if(e(".eckb-article-page--R-sidebar-to-content").length>0&&i>l){e("#eckb-article-page-container-v2").find("#eckb-article-right-sidebar ").css("margin-top",a.top+"px")}if(t.length){r()}}setTimeout((function(){c();e(window).on("scroll",o.scrollSpy);e(window).on("resize",o.scrollSpy)}),500);function r(){let t=e(window).width();let a=typeof e("#eckb-article-page-container-v2").data("mobile_breakpoint")=="undefined"?111:e("#eckb-article-page-container-v2").data("mobile_breakpoint");if(t>a){return}if(e("#eckb-article-content-header-v2 .eckb-article-toc").length){return}if(e("#eckb-article-left-sidebar .eckb-article-toc").length){e("#eckb-article-content-header-v2").append(e("#eckb-article-left-sidebar .eckb-article-toc"));return}if(e("#eckb-article-right-sidebar .eckb-article-toc").length){e("#eckb-article-content-header-v2").append(e("#eckb-article-right-sidebar .eckb-article-toc"))}}e(document).on("click","#eckb-kb-create-demo-data",(function(t){t.preventDefault();if(e(this).closest(".epkb-editor-preview, .eckb-block-editor-preview").length){return}let a={action:"epkb_create_kb_demo_data",epkb_kb_id:e(this).data("id"),_wpnonce_epkb_ajax_action:epkb_vars.nonce};let i=e(this).closest(".eckb-kb-no-content"),n=e(".eckb-kb-no-content").find("#epkb-created-kb-content");let l=epkb_vars.creating_demo_data?epkb_vars.creating_demo_data:"";e.ajax({type:"POST",dataType:"json",data:a,url:epkb_vars.ajaxurl,beforeSend:function(e){d("show",l,i)}}).done((function(e){e=e?e:"";if(typeof e.message!=="undefined"){n.addClass("epkb-dialog-box-form--active")}})).fail((function(e,t,a){n.addClass("epkb-dialog-box-form--active").find(".epkb-dbf__body").html(a)})).always((function(){d("remove","",i)}))}));function d(e,t,a){if(e==="show"){let e='<div class="epkb-admin-dialog-box-loading">'+'<div class="epkb-admin-dbl__header">'+'<div class="epkb-admin-dbl-icon epkbfa epkbfa-hourglass-half"></div>'+(t?'<div class="epkb-admin-text">'+t+"</div>":"")+"</div>"+"</div>"+'<div class="epkb-admin-dialog-box-overlay"></div>';a.append(e)}else if(e==="remove"){a.find(".epkb-admin-dialog-box-loading").remove();a.find(".epkb-admin-dialog-box-overlay").remove()}}e(document).on("click",".eckb-kb-no-content #epkb-created-kb-content .epkb-dbf__footer__accept__btn",(function(){location.reload()}));function _(){if(e("#elay-sidebar-container-v2").length===0&&e("#epkb-sidebar-container-v2").length>0){function t(e,t){let a=["ep_font_icon_plus","ep_font_icon_plus_box","ep_font_icon_right_arrow","ep_font_icon_arrow_carrot_right","ep_font_icon_arrow_carrot_right_circle","ep_font_icon_folder_add"];let i=["ep_font_icon_minus","ep_font_icon_minus_box","ep_font_icon_down_arrow","ep_font_icon_arrow_carrot_down","ep_font_icon_arrow_carrot_down_circle","ep_font_icon_folder_open"];let n=a.indexOf(t);let l=i.indexOf(t);if(n>=0){e.removeClass(a[n]);e.addClass(i[n])}else if(l>=0){e.removeClass(i[l]);e.addClass(a[l])}}function a(){let a=e("#eckb-article-content");if(typeof a.data("article-id")==="undefined"){return}let i=a.data("article-id");if(typeof a.data("kb_article_seq_no")!=="undefined"&&a.data("kb_article_seq_no")>0){let t=i+"_"+a.data("kb_article_seq_no");i=e("#sidebar_link_"+t).length>0?t:i}e(".epkb-sidebar__cat__top-cat li").removeClass("active");e(".epkb-category-level-1").removeClass("active");e(".epkb-category-level-2-3").removeClass("active");e(".epkb-sidebar__cat__top-cat__heading-container").removeClass("active");let n=e("#sidebar_link_"+i);n.addClass("active");n.parents(".epkb-sub-sub-category, .epkb-articles").each((function(){let a=e(this).parent().children(".epkb-category-level-2-3");if(!a.length){return true}if(!a.hasClass("epkb-category-level-2-3")){return true}a.next().show();a.next().next().show();let i=a.find(".epkb_sidebar_expand_category_icon");if(i.length>0){t(i,i.attr("class").match(/\ep_font_icon_\S+/g)[0])}}));n.closest(".epkb-sidebar__cat__top-cat").parent().toggleClass("epkb-active-top-category");n.closest(".epkb-sidebar__cat__top-cat").find(e(".epkb-sidebar__cat__top-cat__body-container")).show();let l=n.closest(".epkb-sidebar__cat__top-cat").find(".epkb-sidebar__cat__top-cat__heading-container .epkb-sidebar__heading__inner span");if(l.length>0){t(l,l.attr("class").match(/\ep_font_icon_\S+/g)[0])}}function i(){let a=e(".epkb-sidebar__cat__current-cat");if(!a.length){return}let i=a.closest("li");for(let e=0;e<5;e++){if(!i.length){continue}if(i.hasClass("epkb-sidebar__cat__top-cat")){i.find(".epkb-sidebar__cat__top-cat__body-container").css("display","block");i.closest(".epkb-sidebar__cat__top-cat__body-container").css("display","block")}i.children("ul").show();i=i.closest("li").closest("ul").parent()}let n=a.closest("li");let l;for(let e=0;e<5;e++){l=n.find("span").first();n=l.closest("ul").closest("ul").closest("li");if(l.length){let e=l.attr("class").match(/\ep_font_icon_\S+/g);if(e){t(l,e[0])}}n.find("div[class^=elay-category]").first().addClass("active");if(e===0){n.find(".epkb-sidebar__cat__top-cat__body-container").css("display","block");n.closest(".epkb-sidebar__cat__top-cat__body-container").css("display","block")}}}let n=e("#epkb-sidebar-container-v2");n.off("click.epkbTopCat").on("click.epkbTopCat",".epkb-top-class-collapse-on, .epkb-sidebar__cat__top-cat__heading-container",(function(a){if(e(a.target).closest(".epkb-editor-zone__tab--active, .epkb-editor-zone__tab--parent").length){return}const i=e(this);const n=i.parent();const l=n.children(".epkb-sidebar__cat__top-cat__body-container");n.toggleClass("epkb-active-top-category");l.stop(true,true).slideToggle();const s=i.find('span[class*="ep_font_icon_"]');if(s.length){const e=(s.attr("class").match(/ep_font_icon_\S+/)||[""])[0];t(s,e)}a.preventDefault()}));n.off("click.epkbToggleCat").on("click.epkbToggleCat",".epkb-category-level-2-3",(function(a){e(this).nextUntil(":not(ul)","ul").stop(true,true).slideToggle();const i=e(this).children(".epkb_sidebar_expand_category_icon");if(i.length){const e=(i.attr("class").match(/ep_font_icon_\S+/)||[""])[0];t(i,e)}a.preventDefault()}));n.off("click.epkbShowAll").on("click.epkbShowAll",".epkb-show-all-articles",(function(){e(this).toggleClass("active");let t=e(this).parent("ul");let a=t.find("li");if(e(this).hasClass("active")){e(this).find(".epkb-show-text").addClass("epkb-hide-elem");e(this).find(".epkb-hide-text").removeClass("epkb-hide-elem");e(this).attr("aria-expanded","true")}else{e(this).find(".epkb-show-text").removeClass("epkb-hide-elem");e(this).find(".epkb-hide-text").addClass("epkb-hide-elem");e(this).attr("aria-expanded","false")}e(a).each((function(){if(e(this).hasClass("epkb-hide-elem")){e(this).removeClass("epkb-hide-elem");e(this).addClass("visible")}else if(e(this).hasClass("visible")){e(this).removeClass("visible");e(this).addClass("epkb-hide-elem")}}))}));a();i()}}_();e(document).on("click","#epkb-ml-classic-layout .epkb-ml-articles-show-more",(function(){e(this).parent().parent().toggleClass("epkb-category-section--active");e(this).parent().parent().find(".epkb-category-section__body").slideToggle();e(this).find(".epkb-ml-articles-show-more__show-more__icon").toggleClass("epkbfa-plus epkbfa-minus");const t=e(this).find(".epkb-ml-articles-show-more__show-more__icon").hasClass("epkbfa-minus");if(t){e(this).parent().find(".epkb-ml-article-count").hide()}else{e(this).parent().find(".epkb-ml-article-count").show()}}));e(document).on("click","#epkb-ml-classic-layout .epkb-ml-2-lvl-category-container",(function(t){if(e(this).hasClass("epkb-ml-2-lvl-category--active")&&!e(t.target).hasClass("epkb-ml-2-lvl-category__show-more__icon"))return;e(this).find(".epkb-ml-2-lvl-article-list").slideToggle();e(this).find(".epkb-ml-3-lvl-categories").slideToggle();e(this).find(".epkb-ml-2-lvl-category__show-more__icon").toggleClass("epkbfa-plus epkbfa-minus");e(this).toggleClass("epkb-ml-2-lvl-category--active")}));e(document).on("click","#epkb-ml-classic-layout .epkb-ml-3-lvl-category-container",(function(t){if(e(this).hasClass("epkb-ml-3-lvl-category--active")&&!e(t.target).hasClass("epkb-ml-3-lvl-category__show-more__icon"))return;e(this).find(".epkb-ml-3-lvl-article-list").slideToggle();e(this).find(".epkb-ml-4-lvl-categories").slideToggle();e(this).find(".epkb-ml-3-lvl-category__show-more__icon").toggleClass("epkbfa-plus epkbfa-minus");e(this).toggleClass("epkb-ml-3-lvl-category--active")}));e(document).on("click","#epkb-ml-classic-layout .epkb-ml-4-lvl-category-container",(function(t){if(e(this).hasClass("epkb-ml-4-lvl-category--active")&&!e(t.target).hasClass("epkb-ml-4-lvl-category__show-more__icon"))return;e(this).find(".epkb-ml-4-lvl-article-list").slideToggle();e(this).find(".epkb-ml-5-lvl-categories").slideToggle();e(this).find(".epkb-ml-4-lvl-category__show-more__icon").toggleClass("epkbfa-plus epkbfa-minus");e(this).toggleClass("epkb-ml-4-lvl-category--active")}));e(document).on("click","#epkb-ml-classic-layout .epkb-ml-5-lvl-category-container",(function(t){if(e(this).hasClass("epkb-ml-5-lvl-category--active")&&!e(t.target).hasClass("epkb-ml-5-lvl-category__show-more__icon"))return;e(this).find(".epkb-ml-5-lvl-article-list").slideToggle();e(this).find(".epkb-ml-5-lvl-category__show-more__icon").toggleClass("epkbfa-plus epkbfa-minus");e(this).toggleClass("epkb-ml-5-lvl-category--active")}));e(document).on("click",".epkb-ml-top__cat-container",(function(){const t="epkb-ml__cat-content--show";const a="epkb-ml-top__cat-container--active";const i="epkb-ml__cat-container--active";const n="epkb-ml-categories-button-container--active";const l="epkb-ml-categories-button-container--show";const s="epkb-back-button--active";const o=e(".epkb-ml-all-categories-content-container");e(".epkb-ml-top__cat-container").removeClass(a);if(e(this).hasClass(a)){e(this).removeClass(a);o.hide();return}o.find(".epkb-back-button").removeClass(s);let c=e(this);e(this).removeClass(a);c.addClass(a);b(c);e(".epkb-ml-categories-button-container").removeClass(n+" "+l);e(".epkb-ml__cat-content").removeClass(t);e(".epkb-ml__cat-container").removeClass(i);o.show();const r=e(this).data("cat-id");e('.epkb-ml-1-lvl__cat-content[data-cat-id="'+r+'"]').addClass(t);e('.epkb-ml-2-lvl-categories-button-container[data-cat-level="1"][data-cat-id="'+r+'"]').addClass(l)}));e(window).on("resize",(function(){const t="epkb-ml-top__cat-container--active";c();_();p();let a=setTimeout((function(){if(a){clearTimeout(a)}let i=e("."+t);if(!i.length){return}b(i)}),1e3)}));function b(t){const a=e(".epkb-ml-all-categories-content-container");a.hide();let i=t.offset().top;let n=false;e(".epkb-ml-top__cat-container").each((function(){let t=e(this).offset().top;if(t-i>0){a.insertAfter(e(this).prev(".epkb-ml-top__cat-container"));n=true;return false}else if(!e(this).next(".epkb-ml-top__cat-container").length){a.insertAfter(e(this))}}));a.show()}e(document).on("click",".epkb-ml__cat-container",(function(){const t="epkb-ml__cat-content--show";const a="epkb-ml__cat-container--active";const i="epkb-ml-categories-button-container--active";const n="epkb-ml-categories-button-container--show";const l="epkb-back-button--active";if(e(this).hasClass(a)){return}e(".epkb-ml-all-categories-content-container .epkb-back-button").addClass(l);const s=parseInt(e(this).data("cat-level"));const o=e(this).data("cat-id");const c=s-1;const r=e(this).data("parent-cat-id");const d=s+1;e(this).addClass(a);e(".epkb-ml-"+s+'-lvl-categories-button-container[data-cat-id="'+r+'"]').addClass(i+" "+n);e(".epkb-ml-"+c+"-lvl-categories-button-container").removeClass(i+" "+n);e(".epkb-ml-"+c+"-lvl__cat-container").removeClass(a);e(".epkb-ml-"+c+"-lvl__cat-content").removeClass(t);e(".epkb-ml-"+s+'-lvl__cat-content[data-cat-id="'+o+'"]').addClass(t);e(".epkb-ml-"+d+'-lvl-categories-button-container[data-cat-id="'+o+'"]').addClass(n)}));e(document).on("click",".epkb-back-button",(function(){const t="epkb-ml__cat-content--show";const a="epkb-ml-top__cat-container--active";const i="epkb-ml__cat-container--active";const n="epkb-ml-categories-button-container--active";const l="epkb-ml-categories-button-container--show";const s="epkb-back-button--active";let o=e(".epkb-ml__cat-content"+"."+t);let c=parseInt(o.data("cat-level"));let r=c+1;if(c===1){e(".epkb-ml-top__cat-container").removeClass(a);e(".epkb-ml-all-categories-content-container").hide();return}let d=o.data("parent-cat-id");let _=c-1;if(_===1){e(".epkb-ml-all-categories-content-container .epkb-back-button").removeClass(s)}e(".epkb-ml-"+c+"-lvl-categories-button-container").removeClass(n);e(".epkb-ml-"+c+"-lvl__cat-container").removeClass(i);e(".epkb-ml-"+c+"-lvl__cat-content").removeClass(t);e(".epkb-ml-"+r+"-lvl-categories-button-container").removeClass(n+" "+l);let b=e(".epkb-ml-"+_+'-lvl__cat-container[data-cat-id="'+d+'"]');b.closest(".epkb-ml-categories-button-container").addClass(n+" "+l);b.addClass(i);e(".epkb-ml-"+_+'-lvl__cat-content[data-cat-id="'+d+'"]').addClass(t)}));e(document).on("click",'.epkb-faqs-accordion-mode .epkb-faqs__item__question[data-faq-type="module"]',(function(){let t=e(this).closest(".epkb-faqs__item-container").eq(0);if(t.hasClass("epkb-faqs__item-container--active")){t.find(".epkb-faqs__item__answer").stop().slideUp(400)}else{t.find(".epkb-faqs__item__answer").stop().slideDown(400)}t.toggleClass("epkb-faqs__item-container--active")}));e(document).on("click",'.epkb-faqs-toggle-mode .epkb-faqs__item__question[data-faq-type="module"]',(function(){let t=e(this).closest(".epkb-faqs__item-container").eq(0);e(".epkb-faqs__item-container--active").not(t).removeClass("epkb-faqs__item-container--active").find(".epkb-faqs__item__answer").stop().slideUp(400);if(t.hasClass("epkb-faqs__item-container--active")){t.find(".epkb-faqs__item__answer").stop().slideUp(400)}else{t.find(".epkb-faqs__item__answer").stop().slideDown(400)}t.toggleClass("epkb-faqs__item-container--active")}));function p(){if(e("#eckb-article-content").length===0){return}let t=e("#eckb-article-content").data("article-id");if(typeof t==undefined||t==""||typeof epkb_vars.article_views_counter_method==undefined||epkb_vars.article_views_counter_method==""){return}if(epkb_vars.article_views_counter_method==="delay"){setTimeout((function(){k(t)}),5e3)}if(epkb_vars.article_views_counter_method==="scroll"){e(window).one("scroll",(function(){k(t)}))}}p();function k(t){if(typeof epkb_vars.article_view_sent!=="undefined"){return}let a={action:"epkb_count_article_view",article_id:t,_wpnonce_epkb_ajax_action:epkb_vars.nonce};e.ajax({type:"POST",dataType:"json",data:a,url:epkb_vars.ajaxurl,beforeSend:function(e){epkb_vars.article_view_sent=true}})}e(document).on("click",".eckb-article-list-show-more-container",(function(){if(e("#eckb-archive-page-container").length===0){return}e(this).parent().find(".eckb-article-container").removeClass("epkb-hide-elem");e(".eckb-article-list-show-more-container").hide()}));e(window).trigger("resize");function f(){window._lastKeyWasShiftTab=false;window.handleKeydown=function(e){if(e.key==="Tab"){window._lastKeyWasShiftTab=e.shiftKey}};window.handleFocusin=function(e){console.log("Focused element:",e.target);document.querySelectorAll('[style*="outline"]').forEach((function(e){e.style.outline=""}));e.target.style.outline=window._lastKeyWasShiftTab?"3px solid blue":"3px solid red"};document.removeEventListener("keydown",window.handleKeydown);document.removeEventListener("focusin",window.handleFocusin);document.querySelectorAll('[style*="outline"]').forEach((function(e){e.style.outline=""}));document.addEventListener("keydown",window.handleKeydown);document.addEventListener("focusin",window.handleFocusin)}}));